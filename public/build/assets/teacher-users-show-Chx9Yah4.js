import{f as U,a as z,u as i,r as E,i as u,v as M,n as Y,k as R,j as e,S as B,a8 as F,X as G,c as k,A as P,L as x,t as H}from"./main-BjKjkFnO.js";import{g as T,a as C}from"./users-selector-5OWV2O4j.js";import{b as y,S as J}from"./users-DUqPc0QS.js";import{g as W,a as X}from"./grades-selector-vTNl7uIh.js";import{g as q,a as K}from"./nationalities-selector-Djwyq35o.js";import{D as v}from"./description-list-DhGr_30r.js";import{B as D}from"./button-C0MfaOJU.js";import{I as h}from"./icons-2GKCzqG_.js";import"./preload-helper-BfFHrpNk.js";function O({children:_,withSidebar:d=!1}){var g,b,j,t,N,S,$,L,I,A;const w=U(),c=z(),f=i(T),m=i(W),n=i(q),r=i(C),s=i(X),a=(r==null?void 0:r.find(o=>o.id===+(w.id||0)))||null,l=s==null?void 0:s.find(({id:o})=>{var p;return o===((p=a==null?void 0:a.student)==null?void 0:p.gradeId)});return E.useEffect(()=>{f===u.Idle&&c(M()),m===u.Idle&&c(Y()),n===u.Idle&&c(R())},[c,m,n,f]),!a||!r?e.jsx(B,{className:"w-8 h-8"}):e.jsxs("main",{className:"pt-4 pb-40",children:[e.jsxs("header",{className:"relative z-10 lg:flex lg:items-top lg:gap-4",children:[e.jsx("div",{className:"relative min-w-36 max-w-36 min-h-36 max-h-36 !p-0 mb-2 lg:mb-0",children:e.jsx("img",{className:"block w-full h-full rounded-full object-cover border-[2px] border-white",src:a.avatarThumb||"/images/avatar.png",width:144,height:144,alt:a.name})}),e.jsxs("div",{className:"lg:grow lg:mt-20",children:[e.jsxs("h1",{className:"title mb-1",children:[a.surname," ",a.name]}),e.jsxs("span",{className:"flex max-w-max text-center bg-blue-200 text-primary rounded-full text-sm py-1 px-2 leading-none",children:[y[a.role]," ",l&&`${l==null?void 0:l.level} ${l.group}`]})]})]}),e.jsxs("div",{className:"relative",children:[e.jsx("ul",{className:"flex items-center font-medium text-slate-500 overflow-scroll no-scrollbar py-4 pl-2 -ml-2 pr-7",children:e.jsx("li",{children:e.jsx(F,{className:({isActive:o})=>k("flex items-center h-7 px-2 transition-all duration-150 border border-transparent min-w-max",o&&"rounded shadow bg-white border-gray-200"),to:G(P.Users.Show,{id:a.id}),end:!0,children:"Профиль"})})}),e.jsx("div",{className:"absolute top-0 right-0 z-10 min-w-6 h-full pointer-events-none bg-gradient-to-l from-gray-100 to-transparent"})]}),e.jsxs("div",{className:k("flex flex-col gap-4",d&&"xl:grid xl:grid-cols-[75%_1fr]"),children:[e.jsx("div",{className:"flex flex-col gap-4 grow",children:_}),d&&e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs("section",{className:"box",children:[e.jsxs("div",{className:"box__header flex-col !items-start",children:[e.jsxs(D,{className:"flex items-center gap-2 text-blue-600 leading-none",variant:"default",href:a.email?`mailto:${a.email}`:"",children:[e.jsx("span",{className:"flex items-center justify-center w-7 h-7 rounded bg-blue-50 text-success",children:e.jsx(h.mail,{width:16,height:16})}),a.email??"-"]}),e.jsxs(D,{className:k("flex items-center gap-2 text-blue-600 leading-none",!a.whatsapp&&"pointer-events-none"),variant:"default",href:`https://wa.me/+${(g=a.whatsapp)==null?void 0:g.code}${(b=a.whatsapp)==null?void 0:b.numbers}`,target:"_blank",children:[e.jsx("span",{className:"flex items-center justify-center w-7 h-7 rounded bg-blue-50 text-success",children:e.jsx(h.whatsapp,{width:16,height:16})}),a.whatsapp?`+${a.whatsapp.code} ${a.whatsapp.numbers}`:"-"]})]}),e.jsx(v,{className:"box__body",variant:"detailed",list:{}})]}),e.jsxs("section",{className:"box",children:[e.jsx("div",{className:"box__header",children:e.jsx("h2",{className:"font-medium text-gray-900",children:"Телефонные номера"})}),e.jsx("ul",{className:"box__body flex flex-col gap-2",children:(j=a.phoneNumbers)==null?void 0:j.map(({code:o,numbers:p})=>e.jsx("li",{children:e.jsxs(x,{className:"flex items-center gap-2 w-max text-blue-600",to:`tel:+${o}${p}`,children:[e.jsx("span",{className:"flex items-center w-7 h-7 justify-center bg-blue-50 rounded text-success",children:e.jsx(h.phone,{width:16,height:16})}),"+",o," ",p]})},p))})]}),e.jsxs("section",{className:"box",children:[e.jsx("div",{className:"box__header",children:e.jsx("h2",{className:"font-medium text-gray-900",children:"Социальные сети"})}),e.jsxs("div",{className:"box__body flex flex-wrap gap-2",children:[((t=a.socialLink)==null?void 0:t.facebook)&&e.jsx(x,{className:"flex shadow-md rounded-full transition-all duration-150 hover:shadow-none",to:a.socialLink.facebook,target:"_blank",children:e.jsx(h.facebook,{width:24,height:24})}),((N=a.socialLink)==null?void 0:N.instagram)&&e.jsx(x,{className:"flex shadow-md rounded-full transition-all duration-150 hover:shadow-none",to:(S=a.socialLink)==null?void 0:S.instagram,target:"_blank",children:e.jsx(h.instagram,{width:24,height:24})}),(($=a.socialLink)==null?void 0:$.telegram)&&e.jsx(x,{className:"flex shadow-md rounded-full transition-all duration-150 hover:shadow-none",to:(L=a.socialLink)==null?void 0:L.telegram,target:"_blank",children:e.jsx(h.telegram,{width:24,height:24})}),((I=a.socialLink)==null?void 0:I.odnoklassniki)&&e.jsx(x,{className:"flex shadow-md rounded-full transition-all duration-150 hover:shadow-none",to:(A=a.socialLink)==null?void 0:A.odnoklassniki,target:"_blank",children:e.jsx(h.odnoklassniki,{width:24,height:24})})]})]})]})]})]})}function ne(){var g,b,j;const _=U(),d=z(),w=i(T),c=i(W),f=i(q),m=i(C),n=i(X),r=i(K),s=(m==null?void 0:m.find(t=>t.id===+(_.id||0)))||null,a=n==null?void 0:n.find(({id:t})=>{var N;return t===((N=s==null?void 0:s.student)==null?void 0:N.gradeId)}),l=n==null?void 0:n.filter(t=>t.teacherId===(s==null?void 0:s.id));return E.useEffect(()=>{w===u.Idle&&d(M()),c===u.Idle&&d(Y()),f===u.Idle&&d(R())},[d,c,f,w]),!s||!m?e.jsx(B,{className:"w-8 h-8 m-2"}):e.jsxs(O,{withSidebar:!0,children:[e.jsxs("section",{className:"box",children:[e.jsx("div",{className:"box__header",children:e.jsx("h2",{className:"title !text-lg",children:"Базовая информация"})}),e.jsxs("div",{className:"relative",children:[e.jsx(v,{className:"box__body",list:{Фамилия:s.surname,Имя:s.name,Отчество:s.patronymic??"-",Позиция:y[s.role],Пол:J[s.sex],"Электронная почта":s.email?e.jsx(x,{className:"text-blue-600",to:`mailto:${s.email}`,children:s.email}):"-","Дата рождения":s.birthDate?H(s.birthDate).format("DD MMMM YYYY"):"-",Адрес:s.address?`${s.address.region!=="За пределами города"?"район ":""}${s.address.region}, ${s.address.physicalAddress}`:"-",Национальность:((g=r==null?void 0:r.find(({id:t})=>t===s.nationalityId))==null?void 0:g.name)||"-",WhatsApp:(b=s.whatsapp)!=null&&b.code&&((j=s.whatsapp)!=null&&j.numbers)?e.jsxs("a",{className:"text-blue-600",href:`https://wa.me/+${s.whatsapp.code}${s.whatsapp.numbers}`,target:"_blank",children:["+",s.whatsapp.code," ",s.whatsapp.numbers]}):"-"}}),e.jsx("div",{className:"absolute top-[1px] right-0 rounded-br-md z-10 min-w-6 h-[calc(100%-1px)] pointer-events-none bg-gradient-to-l from-white to-transparent"})]})]}),e.jsxs("section",{className:"box",children:[e.jsx("header",{className:"box__header",children:e.jsx("h2",{className:"title !text-lg",children:y[s.role]})}),e.jsxs("div",{className:"relative",children:[s.role==="teacher"&&e.jsx(v,{className:"box__body",list:{"Руководитель классов":l&&l.length?e.jsx("div",{className:"flex flex-wrap gap-2",children:l==null?void 0:l.map(t=>`${t.level} ${t.group}`)}):"-"}}),s.role==="student"&&e.jsx(v,{className:"box__body",list:{Класс:a?e.jsxs(x,{className:"text-blue-600",to:G(P.Classes.Show,{id:a.id}),children:[a.level," ",a.group]},a.id):"-"}}),e.jsx("div",{className:"absolute top-[1px] right-0 rounded-br-md z-10 min-w-6 h-[calc(100%-1px)] pointer-events-none bg-gradient-to-l from-white to-transparent"})]})]})]})}export{ne as default};
