const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/users-edit-form-BYnt_8Uv.js","assets/main-DHGA4RMi.js","assets/preload-helper-DPi8upcZ.js","assets/main-D-GEwkhe.css","assets/button-DeS5fEeF.js","assets/icons-BU7Eetv7.js","assets/select-field-DU_85CZz.js","assets/cleanable-DLcL7uGm.js","assets/formik.esm-BercYKuP.js","assets/use-dropdown-CyAQJHyt.js","assets/index.browser-OxPLOBIU.js","assets/text-field-DJsT8N_6.js","assets/index.esm-Cm7nRM_x.js","assets/users-DUqPc0QS.js","assets/nationalities-selector-CEqnt4T8.js","assets/password-field-BbCyYl6q.js","assets/index-Bs9DDYSf.js","assets/users-phone-edit-form-CVwzXQ-0.js","assets/users-social-links-edit-form-D1PuY5jI.js"])))=>i.map(i=>d[i]);
import{r as i,a as $,u as l,g as d,j as e,S as u,c as w,a2 as D,y as A,a3 as I,a0 as E,A as F,t as L,L as h,i as j,v as M,n as O,k as P,m as C}from"./main-DHGA4RMi.js";import{g as U}from"./users-selector-BJBZJU_2.js";import{b as N,S as z}from"./users-DUqPc0QS.js";import{a as T,g as Y}from"./grades-selector-unGdizhG.js";import{u as B}from"./use-dropdown-CyAQJHyt.js";import{B as x}from"./button-DeS5fEeF.js";import{I as o}from"./icons-BU7Eetv7.js";import{a as R,g as V}from"./nationalities-selector-CEqnt4T8.js";import{g as G}from"./professions-selector-CZgXADeW.js";import{_ as v}from"./preload-helper-DPi8upcZ.js";import{C as H}from"./copy-button-zlUQiHYA.js";import{D as _}from"./description-list-CjuqeMDr.js";import{M as k}from"./modal-TzPMe2lU.js";import{T as y}from"./tooltip-BaJAUw5Q.js";function W(){const s=$(),a=l(d),{ref:t,isOpen:n,setIsOpen:r}=B(),[c,m]=i.useState(!1);if(!a)return;const p=async g=>{m(!0);const S=new FormData;S.append("avatar",g.target.files[0]),await s(D({formData:S,id:a.id,onValidationError:b=>A.error(b.message),onFail:b=>A.error(b),onSuccess:()=>r(!1)})),m(!1)},f=async()=>{m(!0),await s(I({id:a.id})),m(!1)};return e.jsxs("div",{ref:t,className:"relative z-10 w-36 mb-2 lg:mb-0",children:[e.jsxs(x,{className:"relative min-w-36 max-w-36 min-h-36 max-h-36 !p-0",variant:"text",onClick:()=>r(!n),children:[e.jsx("img",{className:"block w-full h-full rounded-full object-cover border-[2px] border-white",src:a.avatarThumb||"/images/avatar.png",width:144,height:144,alt:a.name}),c&&e.jsx(u,{className:"absolute w-full h-full"})]}),e.jsx("div",{className:w("absolute top-full left-1/2 w-full border rounded-md py-1 bg-white shadow-sm text-sm min-w-max transform -translate-x-1/2 transition-all duration-150 text-gray-500",n?"visible opacity-100":"invisible opacity-0"),children:e.jsxs("ul",{children:[e.jsx("li",{children:e.jsxs("label",{className:"flex items-center gap-2 w-full h-8 transition-all duration-150 hover:bg-gray-100 px-3 cursor-pointer",children:[e.jsx("input",{className:"sr-only",type:"file",accept:".png, .jpg, .jpeg",onChange:p}),a.avatarThumb?e.jsxs(e.Fragment,{children:[e.jsx(o.edit,{width:14,height:14})," Изменить фото"]}):e.jsxs(e.Fragment,{children:[e.jsx(o.add,{width:14,height:14})," Добавить фото"]})]})}),a.avatarThumb&&a.avatar&&e.jsxs(e.Fragment,{children:[e.jsx("li",{children:e.jsxs("a",{className:"flex w-full gap-2 items-center h-8 transition-all duration-150 hover:bg-gray-100 px-3",href:a.avatar,target:"_blank",children:[e.jsx(o.visibility,{width:14,height:14})," Просмотреть"]})}),e.jsx("li",{children:e.jsxs("button",{className:"flex w-full gap-2 items-center h-8 transition-all duration-150 hover:bg-gray-100 px-3",type:"button",onClick:f,children:[e.jsx(o.delete,{width:14,height:14})," Удалить фото"]})})]})]})})]})}const q=i.memo(W);function J(){const s=l(d),a=l(T),t=a==null?void 0:a.find(({id:n})=>{var r;return n===((r=s==null?void 0:s.student)==null?void 0:r.gradeId)});if(s)return e.jsxs("header",{className:"relative z-10 lg:flex lg:items-top lg:gap-4",children:[e.jsx(q,{}),e.jsxs("div",{className:"lg:grow lg:mt-20",children:[e.jsxs("h1",{className:"title mb-1",children:[s.surname," ",s.name]}),e.jsxs("span",{className:"flex max-w-max text-center bg-blue-200 text-primary rounded-full text-sm py-1 px-2 leading-none",children:[N[s.role]," ",t&&`${t==null?void 0:t.level} ${t.group}`]})]})]})}const K=i.memo(J);function Q(){return e.jsxs("div",{className:"relative",children:[e.jsx("ul",{className:"flex items-center font-medium text-slate-500 overflow-scroll no-scrollbar py-4 pl-2 -ml-2 pr-7",children:e.jsx("li",{children:e.jsx(E,{className:({isActive:s})=>w("flex items-center h-7 px-2 transition-all duration-150 border border-transparent min-w-max",s&&"rounded shadow bg-white border-gray-200"),to:F.Auth.Profile,children:"Профиль"})})}),e.jsx("div",{className:"absolute top-0 right-0 z-10 min-w-6 h-full pointer-events-none bg-gradient-to-l from-gray-100 to-transparent"})]})}const X=i.memo(Q);function Z(){var t;const s=l(d),a=l(R);return((t=a==null?void 0:a.find(({id:n})=>n===(s==null?void 0:s.nationalityId)))==null?void 0:t.name)||"-"}const ee=i.lazy(()=>v(()=>import("./users-edit-form-BYnt_8Uv.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16])));function se(){const s=l(d),[a,t]=i.useState(!1),n=i.useMemo(()=>s?{Фамилия:s.surname,Имя:s.name,Отчество:s.patronymic??"-",Логин:s.login,Пароль:s.password?e.jsx(H,{className:"items-baseline font-normal text-[16px] h-auto !p-0 shadow-none",string:s.password,children:"Скопировать"}):"-",Позиция:N[s.role],Пол:z[s.sex],"Электронная почта":s.email?e.jsx(h,{className:"text-blue-600",to:`mailto:${s.email}`,children:s.email}):"-","Дата рождения":s.birthDate?L(s.birthDate).format("DD MMMM YYYY"):"-",Адрес:s.address?`${s.address.region!=="За пределами города"?"район ":""}${s.address.region}, ${s.address.physicalAddress}`:"-",Национальность:e.jsx(Z,{}),WhatsApp:s.whatsapp?e.jsxs("a",{className:"text-blue-600",href:`https://wa.me/+${s.whatsapp.code}${s.whatsapp.numbers}`,target:"_blank",rel:"noopener noreferrer",children:["+",s.whatsapp.code," ",s.whatsapp.numbers]}):"-"}:{},[s]);if(s)return e.jsxs(e.Fragment,{children:[e.jsxs("section",{className:"box",children:[e.jsxs("header",{className:"box__header",children:[e.jsx("h2",{className:"title md:!text-lg",children:"Базовая информация"}),e.jsxs(x,{variant:"light",onClick:()=>t(!0),children:[e.jsx(o.edit,{width:14,height:14}),e.jsx(y,{label:"Редактировать",position:"left"})]})]}),e.jsxs("div",{className:"relative",children:[e.jsx(_,{className:"box__body",list:n}),e.jsx("div",{className:"absolute top-[1px] right-0 rounded-br-md z-10 min-w-6 h-[calc(100%-1px)] pointer-events-none bg-gradient-to-l from-white to-transparent"})]})]}),a&&e.jsx(k,{isOpen:a,children:e.jsx(i.Suspense,{fallback:e.jsx(u,{className:"w-6 h-6"}),children:e.jsx(ee,{user:s,setIsOpen:t},a.toString())})})]})}const ae=i.memo(se);function te(){var a,t;const s=l(d);if(s)return e.jsxs("section",{className:"box",children:[e.jsxs("div",{className:"box__header flex-col !items-start",children:[e.jsxs(x,{className:"flex items-center gap-2 text-blue-600 leading-none",variant:"default",href:s.email?`mailto:${s.email}`:"",children:[e.jsx("span",{className:"flex items-center justify-center w-7 h-7 rounded bg-blue-50 text-success",children:e.jsx(o.mail,{width:16,height:16})}),s.email??"-"]}),e.jsxs(x,{className:w("flex items-center gap-2 text-blue-600 leading-none",!s.whatsapp&&"pointer-events-none"),variant:"default",href:`https://wa.me/+${(a=s.whatsapp)==null?void 0:a.code}${(t=s.whatsapp)==null?void 0:t.numbers}`,target:"_blank",children:[e.jsx("span",{className:"flex items-center justify-center w-7 h-7 rounded bg-blue-50 text-success",children:e.jsx(o.whatsapp,{width:16,height:16})}),s.whatsapp?`+${s.whatsapp.code} ${s.whatsapp.numbers}`:"-"]})]}),e.jsx(_,{className:"box__body",variant:"detailed",list:{"Дата регистрации":L(s.createdAt).format("DD MMMM YYYY")}})]})}const ie=i.memo(te),ne=i.lazy(()=>v(()=>import("./users-phone-edit-form-CVwzXQ-0.js"),__vite__mapDeps([17,1,2,3,5,4,11,7,8,10,12])));function re(){var n;const s=l(d),[a,t]=i.useState(!1);if(s)return e.jsxs(e.Fragment,{children:[e.jsxs("section",{className:"box",children:[e.jsxs("header",{className:"box__header",children:[e.jsx("h2",{className:"font-medium text-gray-900",children:"Телефонные номера"}),e.jsxs(x,{variant:"light",onClick:()=>t(!0),children:[e.jsx(o.edit,{width:14,height:14}),e.jsx(y,{label:"Редактировать",position:"left"})]})]}),e.jsx("ul",{className:"box__body flex flex-col gap-2",children:(n=s.phoneNumbers)==null?void 0:n.map(({code:r,numbers:c})=>e.jsx("li",{children:e.jsxs(h,{className:"flex items-center gap-2 w-max text-blue-600",to:`tel:+${r}${c}`,children:[e.jsx("span",{className:"flex items-center w-7 h-7 justify-center bg-blue-50 rounded text-success",children:e.jsx(o.phone,{width:16,height:16})}),"+",r," ",c]})},c))})]}),a&&e.jsx(k,{isOpen:a,children:e.jsx(i.Suspense,{fallback:e.jsx(u,{className:"w-6 h-6"}),children:e.jsx(ne,{user:s,setIsOpen:t},a.toString())})})]})}const le=i.memo(re),oe=i.lazy(()=>v(()=>import("./users-social-links-edit-form-D1PuY5jI.js"),__vite__mapDeps([18,1,2,3,4,5,11,7,8,10])));function ce(){var n,r,c,m,p,f,g;const s=l(d),[a,t]=i.useState(!1);if(s)return e.jsxs(e.Fragment,{children:[e.jsxs("section",{className:"box",children:[e.jsxs("header",{className:"box__header",children:[e.jsx("h2",{className:"font-medium text-gray-900",children:"Социальные сети"}),e.jsxs(x,{variant:"light",onClick:()=>t(!0),children:[e.jsx(o.edit,{width:14,height:14}),e.jsx(y,{label:"Редактировать",position:"left"})]})]}),e.jsxs("div",{className:"box__body flex flex-wrap gap-2",children:[((n=s.socialLink)==null?void 0:n.facebook)&&e.jsx(h,{className:"flex shadow-md rounded-full transition-all duration-150 hover:shadow-none",to:s.socialLink.facebook,target:"_blank",children:e.jsx(o.facebook,{width:24,height:24})}),((r=s.socialLink)==null?void 0:r.instagram)&&e.jsx(h,{className:"flex shadow-md rounded-full transition-all duration-150 hover:shadow-none",to:(c=s.socialLink)==null?void 0:c.instagram,target:"_blank",children:e.jsx(o.instagram,{width:24,height:24})}),((m=s.socialLink)==null?void 0:m.telegram)&&e.jsx(h,{className:"flex shadow-md rounded-full transition-all duration-150 hover:shadow-none",to:(p=s.socialLink)==null?void 0:p.telegram,target:"_blank",children:e.jsx(o.telegram,{width:24,height:24})}),((f=s.socialLink)==null?void 0:f.odnoklassniki)&&e.jsx(h,{className:"flex shadow-md rounded-full transition-all duration-150 hover:shadow-none",to:(g=s.socialLink)==null?void 0:g.odnoklassniki,target:"_blank",children:e.jsx(o.odnoklassniki,{width:24,height:24})})]})]}),a&&e.jsx(k,{isOpen:a,children:e.jsx(i.Suspense,{fallback:e.jsx(u,{className:"w-6 h-6"}),children:e.jsx(oe,{user:s,setIsOpen:t},a.toString())})})]})}const de=i.memo(ce);function ye(){const s=$(),a=l(d),t=l(U),n=l(Y),r=l(V),c=l(G);return i.useEffect(()=>{t===j.Idle&&s(M()),n===j.Idle&&s(O()),r===j.Idle&&s(P()),c===j.Idle&&s(C())},[s,n,r,c,t]),a?e.jsxs("main",{className:"pt-4 pb-40",children:[e.jsx(K,{}),e.jsx(X,{}),e.jsxs("div",{className:"flex flex-col gap-4 xl:grid xl:grid-cols-[3fr_1fr]",children:[e.jsxs("div",{className:"flex flex-col gap-4 grow",children:[e.jsx(ae,{}),e.jsxs("section",{className:"box",children:[e.jsx("header",{className:"box__header",children:e.jsx("h2",{className:"title md:!text-lg",children:N[a.role]})}),e.jsxs("div",{className:"relative",children:[e.jsx(_,{className:"box__body",list:{}}),e.jsx("div",{className:"absolute top-[1px] right-0 rounded-br-md z-10 min-w-6 h-[calc(100%-1px)] pointer-events-none bg-gradient-to-l from-white to-transparent"})]})]})]}),e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsx(ie,{}),e.jsx(le,{}),e.jsx(de,{})]})]})]}):e.jsx(u,{className:"w-8 h-8 m-2"})}export{ye as default};
