import{a as p,j as s,ax as u,y as i}from"./main-DyZOqu_f.js";import{B as o}from"./button-CqoFrGdL.js";import{S as l}from"./select-field-CpciObgG.js";import{F as x,a as g}from"./formik.esm-ngpA7fMQ.js";import{c as f,a as j,e as b}from"./index.esm-ChdKR4l3.js";import"./preload-helper-BfFHrpNk.js";import"./icons-B6vILnyY.js";import"./cleanable-DkdZPN_b.js";import"./use-dropdown-ziopbjS6.js";import"./index.browser-OxPLOBIU.js";const h=f().shape({level:b().required("Обязательное поле."),group:j().required("Обязательное поле.")});function B({grades:n,setIsOpen:t}){const c=p(),m={level:1,group:"А"},d=async(a,e)=>{if(e.setSubmitting(!0),n.some(r=>r.level===a.level&&r.group===a.group)){e.setErrors({level:"Выбранный класс уже существует.",group:" "});return}await c(u({dto:a,onSuccess:()=>{i.success("Класс успешно добавлен."),t(!1)},onValidationError:r=>e.setErrors({...r.errors}),onFail:r=>i.success(r)})),e.setSubmitting(!1)};return s.jsx(x,{initialValues:m,validationSchema:h,onSubmit:d,children:({isSubmitting:a})=>s.jsxs(g,{children:[s.jsxs("div",{className:"flex items-center justify-between gap-2 mb-4",children:[s.jsx("h3",{className:"title",children:"Добавления класса"}),s.jsx(o,{className:"ml-auto",type:"reset",variant:"danger",icon:"close",onClick:()=>t(!1),children:s.jsx("span",{className:"sr-only",children:"Отмена"})})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-x-4 mb-4",children:[s.jsx(l,{name:"level",label:"Уровень",options:[1,2,3,4,5,6,7,8,9,10,11].map(e=>({value:e,label:e.toString()}))}),s.jsx(l,{name:"group",label:"Группа",options:["А","Б","В","Г","Д","Е"].map(e=>({value:e,label:e.toString()}))})]}),s.jsx("div",{className:"flex items-center justify-end gap-2 sm:col-span-2",children:s.jsx(o,{className:"justify-center min-w-[92px]",type:"submit",icon:"add",disabled:a,loading:a,variant:"success",children:"Добавить"})})]})})}export{B as default};
