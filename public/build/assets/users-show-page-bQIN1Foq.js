import{r as N,j as e,p as A,L as m,u as D,d as ee,a as y,D as Y,G as se,y as M,E as j,A as x,c as U,S as C,H as ae,I as te,k as P,J as ie,e as B,z as I,h as Q,K as le,B as ne,N as re}from"./main-D1X-5qeh.js";import O from"./not-found-page-Dlt1yDD_.js";import oe from"./users-edit-form-BymtB_qi.js";import{I as c}from"./icons-Cwm3zsc5.js";import{B as f}from"./button-BxcCnYcJ.js";import{C as de}from"./copy-button-C14utq0P.js";import{D as k}from"./description-list-D0pPZU8B.js";import{M as z}from"./modal-COah0HVy.js";import{T}from"./tooltip-BpooByUR.js";import{S as R,b as S}from"./users-DUqPc0QS.js";import{g as E}from"./users-selector-Cpbhop2B.js";import{g as J,a as X}from"./users-B-HnUjQ-.js";import{F as ce,a as he}from"./formik.esm-CEA5_Xoc.js";import me from"./users-phone-edit-form-TKYLjYO5.js";import xe from"./users-social-links-edit-form-Cs9fU1cY.js";import{u as pe}from"./use-dropdown-BjzLPdm1.js";import{g as W}from"./grades-selector-CjDDihwd.js";import{B as ge}from"./breadcrumbs-YnKa2wrI.js";import{g as Z}from"./nationalities-selector-BQnDI0q3.js";import{L as fe}from"./layout-BguUlnse.js";import"./preload-helper-DPi8upcZ.js";import"./select-field-DvwSWDo-.js";import"./cleanable-BYiEZa8s.js";import"./index.browser-OxPLOBIU.js";import"./text-field-D3e8nZd6.js";import"./index.esm-tVQjNZt4.js";import"./password-field-B4XE77qK.js";import"./index-Y5BpZlJY.js";function je({user:a,nationalities:t}){var l,n,o;const[i,s]=N.useState(!1);return e.jsxs(e.Fragment,{children:[e.jsxs("section",{className:"box",children:[e.jsxs("header",{className:"box__header",children:[e.jsx("h2",{className:"title !text-lg",children:"Базовая информация"}),e.jsxs(f,{variant:"light",onClick:()=>s(!0),children:[e.jsx(c.edit,{width:14,height:14}),e.jsx(T,{label:"Редактировать",position:"left"})]})]}),e.jsxs("div",{className:"relative",children:[e.jsx(k,{className:"box__body",list:{Фамилия:a.surname,Имя:a.name,Отчество:a.patronymic??"-",Логин:a.login,Пароль:a.password?e.jsx(de,{className:"items-baseline font-normal text-[16px] h-auto !p-0 shadow-none",string:a.password,children:"Скопировать"}):"",Позиция:S[a.role],Пол:R[a.sex],"Электронная почта":a.email?e.jsx(m,{className:"text-blue-600",to:`mailto:${a.email}`,children:a.email}):"-","Дата рождения":a.birthDate?A(a.birthDate).format("DD MMMM YYYY"):"-",Адрес:a.address?`${a.address.region!=="За пределами города"?"район ":""}${a.address.region}, ${a.address.physicalAddress}`:"-",Национальность:((l=t.find(({id:d})=>d===a.nationalityId))==null?void 0:l.name)||"-",WhatsApp:(n=a.whatsapp)!=null&&n.code&&((o=a.whatsapp)!=null&&o.numbers)?e.jsxs("a",{className:"text-blue-600",href:`https://wa.me/+${a.whatsapp.code}${a.whatsapp.numbers}`,target:"_blank",children:["+",a.whatsapp.code," ",a.whatsapp.numbers]}):"-"}}),e.jsx("div",{className:"absolute top-[1px] right-0 rounded-br-md z-10 min-w-6 h-[calc(100%-1px)] pointer-events-none bg-gradient-to-l from-white to-transparent"})]})]}),e.jsx(z,{isOpen:i,children:e.jsx(oe,{user:a,setIsOpen:s})})]})}function be({user:a,setIsOpen:t}){const i=D(),s=ee(),l=y(E);N.useEffect(()=>{!l.data&&!l.isFetching&&i(Y())},[i,l.data,l.isFetching]);const n=async(o,d)=>{d.setSubmitting(!0),await i(se({id:a.id,onSuccess:()=>{M.success("Пользователь успешно удален."),t(!1),s(j(x.Users.Show,{id:J(l.data||[],a.id)}))},onFail:g=>M.error(g)})),d.setSubmitting(!1)};return e.jsx(ce,{initialValues:{},onSubmit:n,children:({isSubmitting:o})=>e.jsxs(he,{className:"flex flex-col gap-3",children:[e.jsx("p",{children:"Вы уверены что хотите удалить этого пользователья? Все данные связанные с этим пользователем будут удалены."}),e.jsxs("div",{className:"flex items-center justify-end gap-2 mt-2 sm:col-span-2",children:[e.jsx(f,{className:"justify-center min-w-[92px]",type:"submit",disabled:o,loading:o,variant:"success",children:"Удалить"}),e.jsx(f,{type:"reset",onClick:()=>t(!1),variant:"danger",children:"Отмена"})]})]})},a.id)}function ue({user:a}){const[t,i]=N.useState(!1);return e.jsxs(e.Fragment,{children:[e.jsxs(f,{variant:"danger",onClick:()=>i(!0),children:[e.jsx(c.delete,{width:14,height:14}),"Удалить пользователья"]}),e.jsx(z,{isOpen:t,children:e.jsx(be,{user:a,setIsOpen:i})})]})}function we({user:a}){var t,i;return e.jsxs("section",{className:"box",children:[e.jsxs("div",{className:"box__header flex-col !items-start",children:[e.jsxs(f,{className:"flex items-center gap-2 text-blue-600 leading-none",variant:"default",href:a.email?`mailto:${a.email}`:"",children:[e.jsx("span",{className:"flex items-center justify-center w-7 h-7 rounded bg-blue-50 text-success",children:e.jsx(c.mail,{width:16,height:16})}),a.email??"-"]}),e.jsxs(f,{className:U("flex items-center gap-2 text-blue-600 leading-none",!a.whatsapp&&"pointer-events-none"),variant:"default",href:`https://wa.me/+${(t=a.whatsapp)==null?void 0:t.code}${(i=a.whatsapp)==null?void 0:i.numbers}`,target:"_blank",children:[e.jsx("span",{className:"flex items-center justify-center w-7 h-7 rounded bg-blue-50 text-success",children:e.jsx(c.whatsapp,{width:16,height:16})}),a.whatsapp?`+${a.whatsapp.code} ${a.whatsapp.numbers}`:"-"]})]}),e.jsx(k,{className:"box__body",variant:"detailed",list:{"Дата регистрации":A(a.createdAt).format("DD MMMM YYYY")}})]})}function Ne({user:a}){var s;const[t,i]=N.useState(!1);return e.jsxs(e.Fragment,{children:[e.jsxs("section",{className:"box",children:[e.jsxs("header",{className:"box__header",children:[e.jsx("h2",{className:"font-medium text-gray-900",children:"Телефонные номера"}),e.jsxs(f,{variant:"light",onClick:()=>i(!0),children:[e.jsx(c.edit,{width:14,height:14}),e.jsx(T,{label:"Редактировать",position:"left"})]})]}),e.jsx("ul",{className:"box__body flex flex-col gap-2",children:(s=a.phoneNumbers)==null?void 0:s.map(({code:l,numbers:n})=>e.jsx("li",{children:e.jsxs(m,{className:"flex items-center gap-2 w-max text-blue-600",to:`tel:+${l}${n}`,children:[e.jsx("span",{className:"flex items-center w-7 h-7 justify-center bg-blue-50 rounded text-success",children:e.jsx(c.phone,{width:16,height:16})}),"+",l," ",n]})},n))})]}),e.jsx(z,{isOpen:t,children:e.jsx(me,{user:a,setIsOpen:i},JSON.stringify(a))})]})}function ve({users:a,user:t,grades:i,professions:s}){var b,v,w,u,_,$;let l={};const n=i.find(({id:r})=>{var h;return r===((h=t.student)==null?void 0:h.gradeId)}),o=a.find(({id:r})=>{var h;return r===((h=t.student)==null?void 0:h.motherId)}),d=a.find(({id:r})=>{var h;return r===((h=t.student)==null?void 0:h.fatherId)}),g=a.filter(({id:r})=>{var h,L;return(L=(h=t.parent)==null?void 0:h.children)==null?void 0:L.includes(r)});switch(t.role){case"teacher":l={Классы:i.length?e.jsx("div",{className:"flex flex-wrap gap-2",children:i.filter(r=>r.teacherId===t.id).map(r=>e.jsxs(m,{className:"text-blue-600",to:j(x.Classes.Show,{id:r.id}),children:[r.level," ",r.group]}))}):"-"};break;case"student":l={Класс:n?e.jsxs(m,{className:"text-blue-600",to:j(x.Classes.Show,{id:n.id}),children:[n.level," ",n.group]}):"-",Мать:o?e.jsxs(m,{className:"text-blue-600",to:j(x.Users.Show,{id:o.id}),children:[o.name," ",o.surname]}):"-",Отец:d?e.jsxs(m,{className:"text-blue-600",to:j(x.Users.Show,{id:d.id}),children:[d.name," ",d.surname]}):"-","С какого года ребенок обучается в ЧОУ «Империя знаний» :":(b=t.student)!=null&&b.admissionDate?A(t.student.admissionDate).format("DD MMMM YYYY"):"-","Предыдущие школы":((v=t.student)==null?void 0:v.previousSchools)??"-","Медицинские и психологические рекомендации :":((w=t.student)==null?void 0:w.medicalRecommendations)??"-"};break;case"parent":l={Дети:g?g.map(r=>e.jsxs(N.Fragment,{children:[e.jsxs(m,{className:"text-blue-600",to:j(x.Users.Show,{id:r.id}),children:[r.name," ",r.surname]}),e.jsx("br",{})]},r.id)):"-","Сфера деятельности":((u=s.find(({id:r})=>{var h;return((h=t.parent)==null?void 0:h.professionId)===r}))==null?void 0:u.name)??"-","Место работы":((_=t.parent)==null?void 0:_.workplace)??"-",Должность:(($=t.parent)==null?void 0:$.position)??"-"};break}return e.jsxs("section",{className:"box",children:[e.jsx("header",{className:"box__header",children:e.jsx("h2",{className:"title !text-lg",children:S[t.role]})}),e.jsxs("div",{className:"relative",children:[e.jsx(k,{className:"box__body",list:l}),e.jsx("div",{className:"absolute top-[1px] right-0 rounded-br-md z-10 min-w-6 h-[calc(100%-1px)] pointer-events-none bg-gradient-to-l from-white to-transparent"})]})]})}function ye({user:a}){var s,l,n,o,d,g,b;const[t,i]=N.useState(!1);return e.jsxs(e.Fragment,{children:[e.jsxs("section",{className:"box",children:[e.jsxs("header",{className:"box__header",children:[e.jsx("h2",{className:"font-medium text-gray-900",children:"Социальные сети"}),e.jsxs(f,{variant:"light",onClick:()=>i(!0),children:[e.jsx(c.edit,{width:14,height:14}),e.jsx(T,{label:"Редактировать",position:"left"})]})]}),e.jsxs("div",{className:"box__body flex flex-wrap gap-2",children:[((s=a.socialLink)==null?void 0:s.facebook)&&e.jsx(m,{className:"flex shadow-md rounded-full transition-all duration-150 hover:shadow-none",to:a.socialLink.facebook,target:"_blank",children:e.jsx(c.facebook,{width:24,height:24})}),((l=a.socialLink)==null?void 0:l.instagram)&&e.jsx(m,{className:"flex shadow-md rounded-full transition-all duration-150 hover:shadow-none",to:(n=a.socialLink)==null?void 0:n.instagram,target:"_blank",children:e.jsx(c.instagram,{width:24,height:24})}),((o=a.socialLink)==null?void 0:o.telegram)&&e.jsx(m,{className:"flex shadow-md rounded-full transition-all duration-150 hover:shadow-none",to:(d=a.socialLink)==null?void 0:d.telegram,target:"_blank",children:e.jsx(c.telegram,{width:24,height:24})}),((g=a.socialLink)==null?void 0:g.odnoklassniki)&&e.jsx(m,{className:"flex shadow-md rounded-full transition-all duration-150 hover:shadow-none",to:(b=a.socialLink)==null?void 0:b.odnoklassniki,target:"_blank",children:e.jsx(c.odnoklassniki,{width:24,height:24})})]})]}),e.jsx(z,{isOpen:t,children:e.jsx(xe,{user:a,setIsOpen:i},JSON.stringify(a))})]})}function ke({className:a,user:t}){const i=D(),{ref:s,isOpen:l,setIsOpen:n}=pe(),[o,d]=N.useState(!1),g=async v=>{d(!0);const w=new FormData;w.append("avatar",v.target.files[0]),await i(ae({formData:w,id:t.id,onValidationError:u=>M.error(u.message),onFail:u=>M.error(u),onSuccess:()=>n(!1)})),d(!1)},b=async()=>{d(!0),await i(te({id:t.id})),d(!1)};return e.jsxs("div",{ref:s,className:U("relative z-10 w-36",a),children:[e.jsxs(f,{className:"relative min-w-36 max-w-36 min-h-36 max-h-36 !p-0",variant:"text",onClick:()=>n(!l),children:[e.jsx("img",{className:"block w-full h-full rounded-full object-cover border-[2px] border-white",src:t.avatarThumb||"/images/avatar.png",width:144,height:144,alt:t.name}),o&&e.jsx(C,{className:"absolute w-full h-full"})]}),e.jsx("div",{className:U("absolute top-full left-1/2 w-full border rounded-md py-1 bg-white shadow-sm text-sm min-w-max transform -translate-x-1/2 transition-all duration-150 text-gray-500",l?"visible opacity-100":"invisible opacity-0"),children:e.jsxs("ul",{children:[e.jsx("li",{children:e.jsxs("label",{className:"flex items-center gap-2 w-full h-8 transition-all duration-150 hover:bg-gray-100 px-3 cursor-pointer",children:[e.jsx("input",{className:"sr-only",type:"file",accept:".png, .jpg, .jpeg",onChange:g}),t.avatarThumb?e.jsxs(e.Fragment,{children:[e.jsx(c.edit,{width:14,height:14})," Изменить фото"]}):e.jsxs(e.Fragment,{children:[e.jsx(c.add,{width:14,height:14})," Добавить фото"]})]})}),t.avatarThumb&&t.avatar&&e.jsxs(e.Fragment,{children:[e.jsx("li",{children:e.jsxs("a",{className:"flex w-full gap-2 items-center h-8 transition-all duration-150 hover:bg-gray-100 px-3",href:t.avatar,target:"_blank",children:[e.jsx(c.visibility,{width:14,height:14})," Просмотреть"]})}),e.jsx("li",{children:e.jsxs("button",{className:"flex w-full gap-2 items-center h-8 transition-all duration-150 hover:bg-gray-100 px-3",type:"button",onClick:b,children:[e.jsx(c.delete,{width:14,height:14})," Удалить фото"]})})]})]})})]})}function _e({users:a,user:t}){var n;const i=D(),s=y(W),l=(n=s.data)==null?void 0:n.find(({id:o})=>{var d;return o===((d=t.student)==null?void 0:d.gradeId)});return N.useEffect(()=>{!s.data&&!s.isFetching&&i(P())},[i,s.data,s.isFetching]),e.jsxs("header",{className:"relative z-10 lg:flex lg:items-top lg:gap-4",children:[e.jsx(ke,{className:"mb-2 lg:mb-0",user:t}),e.jsxs("div",{className:"lg:grow lg:mt-20",children:[e.jsxs("h1",{className:"title mb-1",children:[t.surname," ",t.name]}),e.jsxs("span",{className:"flex max-w-max text-center bg-blue-200 text-primary rounded-full text-sm py-1 px-2 leading-none",children:[S[t.role]," ",l&&`${l==null?void 0:l.level} ${l.group}`]})]}),e.jsxs("div",{className:"absolute top-28 right-0 z-10 flex items-center gap-1 lg:static lg:top-0 lg:items-start lg:mt-20",children:[e.jsxs(f,{variant:"light",href:j(x.Users.Show,{id:X(a,t.id)}),children:[e.jsx(c.previous,{width:14,height:14}),e.jsx("span",{className:"sr-only md:not-sr-only",children:"Предыдущий"})]}),e.jsxs(f,{variant:"light",href:j(x.Users.Show,{id:J(a,t.id)}),children:[e.jsx("span",{className:"sr-only md:not-sr-only",children:"Следующий"}),e.jsx(c.next,{width:14,height:14})]})]})]})}function $e({user:a}){const{pathname:t}=ie();return e.jsxs("div",{className:"relative",children:[e.jsx("ul",{className:"flex items-center font-medium text-slate-500 overflow-scroll no-scrollbar py-4 pl-2 -ml-2 pr-7",children:e.jsx("li",{children:e.jsx(m,{className:U("flex items-center h-7 px-2 transition-all duration-150 border border-transparent min-w-max",(x.Auth.Profile===t||j(x.Users.Show,{id:a.id})===t)&&"rounded shadow bg-white border-gray-200"),to:j(x.Users.Show,{id:a.id}),children:"Профиль"})})}),e.jsx("div",{className:"absolute top-0 right-0 z-10 min-w-6 h-full pointer-events-none bg-gradient-to-l from-gray-100 to-transparent"})]})}function Se(){var l;const a=D(),t=B(),i=y(E),s=((l=i.data)==null?void 0:l.find(n=>n.id===+(t.id||0)))||null;return N.useEffect(()=>{!s&&t.id&&!i.isFetching&&a(Y())},[s,t.id,a,i.isFetching]),!s||!i.data?e.jsx(I,{children:e.jsx(C,{className:"w-8 h-8 m-2"})}):e.jsx(I,{children:e.jsxs("main",{className:"pt-4 pb-40",children:[e.jsx(ge,{className:"mb-4",items:[["Справочник пользователей",x.Users.Index],[`${s.name} ${s.surname}`,""]]}),e.jsx(_e,{users:i.data,user:s}),e.jsx($e,{user:s}),e.jsxs("div",{className:"flex flex-col gap-4 xl:grid xl:grid-cols-[3fr_1fr]",children:[e.jsxs("div",{className:"flex flex-col gap-4 grow",children:[e.jsx(je,{user:s}),e.jsx(ve,{users:i.data,user:s})]}),e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsx(we,{user:s}),e.jsx(Ne,{user:s}),e.jsx(ye,{user:s}),e.jsx("div",{className:"ml-auto",children:e.jsx(ue,{user:s})})]})]})]})})}function Fe(){var d,g,b,v,w,u,_,$,r,h,L,G,H,V,K,q;const a=D(),t=B(),i=y(E),s=((d=i.data)==null?void 0:d.find(p=>p.id===+(t.id||0)))||null,l=y(W),n=(g=l.data)==null?void 0:g.find(({id:p})=>{var F;return p===((F=s==null?void 0:s.student)==null?void 0:F.gradeId)}),o=y(Z);return N.useEffect(()=>{!s&&t.id&&!i.isFetching&&a(Y()),!l.data&&!l.isFetching&&a(P()),!o.data&&!o.isFetching&&a(Q())},[s,t.id,a,i.isFetching,l.data,l.isFetching,o.data,o.isFetching]),!s||!i.data?e.jsx(I,{children:e.jsx(C,{className:"w-8 h-8 m-2"})}):e.jsx(I,{children:e.jsxs("main",{className:"pt-4 pb-40",children:[e.jsxs("header",{className:"relative z-10 lg:flex lg:items-top lg:gap-4",children:[e.jsx("div",{className:"relative min-w-36 max-w-36 min-h-36 max-h-36 !p-0 mb-2 lg:mb-0",children:e.jsx("img",{className:"block w-full h-full rounded-full object-cover border-[2px] border-white",src:s.avatarThumb||"/images/avatar.png",width:144,height:144,alt:s.name})}),e.jsxs("div",{className:"lg:grow lg:mt-20",children:[e.jsxs("h1",{className:"title mb-1",children:[s.surname," ",s.name]}),e.jsxs("span",{className:"flex max-w-max text-center bg-blue-200 text-primary rounded-full text-sm py-1 px-2 leading-none",children:[S[s.role]," ",n&&`${n==null?void 0:n.level} ${n.group}`]})]}),e.jsxs("div",{className:"absolute top-28 right-0 z-10 flex items-center gap-1 lg:static lg:top-0 lg:items-start lg:mt-20",children:[e.jsxs(f,{variant:"light",href:j(x.Users.Show,{id:X(i.data,s.id)}),children:[e.jsx(c.previous,{width:14,height:14}),e.jsx("span",{className:"sr-only md:not-sr-only",children:"Предыдущий"})]}),e.jsxs(f,{variant:"light",href:j(x.Users.Show,{id:J(i.data,s.id)}),children:[e.jsx("span",{className:"sr-only md:not-sr-only",children:"Следующий"}),e.jsx(c.next,{width:14,height:14})]})]})]}),e.jsxs("div",{className:"relative",children:[e.jsx("ul",{className:"flex items-center font-medium text-slate-500 overflow-scroll no-scrollbar py-4 pl-2 -ml-2 pr-7",children:e.jsx("li",{children:e.jsx(le,{className:({isActive:p})=>U("flex items-center h-7 px-2 transition-all duration-150 border border-transparent min-w-max",p&&"rounded shadow bg-white border-gray-200"),to:j(x.Users.Show,{id:s.id}),children:"Профиль"})})}),e.jsx("div",{className:"absolute top-0 right-0 z-10 min-w-6 h-full pointer-events-none bg-gradient-to-l from-gray-100 to-transparent"})]}),e.jsxs("div",{className:"flex flex-col gap-4 xl:grid xl:grid-cols-[3fr_1fr]",children:[e.jsxs("div",{className:"flex flex-col gap-4 grow",children:[e.jsxs("section",{className:"box",children:[e.jsx("div",{className:"box__header",children:e.jsx("h2",{className:"title !text-lg",children:"Базовая информация"})}),e.jsxs("div",{className:"relative",children:[e.jsx(k,{className:"box__body",list:{Фамилия:s.surname,Имя:s.name,Отчество:s.patronymic??"-",Позиция:S[s.role],Пол:R[s.sex],"Электронная почта":s.email?e.jsx(m,{className:"text-blue-600",to:`mailto:${s.email}`,children:s.email}):"-","Дата рождения":s.birthDate?A(s.birthDate).format("DD MMMM YYYY"):"-",Адрес:s.address?`${s.address.region!=="За пределами города"?"район ":""}${s.address.region}, ${s.address.physicalAddress}`:"-",Национальность:((v=(b=o.data)==null?void 0:b.find(({id:p})=>p===s.nationalityId))==null?void 0:v.name)||"-",WhatsApp:(w=s.whatsapp)!=null&&w.code&&((u=s.whatsapp)!=null&&u.numbers)?e.jsxs("a",{className:"text-blue-600",href:`https://wa.me/+${s.whatsapp.code}${s.whatsapp.numbers}`,target:"_blank",children:["+",s.whatsapp.code," ",s.whatsapp.numbers]}):"-"}}),e.jsx("div",{className:"absolute top-[1px] right-0 rounded-br-md z-10 min-w-6 h-[calc(100%-1px)] pointer-events-none bg-gradient-to-l from-white to-transparent"})]})]}),e.jsxs("section",{className:"box",children:[e.jsx("header",{className:"box__header",children:e.jsx("h2",{className:"title !text-lg",children:S[s.role]})}),e.jsxs("div",{className:"relative",children:[e.jsx(k,{className:"box__body",list:{"Руководитель классов":l.data?e.jsx("div",{className:"flex flex-wrap gap-2",children:l.data.filter(p=>p.teacherId===s.id).map(p=>e.jsxs(m,{className:"text-blue-600",to:j(x.Classes.Show,{id:p.id}),children:[p.level," ",p.group]}))}):"-"}}),e.jsx("div",{className:"absolute top-[1px] right-0 rounded-br-md z-10 min-w-6 h-[calc(100%-1px)] pointer-events-none bg-gradient-to-l from-white to-transparent"})]})]})]}),e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs("section",{className:"box",children:[e.jsxs("div",{className:"box__header flex-col !items-start",children:[e.jsxs(f,{className:"flex items-center gap-2 text-blue-600 leading-none",variant:"default",href:s.email?`mailto:${s.email}`:"",children:[e.jsx("span",{className:"flex items-center justify-center w-7 h-7 rounded bg-blue-50 text-success",children:e.jsx(c.mail,{width:16,height:16})}),s.email??"-"]}),e.jsxs(f,{className:U("flex items-center gap-2 text-blue-600 leading-none",!s.whatsapp&&"pointer-events-none"),variant:"default",href:`https://wa.me/+${(_=s.whatsapp)==null?void 0:_.code}${($=s.whatsapp)==null?void 0:$.numbers}`,target:"_blank",children:[e.jsx("span",{className:"flex items-center justify-center w-7 h-7 rounded bg-blue-50 text-success",children:e.jsx(c.whatsapp,{width:16,height:16})}),s.whatsapp?`+${s.whatsapp.code} ${s.whatsapp.numbers}`:"-"]})]}),e.jsx(k,{className:"box__body",variant:"detailed",list:{}})]}),e.jsxs("section",{className:"box",children:[e.jsx("div",{className:"box__header",children:e.jsx("h2",{className:"font-medium text-gray-900",children:"Телефонные номера"})}),e.jsx("ul",{className:"box__body flex flex-col gap-2",children:(r=s.phoneNumbers)==null?void 0:r.map(({code:p,numbers:F})=>e.jsx("li",{children:e.jsxs(m,{className:"flex items-center gap-2 w-max text-blue-600",to:`tel:+${p}${F}`,children:[e.jsx("span",{className:"flex items-center w-7 h-7 justify-center bg-blue-50 rounded text-success",children:e.jsx(c.phone,{width:16,height:16})}),"+",p," ",F]})},F))})]}),e.jsxs("section",{className:"box",children:[e.jsx("div",{className:"box__header",children:e.jsx("h2",{className:"font-medium text-gray-900",children:"Социальные сети"})}),e.jsxs("div",{className:"box__body flex flex-wrap gap-2",children:[((h=s.socialLink)==null?void 0:h.facebook)&&e.jsx(m,{className:"flex shadow-md rounded-full transition-all duration-150 hover:shadow-none",to:s.socialLink.facebook,target:"_blank",children:e.jsx(c.facebook,{width:24,height:24})}),((L=s.socialLink)==null?void 0:L.instagram)&&e.jsx(m,{className:"flex shadow-md rounded-full transition-all duration-150 hover:shadow-none",to:(G=s.socialLink)==null?void 0:G.instagram,target:"_blank",children:e.jsx(c.instagram,{width:24,height:24})}),((H=s.socialLink)==null?void 0:H.telegram)&&e.jsx(m,{className:"flex shadow-md rounded-full transition-all duration-150 hover:shadow-none",to:(V=s.socialLink)==null?void 0:V.telegram,target:"_blank",children:e.jsx(c.telegram,{width:24,height:24})}),((K=s.socialLink)==null?void 0:K.odnoklassniki)&&e.jsx(m,{className:"flex shadow-md rounded-full transition-all duration-150 hover:shadow-none",to:(q=s.socialLink)==null?void 0:q.odnoklassniki,target:"_blank",children:e.jsx(c.odnoklassniki,{width:24,height:24})})]})]})]})]})]})})}function Ue(){var g,b,v,w,u,_,$;const a=D(),t=B(),i=y(E),s=((g=i.data)==null?void 0:g.find(r=>r.id===+(t.id||0)))||null,l=y(W),n=(b=l.data)==null?void 0:b.find(({id:r})=>{var h;return r===((h=s==null?void 0:s.student)==null?void 0:h.gradeId)}),o=y(Z),d=(v=l.data)==null?void 0:v.filter(r=>r.teacherId===(s==null?void 0:s.id));return N.useEffect(()=>{!s&&t.id&&!i.isFetching&&a(Y()),!l.data&&!l.isFetching&&a(P()),!o.data&&!o.isFetching&&a(Q())},[s,t.id,a,i.isFetching,l.data,l.isFetching,o.data,o.isFetching]),!s||!i.data?e.jsx(I,{children:e.jsx(C,{className:"w-8 h-8 m-2"})}):e.jsxs(fe,{withSidebar:!0,children:[e.jsxs("section",{className:"box",children:[e.jsx("div",{className:"box__header",children:e.jsx("h2",{className:"title !text-lg",children:"Базовая информация"})}),e.jsxs("div",{className:"relative",children:[e.jsx(k,{className:"box__body",list:{Фамилия:s.surname,Имя:s.name,Отчество:s.patronymic??"-",Позиция:S[s.role],Пол:R[s.sex],"Электронная почта":s.email?e.jsx(m,{className:"text-blue-600",to:`mailto:${s.email}`,children:s.email}):"-","Дата рождения":s.birthDate?A(s.birthDate).format("DD MMMM YYYY"):"-",Адрес:s.address?`${s.address.region!=="За пределами города"?"район ":""}${s.address.region}, ${s.address.physicalAddress}`:"-",Национальность:((u=(w=o.data)==null?void 0:w.find(({id:r})=>r===s.nationalityId))==null?void 0:u.name)||"-",WhatsApp:(_=s.whatsapp)!=null&&_.code&&(($=s.whatsapp)!=null&&$.numbers)?e.jsxs("a",{className:"text-blue-600",href:`https://wa.me/+${s.whatsapp.code}${s.whatsapp.numbers}`,target:"_blank",children:["+",s.whatsapp.code," ",s.whatsapp.numbers]}):"-"}}),e.jsx("div",{className:"absolute top-[1px] right-0 rounded-br-md z-10 min-w-6 h-[calc(100%-1px)] pointer-events-none bg-gradient-to-l from-white to-transparent"})]})]}),e.jsxs("section",{className:"box",children:[e.jsx("header",{className:"box__header",children:e.jsx("h2",{className:"title !text-lg",children:S[s.role]})}),e.jsxs("div",{className:"relative",children:[s.role==="teacher"&&e.jsx(k,{className:"box__body",list:{"Руководитель классов":d&&d.length?e.jsx("div",{className:"flex flex-wrap gap-2",children:d==null?void 0:d.map(r=>`${r.level} ${r.group}`)}):"-"}}),s.role==="student"&&e.jsx(k,{className:"box__body",list:{Класс:n?`${n.level} ${n.group}`:"-"}}),e.jsx("div",{className:"absolute top-[1px] right-0 rounded-br-md z-10 min-w-6 h-[calc(100%-1px)] pointer-events-none bg-gradient-to-l from-white to-transparent"})]})]})]})}const De={superadmin:()=>e.jsx(Se,{}),admin:()=>e.jsx(O,{}),director:()=>e.jsx(O,{}),teacher:()=>e.jsx(O,{}),parent:()=>e.jsx(Ue,{}),student:()=>e.jsx(Fe,{})};function ls(){const a=y(ne);return a?De[a.role]():e.jsx(re,{to:x.Auth.Login})}export{ls as default};
