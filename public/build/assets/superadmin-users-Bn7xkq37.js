import{j as s,c as S,r as L,a as ee,u as z,i as P,v as se,n as ae,k as te,m as ne,t as _,L as H,X as W,A as U,S as le,ag as ie,y as re}from"./main-yWuhb5Gt.js";import{g as oe,a as de}from"./users-selector-D5J-7fb-.js";import{I as y}from"./icons-CK1IQmfH.js";import{S as V,a as ce,b as X,R as me}from"./users-DUqPc0QS.js";import{g as ue,a as ge}from"./grades-selector-B6pCE8aG.js";import{L as he,C as fe,S as T}from"./select-field-CQbuiaD9.js";import{n as xe}from"./index.browser-OxPLOBIU.js";import{e as pe,f as be}from"./users-DVSb9rHt.js";import{B as K}from"./button-BKPH64SX.js";import{g as je,a as ye}from"./nationalities-selector-DGp9RYBS.js";import{g as Ne,a as ve}from"./professions-selector-9VNGCm2J.js";import{C as we}from"./copy-button-B1G_5agl.js";import{u as J}from"./use-dropdown-D2SgKNhE.js";import{f as Y,u as Ce,g as ke,a as Se,b as Ie,c as Fe}from"./index-bMPnDbnu.js";import"./preload-helper-BfFHrpNk.js";import"./FileSaver.min-P9aWVRN6.js";function Ae({className:l,...b}){return s.jsx("input",{...b,className:S("flex grow bg-gray-50 min-w-0 border border-gray-200 rounded h-8 px-4 leading-none text-base focus:outline-none hover:bg-gray-100 focus:border-primary focus:bg-gray-100",l)})}function ze({element:l}){if(l)return s.jsx("div",{className:"absolute right-[1px] top-[1px] rounded-r-[3px] transform w-[30px] h-[30px] flex justify-center items-center",children:l})}function De({element:l}){if(l)return s.jsx("div",{className:"absolute left-[1px] top-[1px] rounded-r-[3px] transform w-[30px] h-[30px] flex justify-center items-center",children:l})}function D({className:l,label:b,value:N,onChange:w,required:C,before:v,after:h,...g}){const m=xe();return s.jsxs("div",{className:S(l,"flex flex-col"),children:[s.jsx(he,{required:C,label:b,htmlFor:m}),s.jsxs("div",{className:"relative flex",children:[s.jsx(De,{element:v}),s.jsx(Ae,{className:S(h?"pr-16":"pr-8",v&&"pl-8"),id:m,value:N,...g,onChange:i=>w&&w(i.target.value)}),N&&s.jsx(fe,{className:S("absolute top-1/2",h?"right-8":"right-0"),onClean:()=>w&&w("")}),s.jsx(ze,{element:h})]})]})}function $e({header:l,columnPinning:b,setColumnPinning:N,setColumnVisibility:w}){var i,o,I,M,$,R,e,a;const{ref:C,isOpen:v,setIsOpen:h,menuRef:g}=J(),m=async()=>{if(C.current&&g.current){await h(!v);const t=C.current.getBoundingClientRect();g.current.style.top=`${t.top+t.height+12}px`,g.current.style.left=`${t.left+t.width}px`;const n=g.current.getBoundingClientRect();n.right>window.innerWidth&&(g.current.style.transform=`translateX(-${n.right-window.innerWidth+32}px)`)}};return s.jsxs("div",{ref:C,className:"relative ml-auto column-filter",children:[s.jsx("button",{className:S("flex justify-center items-center min-w-6 min-h-6 rounded-full bg-gray-100 hover:bg-gray-200",(i=b.left)!=null&&i.includes(l.column.id)||(o=b.right)!=null&&o.includes(l.column.id)||l.column.getCanFilter()?"flex text-error":"md:hidden group-hover:flex"),onClick:m,children:s.jsx(y.moreVert,{width:3})}),s.jsxs("div",{ref:g,className:S("fixed top-full z-30 min-w-max flex-col py-1 bg-white rounded border shadow transform font-normal",v?"flex":"hidden"),onClick:t=>!t.target.closest(".column-filter-header")&&h(!1),children:[s.jsxs("div",{className:"flex flex-col column-filter-header px-3 py-1",children:[s.jsx("h3",{className:"text-sm leading-none text-gray-400 mb-1",children:Y(l.column.columnDef.header,l.getContext())}),(M=(I=l.column.columnDef.meta)==null?void 0:I.renderFilter)==null?void 0:M.call(I,l.column,h)]}),s.jsx("hr",{className:"my-1"}),!(($=b.left)!=null&&$.includes(l.column.id))&&s.jsxs("button",{className:"flex items-center gap-2 pl-3 pr-4 py-1 transition-all duration-150 hover:bg-gray-100",type:"button",onClick:()=>N(t=>{var n;return{left:t.left&&(t.left.includes(l.column.id)?[...t.left]:[...t.left,l.column.id]),right:(n=t.right)==null?void 0:n.filter(d=>d!==l.column.id)}}),children:[s.jsx("span",{className:"flex items-center justify-center w-4 h-4",children:s.jsx(y.keep,{className:"transform rotate-[30deg]",width:10})}),"Закрепить слева"]}),!((R=b.right)!=null&&R.includes(l.column.id))&&s.jsxs("button",{className:"flex items-center gap-2 pl-3 pr-4 py-1 transition-all duration-150 hover:bg-gray-100",type:"button",onClick:()=>N(t=>{var n;return{left:(n=t.left)==null?void 0:n.filter(d=>d!==l.column.id),right:t.right&&(t.right.includes(l.column.id)?[...t.right]:[...t.right,l.column.id])}}),children:[s.jsx("span",{className:"flex items-center justify-center w-4 h-4",children:s.jsx(y.keep,{className:"transform -rotate-[30deg]",width:10})}),"Закрепить справа"]}),(((e=b.right)==null?void 0:e.includes(l.column.id))||((a=b.left)==null?void 0:a.includes(l.column.id)))&&s.jsxs("button",{className:"flex items-center gap-2 pl-3 pr-4 py-1 transition-all duration-150 hover:bg-gray-100",type:"button",onClick:()=>N(t=>{var n,d;return{left:(n=t.left)==null?void 0:n.filter(u=>u!==l.column.id),right:(d=t.right)==null?void 0:d.filter(u=>u!==l.column.id)}}),children:[s.jsx("span",{className:"flex items-center justify-center w-4 h-4",children:s.jsx(y.keep,{className:"opacity-0",width:10})}),"Открепить"]}),s.jsx("hr",{className:"my-1"}),s.jsxs("button",{className:"flex items-center gap-2 pl-3 pr-4 py-1 transition-all duration-150 hover:bg-gray-100",type:"button",onClick:()=>w(t=>({...t,[l.column.id]:!1})),children:[s.jsx("span",{className:"flex items-center justify-center w-4 h-4",children:s.jsx(y.visibilityOff,{width:16})}),"Скрыть столбец"]})]})]})}function Re({table:l,columnVisibility:b,setColumnVisibility:N}){const{ref:w,isOpen:C,setIsOpen:v}=J(),h=l.getAllColumns().map(m=>({id:m.columnDef.id,header:m.columnDef.header})),g=m=>i=>{i.target.checked?N(o=>({...o,[m]:!0})):N(o=>({...o,[m]:!1}))};return s.jsxs("div",{ref:w,className:"relative z-30",children:[s.jsxs("button",{className:"flex items-center gap-2 h-7 px-1 text-blue-700",type:"button",onClick:()=>v(!C),children:[s.jsx(y.viewColumn,{width:16}),s.jsx("span",{className:"sr-only md:not-sr-only",children:"Столбцы"})]}),s.jsx("div",{className:S("absolute left-0 top-full bg-white py-1 border rounded shadow max-h-[240px] overflow-y-auto overflow-x-hidden styled-scrollbar",C?"visible opacity-100":"invisible opacity-0"),children:h.map(m=>s.jsxs("label",{className:"flex items-center gap-2 min-w-max pl-3 pr-5 h-8 transition-all duration-150 hover:bg-gray-100 cursor-pointer",children:[s.jsx("input",{type:"checkbox",onChange:g(m.id),checked:b[m.id]===void 0?!0:b[m.id]}),m.header]},m.id))})]})}const Le=16,Me=[],Te={},Ee={left:[],right:[]};function Pe({data:l,columns:b,pageSize:N=Le,sortingState:w=Me,visibilityState:C=Te,columnPinningState:v=Ee,actions:h,onExport:g,searchValue:m,onSearchInput:i}){const[o,I]=L.useState(""),[M,$]=L.useState({pageIndex:0,pageSize:N}),[R,e]=L.useState(w),[a,t]=L.useState(C),[n,d]=L.useState(v),u=Ce({data:l,columns:b,defaultColumn:{maxSize:Number.MAX_SAFE_INTEGER,sortDescFirst:!1,enableSorting:!0,enableColumnFilter:!1},getCoreRowModel:Fe(),getSortedRowModel:Ie(),getFilteredRowModel:Se(),getPaginationRowModel:ke(),state:{sorting:R,globalFilter:o,columnVisibility:a,pagination:M,columnPinning:n},onSortingChange:e,onGlobalFilterChange:I,onColumnVisibilityChange:t,onPaginationChange:$,onColumnPinningChange:d}),p=u.getPageCount(),x=u.getState().pagination.pageIndex+1,q=()=>{const c=[];if(p<=7)for(let f=1;f<=p;f++)c.push(f);else{c.push(1),x>4&&c.push("...");const f=Math.max(2,x-2),j=Math.min(p-1,x+2);for(let k=f;k<=j;k++)c.push(k);x<p-3&&c.push("..."),c.push(p)}return c},B=u.getHeaderGroups()[0].headers.map(c=>({id:c.column.id,size:c.getSize()})),G=c=>{if(n.left){const r=n.left.findIndex(j=>j===c);return r&&r<0?{}:{left:`${n.left.reduce((j,k,F)=>{var A;return F<r&&(j+=((A=B.find(E=>E.id===k))==null?void 0:A.size)||0),j},0)}px`}}return{}},O=c=>{if(n.right){const r=n.right.findIndex(j=>j===c);return r&&r<0?{}:{right:`${n.right.reduce((j,k,F)=>{var A;return F<r&&(j+=((A=B.find(E=>E.id===k))==null?void 0:A.size)||0),j},0)}px`}}return{}},Z=c=>{const r=y[c==="desc"?"arrowDownwardAlt":"arrowUpwardAlt"];return s.jsx("span",{className:S("flex justify-center items-center min-w-6 min-h-6 rounded-full hover:bg-black/5",!c&&"hidden opacity-40 group-hover:flex"),children:s.jsx(r,{width:10})})},Q=c=>{i?i(c):I(c.target.value)};return s.jsxs("div",{className:"flex flex-col rounded-md shadow border bg-white overflow-scroll max-h-[calc(100vh-42px)] styled-scrollbar text-sm md:text-[16px] md:max-h-[calc(100vh-48px)]",children:[s.jsxs("div",{className:"sticky left-0 z-50 flex gap-2 p-1 border-b w-full",children:[s.jsx(Re,{table:u,columnVisibility:a,setColumnVisibility:t}),s.jsxs("label",{className:"flex grow items-center gap-1 h-7 cursor-pointer text-blue-700",children:[s.jsx(y.search,{width:14}),s.jsx("input",{className:"flex cursor-pointer focus:cursor-auto grow min-w-none w-full focus:outline-none placeholder:text-inherit focus:placeholder:font-normal focus:placeholder:text-gray-400",type:"search",placeholder:"Искать",value:m||o,onInput:Q})]}),s.jsxs("div",{className:"flex gap-1",children:[g&&s.jsx(K,{className:"max-h-7",icon:"fileExport",variant:"light",onClick:()=>g(l,a),children:s.jsx("span",{className:"sr-only md:not-sr-only",children:"Экспорт"})}),h]})]}),s.jsx("div",{className:"sticky top-0 z-40 shadow min-w-max",children:u.getHeaderGroups().map(c=>s.jsxs("div",{className:"flex font-semibold min-h-7",children:[s.jsx("div",{className:"flex items-center justify-center px-1 min-w-8 max-w-8 bg-gray-100 md:px-2 md:min-w-10 md:max-w-10",children:"№"}),c.headers.map(r=>{var f,j,k,F,A;return s.jsxs("div",{className:S("flex items-center text-start bg-gray-100 cursor-pointer group border-gray-200 px-1 md:px-2",((f=n.left)==null?void 0:f.includes(r.column.id))&&"sticky z-10 border-r",((j=n.right)==null?void 0:j.includes(r.column.id))&&"sticky z-10 border-l",(k=r.column.columnDef.meta)==null?void 0:k.columnClass),onClick:E=>!E.target.closest(".column-filter")&&r.column.toggleSorting(),style:{minWidth:`${r.getSize()}px`,width:`${r.getSize()}px`,maxWidth:`${r.getSize()}px`,...G(r.column.id),...O(r.column.id)},children:[(F=r.column.columnDef.meta)!=null&&F.renderHeader?(A=r.column.columnDef.meta)==null?void 0:A.renderHeader(r.column):s.jsx("span",{className:"text-start truncate select-none",children:Y(r.column.columnDef.header,r.getContext())}),r.column.getCanSort()&&Z(r.column.getIsSorted()),s.jsx($e,{header:r,columnPinning:n,setColumnPinning:d,setColumnVisibility:t})]},r.id)})]},c.id))}),s.jsx("div",{className:"min-w-max",children:u.getRowModel().rows.map((c,r)=>s.jsxs("div",{className:S("flex",r%2?"bg-gray-50":"bg-white"),children:[s.jsxs("div",{className:S("flex items-center justify-end p-1 min-w-8 max-w-8 md:p-2 md:min-w-10 md:max-w-10",r%2?"bg-gray-50":"bg-white"),children:[(x-1)*N+r+1,"."]}),c.getVisibleCells().map(f=>{var j,k,F;return s.jsx("div",{className:S("flex items-center p-1 md:p-2",r%2?"bg-gray-50":"bg-white",((j=n.left)==null?void 0:j.includes(f.column.id))&&"sticky left-0 z-10 border-r",((k=n.right)==null?void 0:k.includes(f.column.id))&&"sticky right-0 z-10 border-l",(F=f.column.columnDef.meta)==null?void 0:F.columnClass),style:{minWidth:`${f.column.getSize()}px`,width:`${f.column.getSize()}px`,maxWidth:`${f.column.getSize()}px`,...G(f.column.id),...O(f.column.id)},children:Y(f.column.columnDef.cell,f.getContext())},JSON.stringify(f))})]},JSON.stringify(c.original)))}),s.jsx("div",{className:"sticky bottom-0 left-0 z-10 p-1 border-t bg-gray-100",children:s.jsxs("div",{className:"flex w-max ml-auto",children:[s.jsx("button",{className:"flex justify-center items-center h-7 w-7 border-transparent rounded-md border transform disabled:opacity-50 disabled:pointer-events-none",onClick:()=>u.previousPage(),disabled:!u.getCanPreviousPage(),children:s.jsx(y.previous,{width:7})}),q().map((c,r)=>s.jsx("button",{className:S("flex justify-center items-center h-7 rounded-md border transform hover:font-bold",x===c?"w-10 bg-white border-gray-200 pointer-events-none":"w-8 border-transparent",c==="..."?"pointer-events-none":"disabled:opacity-50 disabled:pointer-events-none"),onClick:()=>typeof c=="number"&&u.setPageIndex(c-1),disabled:c==="...",children:c},r)),s.jsx("button",{className:"flex justify-center items-center h-7 w-7 border-transparent rounded-md border transform disabled:opacity-50 disabled:pointer-events-none",onClick:()=>u.nextPage(),disabled:!u.getCanNextPage(),children:s.jsx(y.next,{width:7})})]})})]})}function ss(){var $,R;const l=ee(),b=z(oe),N=z(ue),w=z(je),C=z(Ne),v=z(de),h=z(ge),g=z(ye),m=z(ve),[i,o]=L.useState({});L.useEffect(()=>{b===P.Idle&&l(se()),N===P.Idle&&l(ae()),w===P.Idle&&l(te()),C===P.Idle&&l(ne())},[l,N,w,C,b]);const I=(e,a)=>()=>{l(ie({id:e,dto:{blocked_at:a?_().format("YYYY-MM-DD HH:mm:ss"):null},onFail:re.error}))},M=[{id:"avatarThumb",accessorKey:"avatarThumb",header:"Фото",size:64,cell:({row:e})=>s.jsxs("span",{className:"relative z-0 flex min-w-12 max-w-12 min-h-12 max-h-12 rounded-full bg-gray-100 overflow-hidden",children:[e.original.avatarThumb&&s.jsx("img",{className:"absolute z-10 top-0 left-0 w-full h-full object-cover",src:e.original.avatarThumb,width:200,height:200,alt:e.original.name}),s.jsx(y.user,{className:"text-gray-300",width:48,height:48})]})},{id:"name",accessorKey:"name",header:"ФИО",size:240,cell:({row:e})=>s.jsxs(H,{className:"flex leading-none",to:W(U.Users.Show,{id:e.original.id}),children:[e.original.surname," ",e.original.name," ",e.original.patronymic]}),enableColumnFilter:!!i.name,meta:{renderFilter:()=>s.jsx(D,{placeholder:"Искать...",value:i.name||"",onChange:e=>o(a=>({...a,name:e})),onInput:e=>o(a=>({...a,name:e.target.value}))})}},{id:"sex",accessorKey:"sex",header:"Пол",size:64,cell:({row:e})=>e.original.sex==="male"?s.jsx(y.male,{className:"flex text-blue-600",width:20,height:20}):s.jsx(y.female,{className:"flex text-pink-600",width:20,height:20}),enableColumnFilter:!!i.sex,meta:{renderFilter:()=>s.jsx(T,{placeholder:"--Выбрать--",options:[{value:"male",label:V.male},{value:"female",label:V.female}],value:i.sex||"",onChange:e=>o(a=>({...a,sex:e}))})}},{id:"grade",accessorKey:"grade",header:"Класс",size:80,cell:({row:e})=>{const a=h==null?void 0:h.find(({id:t})=>{var n;return t===((n=e.original.student)==null?void 0:n.gradeId)});if(a)return s.jsxs(H,{className:"flex w-max text-lg font-semibold",to:W(U.Classes.Show,{id:a.id}),children:[a.level," ",a.group]})},sortingFn:(e,a)=>{var d,u;const t=((d=h==null?void 0:h.find(({id:p})=>{var x;return p===((x=e.original.student)==null?void 0:x.gradeId)}))==null?void 0:d.level.toString())||"",n=((u=h==null?void 0:h.find(({id:p})=>{var x;return p===((x=a.original.student)==null?void 0:x.gradeId)}))==null?void 0:u.level.toString())||"";return t.localeCompare(n)},enableColumnFilter:!!i.grade,meta:{renderFilter:()=>s.jsx(T,{placeholder:"--Выбрать--",options:(h||[]).map(e=>({value:e.id.toString(),label:`${e.level} ${e.group}`})),value:i.grade||"",onChange:e=>o(a=>({...a,grade:e}))})}},{id:"role",accessorKey:"role",header:"Позиция",size:130,cell:({row:e})=>s.jsx("span",{className:"flex max-w-max text-center bg-blue-200 text-primary rounded-full text-sm py-1 px-2 leading-none",children:X[e.original.role]}),enableColumnFilter:!!i.role,meta:{renderFilter:()=>s.jsx(T,{placeholder:"--Выбрать--",options:ce.map(e=>({value:e,label:X[e]})),value:i.role||"",onChange:e=>o(a=>({...a,role:e}))})}},{id:"phoneNumbers",accessorKey:"phoneNumbers",header:"Телефоны",size:140,cell:({row:e})=>{var a;return e.original.phoneNumbers&&s.jsx("div",{className:"flex flex-col",children:(a=e.original.phoneNumbers)==null?void 0:a.map(t=>s.jsxs("a",{className:"font-medium min-w-max",href:`tel:+${t.code}${t.numbers}`,children:["+",`${t.code} ${t.numbers}`]},t.numbers))})},enableColumnFilter:!!i.phone,meta:{renderFilter:()=>s.jsx(D,{placeholder:"Искать...",value:i.phone||"",onInput:e=>o(a=>({...a,phone:e.target.value})),onChange:e=>o(a=>({...a,phone:e}))})}},{id:"whatsapp",accessorKey:"whatsapp",header:"WhatsApp",size:140,cell:({row:e})=>e.original.whatsapp&&s.jsx("div",{className:"flex flex-col",children:s.jsxs("a",{className:"font-medium min-w-max",href:`https://wa.me/+${e.original.whatsapp.code}${e.original.whatsapp.numbers}`,target:"_blank",children:["+",`${e.original.whatsapp.code} ${e.original.whatsapp.numbers}`]},e.original.whatsapp.numbers)}),enableColumnFilter:!!i.whatsapp,meta:{renderFilter:()=>s.jsx(D,{placeholder:"Искать...",value:i.whatsapp||"",onInput:e=>o(a=>({...a,whatsapp:e.target.value})),onChange:e=>o(a=>({...a,whatsapp:e}))})}},{id:"email",accessorKey:"email",header:"Электронная почта",size:180,cell:({row:e})=>e.original.email&&s.jsx("a",{className:"text-blue-500 font-normal",href:`mailto:${e.original.email}`,children:e.original.email}),enableColumnFilter:!!i.email,meta:{renderFilter:()=>s.jsx(D,{placeholder:"Искать...",value:i.email||"",onInput:e=>o(a=>({...a,email:e.target.value})),onChange:e=>o(a=>({...a,email:e}))})}},{id:"login",accessorKey:"login",header:"Логин",size:220,enableColumnFilter:!!i.login,meta:{renderFilter:()=>s.jsx(D,{placeholder:"Искать...",value:i.login||"",onInput:e=>o(a=>({...a,login:e.target.value})),onChange:e=>o(a=>({...a,login:e}))})}},{id:"password",accessorKey:"password",header:"Пароль",size:220,enableColumnFilter:!!i.password,cell:({row:e})=>s.jsx(we,{string:e.original.password??"",children:"Скопировать"}),meta:{renderFilter:()=>s.jsx(D,{value:i.password||"",onInput:e=>o(a=>({...a,password:e.target.value})),onChange:e=>o(a=>({...a,password:e}))})}},{id:"birthDate",accessorKey:"birthDate",header:"Дата рождения",size:140,cell:({row:e})=>e.original.birthDate&&_(e.original.birthDate).format("DD MMM YYYY")},{id:"address",accessorKey:"address",header:"Адрес",size:280,enableColumnFilter:!!(($=i.address)!=null&&$.physicalAddress||(R=i.address)!=null&&R.region),cell:({row:e})=>e.original.address&&s.jsxs("div",{className:"leading-[1.1]",children:[e.original.address.region!=="За пределами города"&&"район ",e.original.address.region,", ",e.original.address.physicalAddress]}),sortingFn:(e,a)=>{const t=e.original.address?`${e.original.address.region}, ${e.original.address.physicalAddress}`:"",n=a.original.address?`${a.original.address.region}, ${a.original.address.physicalAddress}`:"";return t.localeCompare(n)},meta:{renderFilter:()=>{var e,a;return s.jsxs("div",{className:"flex flex-col gap-2",children:[s.jsx(D,{placeholder:"Искать...",value:((e=i.address)==null?void 0:e.physicalAddress)||"",onInput:t=>o(n=>{var d;return{...n,address:{physicalAddress:t.target.value,region:((d=n.address)==null?void 0:d.region)||""}}}),onChange:t=>o(n=>{var d;return{...n,address:{physicalAddress:t,region:((d=n.address)==null?void 0:d.region)||""}}})}),s.jsx(T,{placeholder:"--Район--",options:me.map(t=>({value:t,label:t})),value:((a=i.address)==null?void 0:a.region)||"",onChange:t=>o(n=>{var d;return{...n,address:{physicalAddress:((d=n.address)==null?void 0:d.physicalAddress)||"",region:t}}})})]})}}},{id:"nationality",accessorKey:"nationality",header:"Национальность",size:160,enableColumnFilter:!!i.nationality,cell:({row:e})=>{var a;return(a=g==null?void 0:g.find(t=>t.id===e.original.nationalityId))==null?void 0:a.name},sortingFn:(e,a)=>{var d,u;const t=((d=g==null?void 0:g.find(({id:p})=>p===e.original.nationalityId))==null?void 0:d.name)||"",n=((u=g==null?void 0:g.find(({id:p})=>p===a.original.nationalityId))==null?void 0:u.name)||"";return t.localeCompare(n)},meta:{renderFilter:()=>s.jsx(T,{placeholder:"--Выбрать--",options:(g||[]).map(e=>({value:e.id.toString(),label:e.name})),value:i.nationality||"",onChange:e=>o(a=>({...a,nationality:e}))})}},{id:"profession",accessorKey:"profession",header:"Сфера деятельности",size:200,enableColumnFilter:!!i.professionId,cell:({row:e})=>{var a,t;return m&&((a=e.original.parent)==null?void 0:a.professionId)&&((t=m.find(({id:n})=>{var d;return n===((d=e.original.parent)==null?void 0:d.professionId)}))==null?void 0:t.name)},sortingFn:(e,a)=>{var d,u;const t=((d=m==null?void 0:m.find(({id:p})=>{var x;return p===((x=e.original.parent)==null?void 0:x.professionId)}))==null?void 0:d.name)||"",n=((u=m==null?void 0:m.find(({id:p})=>{var x;return p===((x=a.original.parent)==null?void 0:x.professionId)}))==null?void 0:u.name)||"";return t.localeCompare(n)},meta:{renderFilter:()=>s.jsx("div",{className:"flex flex-col gap-2",children:s.jsx(T,{options:(m||[]).map(e=>({value:e.id.toString(),label:e.name})),value:i.professionId||"",onChange:e=>o(a=>({...a,professionId:e}))})})}},{id:"blockedAt",accessorKey:"blockedAt",header:"Блокировка",size:160,cell:({row:e})=>e.original.blockedAt?s.jsxs("div",{className:"flex flex-col",children:[s.jsx(K,{className:"mb-1",variant:"danger",onClick:I(e.original.id,!1),children:"Разблокировать"}),s.jsxs("span",{className:"flex text-sm leading-none text-danger",children:["Заблокирован с ",s.jsx("br",{})," ",_(e.original.blockedAt).format("DD MMMM YYYY HH:mm")]})]}):s.jsx(K,{variant:"light",onClick:I(e.original.id,!0),children:"Заблокировать"})},{id:"talents",accessorKey:"talents",header:"Таланты",size:200,enableColumnFilter:!!i.talents,cell:({row:e})=>{var a;return(a=e.original.student)==null?void 0:a.talents},meta:{renderFilter:()=>s.jsx("div",{className:"flex flex-col gap-2",children:s.jsx(D,{placeholder:"Искать...",value:i.talents||"",onInput:e=>o(a=>({...a,talents:e.target.value})),onChange:e=>o(a=>({...a,talents:e}))})})}},{id:"socialLinks",accessorKey:"socialLinks",header:"Социальные сети",size:148,cell:({row:e})=>{var a,t,n,d,u,p,x;return s.jsxs("div",{className:"flex flex-wrap gap-2 items-center",children:[((a=e.original.socialLink)==null?void 0:a.facebook)&&s.jsx("a",{className:"flex shadow-md rounded-full transition-all duration-150 hover:shadow-none",href:e.original.socialLink.facebook,target:"_blank",children:s.jsx(y.facebook,{width:24,height:24})}),((t=e.original.socialLink)==null?void 0:t.instagram)&&s.jsx("a",{className:"flex shadow-md rounded-full transition-all duration-150 hover:shadow-none",href:(n=e.original.socialLink)==null?void 0:n.instagram,target:"_blank",children:s.jsx(y.instagram,{width:24,height:24})}),((d=e.original.socialLink)==null?void 0:d.telegram)&&s.jsx("a",{className:"flex shadow-md rounded-full transition-all duration-150 hover:shadow-none",href:(u=e.original.socialLink)==null?void 0:u.telegram,target:"_blank",children:s.jsx(y.telegram,{width:24,height:24})}),((p=e.original.socialLink)==null?void 0:p.odnoklassniki)&&s.jsx("a",{className:"flex shadow-md rounded-full transition-all duration-150 hover:shadow-none",href:(x=e.original.socialLink)==null?void 0:x.odnoklassniki,target:"_blank",children:s.jsx(y.odnoklassniki,{width:24,height:24})})]})}}];return s.jsxs("main",{className:"flex flex-col gap-y-1 py-2",children:[s.jsxs("h1",{className:"title",children:["Пользователи (",v==null?void 0:v.length,")"]}),v?s.jsx(Pe,{data:be(v,i),columns:M,searchValue:i.name,onSearchInput:e=>o(a=>({...a,name:e.target.value})),sortingState:[{id:"name",desc:!1}],onExport:(e,a)=>pe(e,a,{grades:h,nationalities:g,professions:m}),actions:s.jsx(K,{className:"max-h-7",icon:"add",variant:"success",href:U.Users.Create,children:s.jsx("span",{className:"sr-only md:not-sr-only",children:"Добавить"})})}):s.jsx(le,{className:"w-8 h-8"})]})}export{ss as default};
