import{a as B,u as i,r,i as x,ao as T,a7 as O,j as t,S as A,L as b}from"./main-DzOvJ3Bl.js";import{D as C}from"./data-table-DhQGkLo7.js";import{M as z}from"./modal-1koiJ247.js";import{b as E,g as F,c as I,a as K}from"./books-selector-DOc_U6u5.js";import{B as N,a as L,b as M}from"./books-delete-form-82QAj0AB.js";import{A as P}from"./books-Bhzd4aEF.js";import"./preload-helper-BfFHrpNk.js";import"./icons-B5TgyNC1.js";import"./use-dropdown-D7UlQ3WZ.js";import"./index-D18-tjuz.js";import"./button-BK2ewXLd.js";import"./content-field-kAEhiYce.js";import"./cleanable-37L1pogH.js";import"./formik.esm-Cpulkf5n.js";import"./select-field-Dot3bTik.js";import"./index.browser-OxPLOBIU.js";import"./text-field-yJsTwbK9.js";import"./index.esm-BCp_SAnH.js";function st(){const c=B(),g=i(E),u=i(F),a=i(I),e=i(K),[n,k]=r.useState(null),[l,D]=r.useState(null),[d,S]=r.useState(null);r.useEffect(()=>{g===x.Idle&&c(T()),u===x.Idle&&c(O())},[g,u,c]);const j=[{id:"title",accessorKey:"title",header:"Название",size:360},{id:"category",accessorKey:"category",header:"Категория",size:360,cell:({row:s})=>{var o;return(o=e==null?void 0:e.find(({id:m})=>+m==+s.original.categoryId))==null?void 0:o.title},sortingFn:(s,o)=>{var f,h;const m=((f=e==null?void 0:e.find(({id:p})=>+p==+s.original.categoryId))==null?void 0:f.title)||"",y=((h=e==null?void 0:e.find(({id:p})=>+p==+o.original.categoryId))==null?void 0:h.title)||"";return m.localeCompare(y)}},{id:"access",accessorKey:"access",header:"Доступность",size:200,cell:({row:s})=>P[s.original.access]},{id:"lang",accessorKey:"lang",header:"Язык",size:160},{id:"link",accessorKey:"link",header:"Ссылка",size:420,cell:({row:s})=>t.jsx(b,{className:"text-blue-500",to:s.original.link,target:"_blank",children:s.original.link})}];return t.jsxs(t.Fragment,{children:[t.jsxs("main",{className:"py-2",children:[t.jsxs("h1",{className:"title mb-1 px-3",children:["Книги (",a==null?void 0:a.length,")"]}),a?t.jsx(C,{data:a,columns:j,sortingState:[{id:"title",desc:!1}],columnPinningState:{right:["actions"]}}):t.jsx(A,{className:"w-8 h-8"})]}),t.jsxs(z,{isOpen:!!(n||l||d),children:[n&&t.jsx(N,{dto:n,setDTO:k}),l&&t.jsx(L,{dto:l,setDTO:D}),d&&t.jsx(M,{dto:d,setDTO:S})]})]})}export{st as default};
