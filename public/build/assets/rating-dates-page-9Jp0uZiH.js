import{u,g as x,a as p,j as e,V as f,y as c,r as j,i as y,W as b,S as g}from"./main-DzOvJ3Bl.js";import{g as q,a as h}from"./ratings-selector-CZBQg-ih.js";import{B as R}from"./button-BK2ewXLd.js";import{T as a}from"./text-field-yJsTwbK9.js";import{R as t}from"./ratings-CKd6Gnpx.js";import{F as S,a as E}from"./formik.esm-Cpulkf5n.js";import{g as A}from"./index-DnzxYe6g.js";import"./preload-helper-BfFHrpNk.js";import"./icons-B5TgyNC1.js";import"./cleanable-37L1pogH.js";import"./index.browser-OxPLOBIU.js";function F({ratingDate:s}){const r=u(x),n=p(),m={id:s.id,years:s.years,quarter1:s.quarter1,quarter2:s.quarter2,semester1:s.semester1,quarter3:s.quarter3,quarter4:s.quarter4,semester2:s.semester2,annual:s.annual,assessment:s.assessment,final:s.final},i=async(o,l)=>{l.setSubmitting(!0),await n(f({dto:o,onSuccess:()=>c.success("Данные успешно сохранены."),onValidationError:d=>l.setErrors({...d.errors}),onFail:d=>c.error(d)})),l.setSubmitting(!1)};return e.jsx(S,{initialValues:m,onSubmit:i,children:({isSubmitting:o})=>e.jsxs(E,{className:"flex flex-col max-w-[1200px] gap-3 bg-white border rounded-md shadow py-4 px-6 md:grid md:grid-cols-3",children:[e.jsx("h2",{className:"font-semibold text-lg leading-none md:col-span-3",children:s.years}),e.jsx(a,{name:"quarter1",type:"date",label:t.quarter1}),e.jsx(a,{name:"quarter2",type:"date",label:t.quarter2}),e.jsx(a,{name:"semester1",type:"date",label:t.semester1}),e.jsx(a,{name:"quarter3",type:"date",label:t.quarter3}),e.jsx(a,{name:"quarter4",type:"date",label:t.quarter4}),e.jsx(a,{name:"semester2",type:"date",label:t.semester2}),e.jsx(a,{name:"annual",type:"date",label:t.annual}),e.jsx(a,{name:"assessment",type:"date",label:t.assessment}),e.jsx(a,{name:"final",type:"date",label:t.final}),(r==null?void 0:r.role)==="superadmin"&&e.jsx("div",{className:"flex items-center justify-end gap-2 md:col-span-3",children:e.jsx(R,{type:"submit",disabled:o,loading:o,variant:"success",children:"Сохранить"})})]})})}function z(){const s=p(),r=u(q),n=u(h),m=n==null?void 0:n.find(({years:i})=>i===A());return j.useEffect(()=>{r===y.Idle&&s(b())},[s,r]),e.jsxs("main",{className:"py-2",children:[e.jsx("h1",{className:"title mb-1 px-3",children:"Даты рейтингов"}),m?e.jsx(F,{ratingDate:m}):e.jsx(g,{className:"w-8 h-8"})]})}export{z as default};
