import{a as j,j as e,ag as g,y as c}from"./main-D1eUXBUZ.js";import{I as l}from"./icons-BPzoWE67.js";import{B as i}from"./button-BL-nMFYt.js";import{T as d}from"./text-field-BNa0wjrA.js";import{F as y,a as N,b as v}from"./formik.esm-CBfpT2PV.js";import{c as p,d as w,e as u}from"./index.esm-CFqL8ZUg.js";import"./preload-helper-BfFHrpNk.js";import"./cleanable-5YjDg63i.js";import"./index.browser-OxPLOBIU.js";const F=p().shape({phone_numbers:w().of(p().shape({numbers:u().required(" "),code:u().required(" ")}))});function U({user:t,setIsOpen:o}){const h=j(),b={phone_numbers:t.phoneNumbers},x=async(n,s)=>{s.setSubmitting(!0),await h(g({id:t.id,dto:n,onSuccess:()=>{c.success("Данные успешно сохранены."),o(!1)},onValidationError:r=>s.setErrors({...r.errors}),onFail:r=>c.error(r)})),s.setSubmitting(!1)};return e.jsx(y,{initialValues:b,validationSchema:F,onSubmit:x,children:({values:n,isSubmitting:s})=>e.jsxs(N,{className:"flex flex-col gap-3",children:[e.jsx(v,{name:"phone_numbers",children:({push:r,remove:f})=>{var m;return e.jsxs(e.Fragment,{children:[(m=n.phone_numbers)==null?void 0:m.map((_,a)=>e.jsxs("div",{className:"flex items-end gap-2",children:[e.jsxs("div",{className:"relative",children:[e.jsx(d,{className:"w-[88px]",inputClassname:"pl-7",type:"number",name:`phone_numbers.${a}.code`,label:"Код страны",required:!0}),e.jsx("span",{className:"absolute top-5 left-4 transform",children:"+"})]}),e.jsx(d,{className:"w-[120px] grow",type:"number",name:`phone_numbers.${a}.numbers`,label:"Номер телефона",required:!0}),e.jsx(i,{variant:"warning",onClick:()=>f(a),children:e.jsx(l.delete,{width:16,height:16})})]},a)),e.jsxs("button",{className:"flex justify-center items-center gap-2 rounded border border-dashed h-8 border-gray-300 bg-gray-50 mt-2",type:"button",onClick:()=>r({code:"",numbers:""}),children:[e.jsx(l.add,{width:12,height:12})," Добавить"]})]})}}),e.jsxs("div",{className:"flex items-center justify-end gap-2 mt-6 sm:col-span-2",children:[e.jsx(i,{className:"justify-center min-w-[92px]",type:"submit",disabled:s,loading:s,variant:"success",children:"Сохранить"}),e.jsx(i,{type:"reset",onClick:()=>o(!1),variant:"danger",children:"Отмена"})]})]})},t.id)}export{U as default};
