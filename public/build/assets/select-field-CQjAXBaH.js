import{r as R,j as s,c as o}from"./main-AaLcc3dp.js";import{L as z,B as D,C as M,A as G,E as H}from"./cleanable-CLHN0dJc.js";import{u as J}from"./formik.esm-DihjhV0Z.js";import{u as K}from"./use-dropdown-CCuvuR3G.js";import{I as P}from"./icons-Dmjc42BA.js";import{n as Q}from"./index.browser-OxPLOBIU.js";function Z(r){const{name:i,searchable:p,cleanable:x,multiple:n,onClean:y,onChange:c,className:w,placeholder:N,label:C,required:S,before:f,after:u,inputClassname:I,optionClassname:L}=r,b=Q(),[l,h,m]=J(i),[g,O]=R.useState(r.options),{ref:k,menuRef:E,isOpen:v,setIsOpen:j}=K(),F=e=>()=>{n?(l.value||[]).includes(e.value)?m.setValue([...l.value.filter(a=>a!==e.value)]):m.setValue([...l.value||[],e.value]):(m.setValue(e.value),j(!1)),c&&c(e)},q=e=>()=>{m.setValue([...l.value.filter(a=>a!==e)]),c&&c(g.find(a=>a.value.toString()===e.toString())||[])},A=()=>{var e,a;return l.value?n?s.jsx("span",{className:"flex flex-wrap py-[2px] items-center gap-1",children:(e=l.value)==null?void 0:e.map(d=>{const t=r.options.find(B=>B.value===d);return s.jsxs("span",{className:"flex items-center gap-2 border h-6 pr-2 rounded bg-white text-sm min-w-max",children:[s.jsx("span",{className:"remove-selection flex items-center justify-center rounded-l h-[22px] w-[22px] hover:text-error hover:bg-red-50",onClick:q((t==null?void 0:t.value)||""),children:s.jsx(P.close,{className:"pointer-events-none",width:10,height:10})}),t==null?void 0:t.label]},d)})}):s.jsx("span",{className:"truncate",children:(a=r.options.find(d=>d.value===l.value))==null?void 0:a.label}):s.jsx("span",{className:"text-[#a8a3b7] truncate",children:N})};return s.jsxs("div",{ref:k,className:o(w,"relative flex flex-col"),children:[s.jsx(z,{required:S,label:C,htmlFor:b}),s.jsx("input",{className:"sr-only",type:"text",name:i}),s.jsxs("div",{className:"relative flex",children:[s.jsx(D,{element:f}),s.jsx("button",{className:o(I,"flex items-center grow bg-gray-50 min-w-0 border border-gray-200 rounded px-4 leading-none text-base focus:outline-none hover:bg-gray-100 focus:border-primary focus:bg-gray-100",n?"min-h-8 px-[3px]":"h-8",(u||x)&&"pr-8",u&&x&&"!pr-16",f&&"pl-8",h.error&&h.touched?"border-red-400":"border-gray-200"),id:b,type:"button",onClick:e=>!e.target.classList.contains("remove-selection")&&j(!v),children:A()}),s.jsx(M,{className:o("absolute top-1/2",u?"right-8":"right-0"),name:i,cleanable:x,multiple:!0,onClean:y}),s.jsx(G,{element:u})]}),s.jsx(H,{name:i}),s.jsxs("div",{ref:E,className:o("absolute top-[calc(100%+4px)] right-0 z-10 border rounded-md pb-1 bg-white shadow-sm text-sm w-full text-gray-500",v?"visible opacity-100":"invisible opacity-0",p?"pt-0":"pt-1"),children:[p&&s.jsx("input",{className:"flex items-center grow bg-gray-50 min-w-0 rounded-t h-8 px-4 leading-none text-sm w-full focus:outline-none hover:bg-gray-50  focus:bg-gray-50",type:"search",placeholder:"Поиск",onInput:e=>O(r.options.filter(a=>a.label.toLowerCase().includes(e.target.value.toLowerCase())))}),s.jsx("ul",{className:"max-h-56 overflow-y-auto scrollbar-y",children:g.map(e=>s.jsx("li",{children:s.jsx("button",{className:o(L,"flex w-full items-center h-8 transition-all duration-150 hover:bg-green-50 px-3 leading-none text-left min-h-max",n&&(l.value||[]).includes(e.value)&&"bg-blue-50 hover:bg-red-50",!n&&l.value===e.value&&"bg-blue-50 hover:bg-red-50"),type:"button",onClick:F(e),children:e.label})},e.value))})]})]})}export{Z as S};
