import{a as d,j as e,V as p,y as u,u as c,r as x,i as f,W as j,S as y}from"./main-C3zapZtd.js";import{g as b,a as q}from"./ratings-selector-DvZo8GEt.js";import{B as g}from"./button-k6U4pBlW.js";import{T as a}from"./text-field-DVRwjedT.js";import{R as t}from"./ratings-CKd6Gnpx.js";import{F as h,a as R}from"./formik.esm-ShEui-VR.js";import{g as S}from"./index-BvpbAmk5.js";import"./preload-helper-BfFHrpNk.js";import"./icons-CmdP5zNp.js";import"./cleanable-xJmsbn0p.js";import"./index.browser-OxPLOBIU.js";function E({ratingDate:s}){const m=d(),n={id:s.id,years:s.years,quarter1:s.quarter1,quarter2:s.quarter2,semester1:s.semester1,quarter3:s.quarter3,quarter4:s.quarter4,semester2:s.semester2,annual:s.annual,assessment:s.assessment,final:s.final},i=async(r,l)=>{l.setSubmitting(!0),await m(p({dto:r,onSuccess:()=>u.success("Данные успешно сохранены."),onValidationError:o=>l.setErrors({...o.errors}),onFail:o=>u.success(o)})),l.setSubmitting(!1)};return e.jsx(h,{initialValues:n,onSubmit:i,children:({isSubmitting:r})=>e.jsxs(R,{className:"flex flex-col max-w-[1200px] gap-3 bg-white border rounded-md shadow py-4 px-6 md:grid md:grid-cols-3",children:[e.jsx("h2",{className:"font-semibold text-lg leading-none md:col-span-3",children:s.years}),e.jsx(a,{name:"quarter1",type:"date",label:t.quarter1}),e.jsx(a,{name:"quarter2",type:"date",label:t.quarter2}),e.jsx(a,{name:"semester1",type:"date",label:t.semester1}),e.jsx(a,{name:"quarter3",type:"date",label:t.quarter3}),e.jsx(a,{name:"quarter4",type:"date",label:t.quarter4}),e.jsx(a,{name:"semester2",type:"date",label:t.semester2}),e.jsx(a,{name:"annual",type:"date",label:t.annual}),e.jsx(a,{name:"assessment",type:"date",label:t.assessment}),e.jsx(a,{name:"final",type:"date",label:t.final}),e.jsx("div",{className:"flex items-center justify-end gap-2 md:col-span-3",children:e.jsx(g,{type:"submit",disabled:r,loading:r,variant:"success",children:"Сохранить"})})]})})}function W(){const s=d(),m=c(b),n=c(q),i=n==null?void 0:n.find(({years:r})=>r===S());return x.useEffect(()=>{m===f.Idle&&s(j())},[s,m]),e.jsxs("main",{className:"py-2",children:[e.jsx("h1",{className:"title mb-1 px-3",children:"Даты рейтингов"}),i?e.jsx(E,{ratingDate:i}):e.jsx(y,{className:"w-8 h-8"})]})}export{W as default};
