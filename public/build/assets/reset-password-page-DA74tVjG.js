import{a as f,f as h,r as w,j as s,c as r,h as j,A as g}from"./main-BapWvo6d.js";import{I as N}from"./icons-CKZmPjWe.js";import{A as F}from"./app-logo-CAe2g1PN.js";import{B as n}from"./button-CtaP8i_C.js";import{c as P,a as m,b as v}from"./index.esm-U2yOPwS9.js";import{F as A,a as y}from"./formik.esm-nbuIjPfq.js";import{M as k}from"./message-CHzonMk3.js";import{T as E}from"./text-field-WzK1B_2e.js";import{P as i}from"./password-field-55WDx7cx.js";import{C as R}from"./checkbox-CSuOa1Mk.js";import"./preload-helper-BfFHrpNk.js";import"./cleanable-SxN1MKww.js";import"./index.browser-OxPLOBIU.js";import"./index-CVMyaCg6.js";const S=P().shape({password:m().required("Пароль обязателен.").min(6,"Пароль должен содержать не менее 6 символов."),password_confirmation:m().required("Подтверждение пароля обязателен.").oneOf([v("password")],"Подтверждение пароля не совпадает.")});function _({className:c}){const l=f(),{token:d}=h(),[p,o]=w.useState(void 0),x={token:d||"",password:"",password_confirmation:"",email:!0},b=async(a,e)=>{e.setSubmitting(!0),o(void 0),await l(j({dto:a,onSuccess:t=>{o([t,"success"]),e.resetForm()},onValidationError:t=>e.setErrors({...t.errors}),onFail:t=>o([t,"error"])})),e.setSubmitting(!1)},u=a=>e=>{a(t=>({...t,password:e,password_confirmation:e}))};return s.jsx(A,{initialValues:x,validationSchema:S,onSubmit:b,children:({isSubmitting:a,setValues:e})=>s.jsxs(y,{className:r(c,"flex flex-col"),children:[s.jsx(k,{className:"mb-4",message:p}),s.jsx(E,{name:"token",type:"hidden"}),s.jsx(i,{className:"mb-5",name:"password",label:"Новый пароль",generatable:!0,onGenerate:u(e)}),s.jsx(i,{className:"mb-5",name:"password_confirmation",label:"Подтвердите пароль"}),s.jsx(R,{className:"mb-5",name:"email",label:"Отправить данные для входа на почту."}),s.jsx(n,{className:r("justify-center",a&&"opacity-60"),type:"submit",disabled:a,loading:a,children:"Сбросить пароль"})]})})}function J(){return s.jsxs("main",{className:"flex flex-col items-center justify-center min-h-screen bg-illustrations bg-white bg-bottom bg-contain bg-no-repeat md:bg-transparent",children:[s.jsx(F,{className:"mt-8 mb-4 md:mt-12 md:mb-6 xl:mt-0"}),s.jsxs("div",{className:"w-[90vw] max-w-96 mx-auto mb-16 md:bg-white md:shadow-md sm:rounded-lg md:p-10 md:mb-20 xl:mb-28",children:[s.jsx("h1",{className:"title mb-6",children:"Сброс пароля"}),s.jsx(_,{}),s.jsxs(n,{className:"text-sm mt-2 text-blue-600 hover:text-blue-400",variant:"text",href:g.Auth.Login,children:[s.jsx(N.west,{height:8})," Вход в онлайн-дневник"]})]})]})}export{J as default};
