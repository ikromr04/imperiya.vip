const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/users-edit-form-D1mjKC6F.js","assets/main-DTCJiQsq.js","assets/preload-helper-DPi8upcZ.js","assets/main-CQojFZrT.css","assets/button-ZbyXFrBi.js","assets/icons-B2aTwrz9.js","assets/select-field-C-EaKXM3.js","assets/cleanable-D3GteXwV.js","assets/formik.esm-DmaS9LwQ.js","assets/use-dropdown-BewGSdNb.js","assets/index.browser-OxPLOBIU.js","assets/text-field-DtssmZdu.js","assets/index.esm-COLkK52-.js","assets/users-DUqPc0QS.js","assets/nationalities-selector-C_DFCmFp.js","assets/password-field-DcoynRPP.js","assets/index-CH9u_kY9.js","assets/users-delete-form-Dx35lQMl.js","assets/users-selector-ClKCaFND.js","assets/users-gtfI0CYO.js","assets/users-phone-edit-form-BZPwZcc0.js","assets/users-social-links-edit-form-DGulpGFZ.js","assets/superadmin-info-CP2AV2XY.js","assets/description-list-DJNGS9w7.js","assets/admin-info-CP2AV2XY.js","assets/director-info-BMu7T--H.js","assets/teacher-info-Dp3hWISY.js","assets/modal-Bd5XVz8d.js","assets/tooltip-BZHTSEim.js","assets/grades-selector-fDFrO--I.js","assets/parent-info-CNAyckMb.js","assets/professions-selector-CBoORgOR.js","assets/student-info-D40jEP9J.js"])))=>i.map(i=>d[i]);
import{a as p,r as t,j as e,q as S,L as f,S as h,c as v,u as D,a2 as L,y as I,a3 as $,v as N,A as u,_ as O,e as P,h as _,x as U,i as T,m as z}from"./main-DTCJiQsq.js";import{_ as d}from"./preload-helper-DPi8upcZ.js";import{I as r}from"./icons-B2aTwrz9.js";import{B as m}from"./button-ZbyXFrBi.js";import{C as F}from"./copy-button-BcojYg2n.js";import{D as A}from"./description-list-DJNGS9w7.js";import{M as b}from"./modal-Bd5XVz8d.js";import{T as y}from"./tooltip-BZHTSEim.js";import{S as R,b as E}from"./users-DUqPc0QS.js";import{a as C,g as M}from"./nationalities-selector-C_DFCmFp.js";import{B as V}from"./breadcrumbs-BBCmsKlr.js";import{g as B,a as Y}from"./users-selector-ClKCaFND.js";import{a as G,g as H}from"./grades-selector-fDFrO--I.js";import{g as q,a as W}from"./users-gtfI0CYO.js";import{u as J}from"./use-dropdown-BewGSdNb.js";import K from"./not-found-page-BRwbsJSY.js";function Q({user:s}){var i;const a=p(C);return((i=a==null?void 0:a.find(({id:n})=>n===(s==null?void 0:s.nationalityId)))==null?void 0:i.name)||"-"}const X=t.lazy(()=>d(()=>import("./users-edit-form-D1mjKC6F.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16])));function Z({user:s}){const[a,i]=t.useState(!1),n=t.useMemo(()=>({Фамилия:s.surname,Имя:s.name,Отчество:s.patronymic??"-",Логин:s.login,Пароль:s.password?e.jsx(F,{className:"items-baseline font-normal text-[16px] h-auto !p-0 shadow-none",string:s.password,children:"Скопировать"}):"-",Позиция:E[s.role],Пол:R[s.sex],"Электронная почта":s.email?e.jsx(f,{className:"text-blue-600",to:`mailto:${s.email}`,children:s.email}):"-","Дата рождения":s.birthDate?S(s.birthDate).format("DD MMMM YYYY"):"-",Адрес:s.address?`${s.address.region!=="За пределами города"?"район ":""}${s.address.region}, ${s.address.physicalAddress}`:"-",Национальность:e.jsx(Q,{user:s}),WhatsApp:s.whatsapp?e.jsxs("a",{className:"text-blue-600",href:`https://wa.me/+${s.whatsapp.code}${s.whatsapp.numbers}`,target:"_blank",rel:"noopener noreferrer",children:["+",s.whatsapp.code," ",s.whatsapp.numbers]}):"-"}),[s]);return e.jsxs(e.Fragment,{children:[e.jsxs("section",{className:"box",children:[e.jsxs("header",{className:"box__header",children:[e.jsx("h2",{className:"title md:!text-lg",children:"Базовая информация"}),e.jsxs(m,{variant:"light",onClick:()=>i(!0),children:[e.jsx(r.edit,{width:14,height:14}),e.jsx(y,{label:"Редактировать",position:"left"})]})]}),e.jsxs("div",{className:"relative",children:[e.jsx(A,{className:"box__body",list:n}),e.jsx("div",{className:"absolute top-[1px] right-0 rounded-br-md z-10 min-w-6 h-[calc(100%-1px)] pointer-events-none bg-gradient-to-l from-white to-transparent"})]})]}),a&&e.jsx(b,{isOpen:a,children:e.jsx(t.Suspense,{fallback:e.jsx(h,{className:"w-10 h-10"}),children:e.jsx(X,{user:s,setIsOpen:i})})})]})}const ee=t.memo(Z),se=t.lazy(()=>d(()=>import("./users-delete-form-Dx35lQMl.js"),__vite__mapDeps([17,1,2,3,4,5,18,19,13,8])));function ae({user:s}){const[a,i]=t.useState(!1);return e.jsxs(e.Fragment,{children:[e.jsxs(m,{variant:"danger",onClick:()=>i(!0),children:[e.jsx(r.delete,{width:14,height:14}),"Удалить пользователья"]}),a&&e.jsx(b,{isOpen:a,children:e.jsx(t.Suspense,{fallback:e.jsx(h,{className:"w-8 h-8"}),children:e.jsx(se,{user:s,setIsOpen:i},a.toString())})})]})}function te({user:s}){var a,i;return e.jsxs("section",{className:"box",children:[e.jsxs("div",{className:"box__header flex-col !items-start",children:[e.jsxs(m,{className:"flex items-center gap-2 text-blue-600 leading-none",variant:"default",href:s.email?`mailto:${s.email}`:"",children:[e.jsx("span",{className:"flex items-center justify-center w-7 h-7 rounded bg-blue-50 text-success",children:e.jsx(r.mail,{width:16,height:16})}),s.email??"-"]}),e.jsxs(m,{className:v("flex items-center gap-2 text-blue-600 leading-none",!s.whatsapp&&"pointer-events-none"),variant:"default",href:`https://wa.me/+${(a=s.whatsapp)==null?void 0:a.code}${(i=s.whatsapp)==null?void 0:i.numbers}`,target:"_blank",children:[e.jsx("span",{className:"flex items-center justify-center w-7 h-7 rounded bg-blue-50 text-success",children:e.jsx(r.whatsapp,{width:16,height:16})}),s.whatsapp?`+${s.whatsapp.code} ${s.whatsapp.numbers}`:"-"]})]}),e.jsx(A,{className:"box__body",variant:"detailed",list:{"Дата регистрации":S(s.createdAt).format("DD MMMM YYYY")}})]})}const ie=t.memo(te),ne=t.lazy(()=>d(()=>import("./users-phone-edit-form-BZPwZcc0.js"),__vite__mapDeps([20,1,2,3,5,4,11,7,8,10,12])));function le({user:s}){var n;const[a,i]=t.useState(!1);return e.jsxs(e.Fragment,{children:[e.jsxs("section",{className:"box",children:[e.jsxs("header",{className:"box__header",children:[e.jsx("h2",{className:"font-medium text-gray-900",children:"Телефонные номера"}),e.jsxs(m,{variant:"light",onClick:()=>i(!0),children:[e.jsx(r.edit,{width:14,height:14}),e.jsx(y,{label:"Редактировать",position:"left"})]})]}),e.jsx("ul",{className:"box__body flex flex-col gap-2",children:(n=s.phoneNumbers)==null?void 0:n.map(({code:c,numbers:o})=>e.jsx("li",{children:e.jsxs(f,{className:"flex items-center gap-2 w-max text-blue-600",to:`tel:+${c}${o}`,children:[e.jsx("span",{className:"flex items-center w-7 h-7 justify-center bg-blue-50 rounded text-success",children:e.jsx(r.phone,{width:16,height:16})}),"+",c," ",o]})},o))})]}),a&&e.jsx(b,{isOpen:a,children:e.jsx(t.Suspense,{fallback:e.jsx(h,{className:"w-6 h-6"}),children:e.jsx(ne,{user:s,setIsOpen:i},a.toString())})})]})}const oe=t.memo(le),re=t.lazy(()=>d(()=>import("./users-social-links-edit-form-DGulpGFZ.js"),__vite__mapDeps([21,1,2,3,4,5,11,7,8,10])));function ce({user:s}){var n,c,o,l,x,g,j;const[a,i]=t.useState(!1);return e.jsxs(e.Fragment,{children:[e.jsxs("section",{className:"box",children:[e.jsxs("header",{className:"box__header",children:[e.jsx("h2",{className:"font-medium text-gray-900",children:"Социальные сети"}),e.jsxs(m,{variant:"light",onClick:()=>i(!0),children:[e.jsx(r.edit,{width:14,height:14}),e.jsx(y,{label:"Редактировать",position:"left"})]})]}),e.jsxs("div",{className:"box__body flex flex-wrap gap-2",children:[((n=s.socialLink)==null?void 0:n.facebook)&&e.jsx(f,{className:"flex shadow-md rounded-full transition-all duration-150 hover:shadow-none",to:s.socialLink.facebook,target:"_blank",children:e.jsx(r.facebook,{width:24,height:24})}),((c=s.socialLink)==null?void 0:c.instagram)&&e.jsx(f,{className:"flex shadow-md rounded-full transition-all duration-150 hover:shadow-none",to:(o=s.socialLink)==null?void 0:o.instagram,target:"_blank",children:e.jsx(r.instagram,{width:24,height:24})}),((l=s.socialLink)==null?void 0:l.telegram)&&e.jsx(f,{className:"flex shadow-md rounded-full transition-all duration-150 hover:shadow-none",to:(x=s.socialLink)==null?void 0:x.telegram,target:"_blank",children:e.jsx(r.telegram,{width:24,height:24})}),((g=s.socialLink)==null?void 0:g.odnoklassniki)&&e.jsx(f,{className:"flex shadow-md rounded-full transition-all duration-150 hover:shadow-none",to:(j=s.socialLink)==null?void 0:j.odnoklassniki,target:"_blank",children:e.jsx(r.odnoklassniki,{width:24,height:24})})]})]}),a&&e.jsx(b,{isOpen:a,children:e.jsx(t.Suspense,{fallback:e.jsx(h,{className:"w-6 h-6"}),children:e.jsx(re,{user:s,setIsOpen:i},a.toString())})})]})}const de=t.memo(ce);function me({user:s}){const a=D(),{ref:i,isOpen:n,setIsOpen:c}=J(),[o,l]=t.useState(!1),x=async j=>{l(!0);const k=new FormData;k.append("avatar",j.target.files[0]),await a(L({formData:k,id:s.id,onValidationError:w=>I.error(w.message),onFail:w=>I.error(w),onSuccess:()=>c(!1)})),l(!1)},g=async()=>{l(!0),await a($({id:s.id})),l(!1)};return e.jsxs("div",{ref:i,className:"relative z-10 w-36 mb-2 lg:mb-0",children:[e.jsxs(m,{className:"relative min-w-36 max-w-36 min-h-36 max-h-36 !p-0",variant:"text",onClick:()=>c(!n),children:[e.jsx("img",{className:"block w-full h-full rounded-full object-cover border-[2px] border-white",src:s.avatarThumb||"/images/avatar.png",width:144,height:144,alt:s.name}),o&&e.jsx(h,{className:"absolute w-full h-full"})]}),e.jsx("div",{className:v("absolute top-full left-1/2 w-full border rounded-md py-1 bg-white shadow-sm text-sm min-w-max transform -translate-x-1/2 transition-all duration-150 text-gray-500",n?"visible opacity-100":"invisible opacity-0"),children:e.jsxs("ul",{children:[e.jsx("li",{children:e.jsxs("label",{className:"flex items-center gap-2 w-full h-8 transition-all duration-150 hover:bg-gray-100 px-3 cursor-pointer",children:[e.jsx("input",{className:"sr-only",type:"file",accept:".png, .jpg, .jpeg",onChange:x}),s.avatarThumb?e.jsxs(e.Fragment,{children:[e.jsx(r.edit,{width:14,height:14})," Изменить фото"]}):e.jsxs(e.Fragment,{children:[e.jsx(r.add,{width:14,height:14})," Добавить фото"]})]})}),s.avatarThumb&&s.avatar&&e.jsxs(e.Fragment,{children:[e.jsx("li",{children:e.jsxs("a",{className:"flex w-full gap-2 items-center h-8 transition-all duration-150 hover:bg-gray-100 px-3",href:s.avatar,target:"_blank",children:[e.jsx(r.visibility,{width:14,height:14})," Просмотреть"]})}),e.jsx("li",{children:e.jsxs("button",{className:"flex w-full gap-2 items-center h-8 transition-all duration-150 hover:bg-gray-100 px-3",type:"button",onClick:g,children:[e.jsx(r.delete,{width:14,height:14})," Удалить фото"]})})]})]})})]})}const he=t.memo(me);function xe({users:s,user:a}){const i=p(G),n=i==null?void 0:i.find(({id:c})=>{var o;return c===((o=a.student)==null?void 0:o.gradeId)});return e.jsxs("header",{className:"relative z-10 lg:flex lg:items-top lg:gap-4",children:[e.jsx(he,{user:a}),e.jsxs("div",{className:"lg:grow lg:mt-20",children:[e.jsxs("h1",{className:"title mb-1",children:[a.surname," ",a.name]}),e.jsxs("span",{className:"flex max-w-max text-center bg-blue-200 text-primary rounded-full text-sm py-1 px-2 leading-none",children:[E[a.role]," ",n&&`${n==null?void 0:n.level} ${n.group}`]})]}),e.jsxs("div",{className:"absolute top-28 right-0 z-10 flex items-center gap-1 lg:static lg:top-0 lg:items-start lg:mt-20",children:[e.jsxs(m,{variant:"light",href:N(u.Users.Show,{id:q(s,a.id)}),children:[e.jsx(r.previous,{width:14,height:14}),e.jsx("span",{className:"sr-only md:not-sr-only",children:"Предыдущий"})]}),e.jsxs(m,{variant:"light",href:N(u.Users.Show,{id:W(s,a.id)}),children:[e.jsx("span",{className:"sr-only md:not-sr-only",children:"Следующий"}),e.jsx(r.next,{width:14,height:14})]})]})]})}const pe=t.memo(xe);function fe({user:s}){return e.jsxs("div",{className:"relative",children:[e.jsx("ul",{className:"flex items-center font-medium text-slate-500 overflow-scroll no-scrollbar py-4 pl-2 -ml-2 pr-7",children:e.jsx("li",{children:e.jsx(O,{className:({isActive:a})=>v("flex items-center h-7 px-2 transition-all duration-150 border border-transparent min-w-max",a&&"rounded shadow bg-white border-gray-200"),to:N(u.Users.Show,{id:s.id}),children:"Профиль"})})}),e.jsx("div",{className:"absolute top-0 right-0 z-10 min-w-6 h-full pointer-events-none bg-gradient-to-l from-gray-100 to-transparent"})]})}const ge=t.memo(fe),je=t.lazy(()=>d(()=>import("./superadmin-info-CP2AV2XY.js"),__vite__mapDeps([22,1,2,3,23,13]))),ue=t.lazy(()=>d(()=>import("./admin-info-CP2AV2XY.js"),__vite__mapDeps([24,1,2,3,23,13]))),be=t.lazy(()=>d(()=>import("./director-info-BMu7T--H.js"),__vite__mapDeps([25,1,2,3,23,13]))),we=t.lazy(()=>d(()=>import("./teacher-info-Dp3hWISY.js"),__vite__mapDeps([26,2,1,3,5,4,23,27,28,13,29]))),_e=t.lazy(()=>d(()=>import("./parent-info-CNAyckMb.js"),__vite__mapDeps([30,2,1,3,5,4,23,27,28,13,31,18]))),Ne=t.lazy(()=>d(()=>import("./student-info-D40jEP9J.js"),__vite__mapDeps([32,2,1,3,5,4,23,27,28,13,29,18]))),ve={superadmin:je,admin:ue,director:be,teacher:we,parent:_e,student:Ne};function ye({user:s}){const a=ve[s.role];return e.jsx(t.Suspense,{fallback:e.jsx(h,{className:"w-10 h-10"}),children:e.jsx(a,{user:s})})}function Me(){const s=P(),a=D(),i=p(B),n=p(M),c=p(H),o=p(Y),l=(o==null?void 0:o.find(x=>x.id===+(s.id||0)))||null;return t.useEffect(()=>{i===_.Idle&&a(U()),n===_.Idle&&a(T()),c===_.Idle&&a(z())},[a,c,n,i]),o?l?e.jsxs("main",{className:"pt-2 pb-40",children:[e.jsx(V,{className:"mb-4",items:[["Справочник пользователей",u.Users.Index],[`${l.name} ${l.surname}`,""]]}),e.jsx(pe,{users:o,user:l}),e.jsx(ge,{user:l}),e.jsxs("div",{className:"flex flex-col gap-4 xl:grid xl:grid-cols-[3fr_1fr]",children:[e.jsxs("div",{className:"flex flex-col gap-4 grow",children:[e.jsx(ee,{user:l}),e.jsx(ye,{user:l})]}),e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsx(ie,{user:l}),e.jsx(oe,{user:l}),e.jsx(de,{user:l}),e.jsx("div",{className:"ml-auto",children:e.jsx(ae,{user:l})})]})]})]}):e.jsx(K,{}):e.jsx(h,{className:"w-8 h-8 m-2"})}export{Me as default};
