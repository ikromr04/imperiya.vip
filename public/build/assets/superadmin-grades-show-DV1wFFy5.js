const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/grades-delete-form-UIW9Yart.js","assets/main-DzOvJ3Bl.js","assets/preload-helper-BfFHrpNk.js","assets/main-CSYpzwAj.css","assets/button-BK2ewXLd.js","assets/icons-B5TgyNC1.js","assets/grades-Cng6ed5l.js","assets/formik.esm-Cpulkf5n.js","assets/grades-edit-form-D8VVY0SC.js","assets/select-field-Dot3bTik.js","assets/cleanable-37L1pogH.js","assets/use-dropdown-D7UlQ3WZ.js","assets/index.browser-OxPLOBIU.js","assets/users-selector-BLV6X7VS.js","assets/index.esm-BCp_SAnH.js"])))=>i.map(i=>d[i]);
import{_ as I}from"./preload-helper-BfFHrpNk.js";import{f as A,a as G,u as c,r,i as v,n as D,v as O,j as s,S as g,A as o,X as h,L as _}from"./main-DzOvJ3Bl.js";import{I as m}from"./icons-B5TgyNC1.js";import{B as P}from"./breadcrumbs-MUZy6f_b.js";import{B as x}from"./button-BK2ewXLd.js";import{M as y}from"./modal-1koiJ247.js";import{T as k}from"./tooltip-BPe22AQm.js";import{g as C,a as U}from"./grades-selector-XXuKk_5g.js";import{g as B,a as L}from"./users-selector-BLV6X7VS.js";import{g as R,a as T}from"./grades-Cng6ed5l.js";const F=r.lazy(()=>I(()=>import("./grades-delete-form-UIW9Yart.js"),__vite__mapDeps([0,1,2,3,4,5,6,7]))),z=r.lazy(()=>I(()=>import("./grades-edit-form-D8VVY0SC.js"),__vite__mapDeps([8,1,2,3,4,5,9,10,7,11,12,13,14])));function Y(){const w=A(),p=G(),u=c(C),N=c(B),a=c(U),i=c(L),[j,b]=r.useState(!1),[f,S]=r.useState(!1),e=(a==null?void 0:a.find(({id:t})=>t===+(w.id||0)))||null,l=i==null?void 0:i.filter(t=>{var d;return((d=t.student)==null?void 0:d.gradeId)===(e==null?void 0:e.id)}),n=i==null?void 0:i.find(({id:t})=>t===(e==null?void 0:e.teacherId));return r.useEffect(()=>{u===v.Idle&&p(D()),N===v.Idle&&p(O())},[p,u,N]),!e||!a?s.jsx(g,{className:"w-8 h-8"}):s.jsxs(s.Fragment,{children:[s.jsxs("main",{className:"pt-4 pb-40",children:[s.jsx(P,{items:[["Все классы",o.Classes.Index],[`${e.level} ${e.group}`,""]]}),s.jsx("header",{className:"flex items-end justify-end mb-4",children:s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsxs(x,{variant:"light",href:h(o.Classes.Show,{id:R(a,e.id)}),children:[s.jsx(m.previous,{width:14,height:14}),s.jsx("span",{className:"sr-only md:not-sr-only",children:"Предыдущий"})]}),s.jsxs(x,{variant:"light",href:h(o.Classes.Show,{id:T(a,e.id)}),children:[s.jsx("span",{className:"sr-only md:not-sr-only",children:"Следующий"}),s.jsx(m.next,{width:14,height:14})]})]})}),s.jsxs("div",{className:"box",children:[s.jsxs("div",{className:"box__header",children:[s.jsxs("h1",{className:"title",children:["Класс ",e.level,s.jsx("sup",{children:'"'}),e.group,s.jsx("sup",{children:'"'})]}),s.jsxs(x,{variant:"light",onClick:()=>b(!0),children:[s.jsx(m.edit,{width:14,height:14}),s.jsx(k,{label:"Редактировать",position:"left"})]})]}),s.jsxs("section",{className:"box__body",children:[s.jsx("h2",{className:"title !text-lg",children:"Руководитель"}),s.jsx("div",{className:"flex flex-wrap gap-1",children:n&&s.jsxs(_,{className:"py-1 px-2 border rounded bg-gray-100 hover:bg-blue-50",to:h(o.Users.Show,{id:n.id}),children:[n.surname," ",n.name," ",n.patronymic]})})]}),s.jsxs("section",{className:"box__body",children:[s.jsxs("h2",{className:"title !text-lg",children:["Ученики (",l==null?void 0:l.length,")"]}),s.jsx("div",{className:"flex flex-wrap gap-1",children:l==null?void 0:l.map(({id:t,surname:d,name:E})=>s.jsxs(_,{className:"py-1 px-2 border rounded bg-gray-100 hover:bg-blue-50",to:h(o.Users.Show,{id:t}),children:[d," ",E]},t))})]})]}),s.jsxs(x,{className:"ml-auto mt-2 md:mt-4",variant:"danger",onClick:()=>S(!0),children:[s.jsx(m.delete,{width:14,height:14}),"Удалить класс"]})]}),f&&s.jsx(y,{isOpen:f,children:s.jsx(r.Suspense,{fallback:s.jsx(g,{className:"w-8 h-8"}),children:s.jsx(F,{grades:a,grade:e,setIsOpen:S},f.toString())})}),j&&s.jsx(y,{isOpen:j,children:s.jsx(r.Suspense,{fallback:s.jsx(g,{className:"w-8 h-8"}),children:s.jsx(z,{grade:e,grades:a,setIsOpen:b},j.toString())})})]})}export{Y as default};
