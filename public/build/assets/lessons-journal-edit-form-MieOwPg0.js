import{u as d,a as l,r as f,h as x,R as b,j as e,af as y,y as c}from"./main-DLHcp_34.js";import{B as h}from"./button-Bb1-8EaV.js";import{S as j}from"./select-field-CATDDC1n.js";import{T as m}from"./text-field-JQl_BxZn.js";import{g,a as S}from"./lessons-selector-BHtJUZ-s.js";import{F as T,a as F}from"./formik.esm-D9UO8hfm.js";function k({dto:p,onSuccess:n}){const o=d(),r=l(g),i=l(S);f.useEffect(()=>{r===x.Idle&&o(b())},[o,r]);const u=async(t,a)=>{a.setSubmitting(!0),await o(y({dto:t,onSuccess:s=>{n&&n(s),c.success("Данные успешно сохранены.")},onValidationError:s=>a.setErrors({...s.errors}),onFail:s=>c.success(s)})),a.setSubmitting(!1)};return e.jsx(T,{initialValues:p,onSubmit:u,children:({isSubmitting:t,setFieldValue:a})=>e.jsxs(F,{className:"flex flex-col gap-2",children:[e.jsx(m,{name:"topic",label:"Тема:"}),e.jsx(m,{name:"homework",label:"Домашнее задание:"}),i&&e.jsx(j,{name:"type_id",label:"Тип:",cleanable:!0,onClean:()=>a("type_id",null),options:i.map(s=>({value:s.id,label:s.name}))}),e.jsx("div",{className:"flex items-center justify-end gap-2 sm:col-span-2 -mt-1",children:e.jsx(h,{className:"!h-8 bg-transparent !text-success shadow-none hover:!bg-transparent",type:"submit",disabled:t,loading:t,variant:"success",children:"Сохранить"})})]})})}export{k as L};
