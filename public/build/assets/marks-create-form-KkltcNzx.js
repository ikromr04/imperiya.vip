import{u,j as e,ad as x,y as c}from"./main-Dw1yuUwf.js";import{c as f,a as j}from"./index.esm-Cn9hwLpj.js";import{B as b}from"./button-CZ8BjX0E.js";import{C as h}from"./content-field-BSM_19N7.js";import{S as g}from"./select-field-CyfcuCvi.js";import{A as v}from"./marks-KWTxiGgr.js";import{F,a as N}from"./formik.esm-Bvm5ZwHr.js";import{T as i}from"./text-field-BKZ9EOHO.js";const w=f().shape({attendance:j().required("Укажите посещаемость.")});function B({dto:l,onSuccess:o}){const m=u(),d=l,p=async(t,s)=>{s.setSubmitting(!0),await m(x({dto:t,onSuccess:a=>{o&&o(a),c.success("Данные успешно сохранены.")},onValidationError:a=>s.setErrors({...a.errors}),onFail:a=>c.success(a)})),s.setSubmitting(!1)};return e.jsx(F,{initialValues:d,validationSchema:w,onSubmit:p,children:({isSubmitting:t,setFieldValue:s,values:a})=>e.jsxs(N,{className:"flex flex-col px-2 gap-2",children:[e.jsx(g,{name:"attendance",label:"Посещаемость",onChange:r=>{const n=r.value;["P","L"].includes(n.toString())||s("score_1",null),s("attendance",n)},options:Object.entries(v).map(([r,n])=>({value:r,label:n}))}),a.attendance&&["P","L"].includes(a.attendance)&&e.jsxs("div",{className:"flex gap-x-2 items-center",children:[e.jsx(i,{className:"grow min-w-0",name:"score_1",label:"Оценка 1"}),e.jsx("span",{className:"translate-y-2",children:"/"}),e.jsx(i,{className:"grow min-w-0",name:"score_2",label:"Оценка 2"})]}),e.jsx(h,{name:"comment",label:"Комментарий"}),e.jsx("div",{className:"flex items-center justify-end gap-2 -mt-1",children:e.jsx(b,{className:"!h-8 bg-transparent !text-success shadow-none hover:!bg-transparent",type:"submit",disabled:t,loading:t,variant:"success",children:"Сохранить"})})]})})}export{B as M};
