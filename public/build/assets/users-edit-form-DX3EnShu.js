import{a as h,u as y,j as e,a8 as g,y as c}from"./main-DOJC8ST-.js";import{B as u}from"./button-BdkHwEk1.js";import{S as n}from"./select-field-m-r1v48W.js";import{T as r}from"./text-field-BEKSXVfD.js";import{F as q,a as w}from"./formik.esm-BjJf2Lh0.js";import{c as x,e as N,a as i}from"./index.esm-Do6kmWbX.js";import{S as v,R as S}from"./users-DUqPc0QS.js";import{a as _}from"./nationalities-selector-sErU_fOp.js";import{L as F}from"./cleanable-rmotnKUR.js";import{P as A}from"./password-field-D_1lded7.js";import"./preload-helper-DPi8upcZ.js";import"./icons-BUoiBP0X.js";import"./use-dropdown-BW2Nsp9S.js";import"./index.browser-OxPLOBIU.js";import"./index-onqUwJuH.js";const E=x().shape({name:i().required("Имя обязательно для заполнения."),surname:i().required("Фамилия обязательна для заполнения."),sex:i().required("Укажите пол."),login:i().required("Обязательное поле."),email:i().email("Неверный адрес электронной почты."),birth_date:i().required("Укажите дату рождения."),nationality_id:N().required("Укажите национальность.").min(1,"Укажите национальность."),address:x({physical_address:i().required("Фактический адрес обязателен."),region:i().required("Укажите регион.")})});function H({user:a,setIsOpen:m}){var d,p;const b=h(),o=y(_),j={name:a.name,surname:a.surname,patronymic:a.patronymic,login:a.login,password:a.password,sex:a.sex,birth_date:a.birthDate,nationality_id:a.nationalityId,email:a.email,address:{physical_address:((d=a.address)==null?void 0:d.physicalAddress)||"",region:((p=a.address)==null?void 0:p.region)||""},whatsapp:a.whatsapp},f=async(t,l)=>{l.setSubmitting(!0),await b(g({id:a.id,dto:t,onSuccess:()=>{c.success("Данные успешно сохранены."),m(!1)},onValidationError:s=>l.setErrors({...s.errors}),onFail:s=>c.error(s)})),l.setSubmitting(!1)};return e.jsx(q,{initialValues:j,validationSchema:E,onSubmit:f,children:({isSubmitting:t,setFieldValue:l})=>e.jsxs(w,{className:"flex flex-col gap-3 md:grid md:grid-cols-2",children:[e.jsx(r,{name:"name",label:"Имя",required:!0}),e.jsx(r,{name:"surname",label:"Фамилия",required:!0}),e.jsx(r,{name:"patronymic",label:"Очество"}),e.jsx(r,{name:"login",label:"Логин",required:!0}),e.jsx(A,{name:"password",label:"Пароль"}),e.jsx(n,{name:"sex",label:"Пол",cleanable:!0,onClean:()=>l("sex",""),options:["male","female"].map(s=>({value:s,label:v[s]})),required:!0}),e.jsx(r,{name:"email",label:"Электронная почта"}),e.jsx(r,{name:"birth_date",type:"date",label:"Дата рождения",required:!0}),o&&e.jsx(n,{name:"nationality_id",label:"Национальность",cleanable:!0,onClean:()=>l("nationality_id",0),options:o.map(s=>({value:s.id,label:s.name}))}),e.jsx(r,{className:"md:col-span-2",name:"address.physical_address",label:"Адрес проживания (фактический)",required:!0}),e.jsx(n,{name:"address.region",label:"Район",options:S.map(s=>({value:s,label:s})),required:!0}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx(F,{label:"WhatsApp"}),e.jsxs("div",{className:"flex gap-1 w-full",children:[e.jsxs("div",{className:"relative",children:[e.jsx(r,{className:"w-[88px]",inputClassname:"pl-7",type:"number",name:"whatsapp.code",placeholder:"Код",required:!0}),e.jsx("span",{className:"absolute top-4 left-3 -translate-y-1/2 text-xl",children:"+"})]}),e.jsx(r,{className:"w-[120px] grow",type:"number",name:"whatsapp.numbers",placeholder:"Номер",required:!0})]})]}),e.jsxs("div",{className:"flex items-center justify-end gap-2 mt-2 sm:col-span-2",children:[e.jsx(u,{className:"justify-center min-w-[92px]",type:"submit",disabled:t,loading:t,variant:"success",children:"Сохранить"}),e.jsx(u,{type:"reset",onClick:()=>m(!1),variant:"danger",children:"Отмена"})]})]})})}export{H as default};
