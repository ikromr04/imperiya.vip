import{u as d,j as e,Y as p,y as u,a as c,r as x,h as f,Z as j,S as y}from"./main-DLHcp_34.js";import{R as a,g as b,a as q}from"./ratings-emt1vHPP.js";import{B as h}from"./button-Bb1-8EaV.js";import{T as t}from"./text-field-JQl_BxZn.js";import{F as g,a as R}from"./formik.esm-D9UO8hfm.js";import{a as S}from"./index-mapehrYe.js";import"./preload-helper-DPi8upcZ.js";import"./icons-OdLsuZAu.js";import"./cleanable-Ndm0y06g.js";import"./index.browser-OxPLOBIU.js";function E({ratingDate:s}){const l=d(),n={id:s.id,years:s.years,quarter1:s.quarter1,quarter2:s.quarter2,semester1:s.semester1,quarter3:s.quarter3,quarter4:s.quarter4,semester2:s.semester2,annual:s.annual,assessment:s.assessment,final:s.final},m=async(r,i)=>{i.setSubmitting(!0),await l(p({dto:r,onSuccess:()=>u.success("Данные успешно сохранены."),onValidationError:o=>i.setErrors({...o.errors}),onFail:o=>u.success(o)})),i.setSubmitting(!1)};return e.jsx(g,{initialValues:n,onSubmit:m,children:({isSubmitting:r})=>e.jsxs(R,{className:"flex flex-col max-w-[1200px] gap-3 bg-white border rounded-md shadow py-4 px-6 md:grid md:grid-cols-3",children:[e.jsx("h2",{className:"font-semibold text-lg leading-none md:col-span-3",children:s.years}),e.jsx(t,{name:"quarter1",type:"date",label:a.quarter1}),e.jsx(t,{name:"quarter2",type:"date",label:a.quarter2}),e.jsx(t,{name:"semester1",type:"date",label:a.semester1}),e.jsx(t,{name:"quarter3",type:"date",label:a.quarter3}),e.jsx(t,{name:"quarter4",type:"date",label:a.quarter4}),e.jsx(t,{name:"semester2",type:"date",label:a.semester2}),e.jsx(t,{name:"annual",type:"date",label:a.annual}),e.jsx(t,{name:"assessment",type:"date",label:a.assessment}),e.jsx(t,{name:"final",type:"date",label:a.final}),e.jsx("div",{className:"flex items-center justify-end gap-2 md:col-span-3",children:e.jsx(h,{type:"submit",disabled:r,loading:r,variant:"success",children:"Сохранить"})})]})})}function I(){const s=d(),l=c(b),n=c(q),m=n==null?void 0:n.find(({years:r})=>r===S());return x.useEffect(()=>{l===f.Idle&&s(j())},[s,l]),e.jsxs("main",{className:"py-2",children:[e.jsx("h1",{className:"title mb-1 px-3",children:"Даты рейтингов"}),m?e.jsx(E,{ratingDate:m}):e.jsx(y,{className:"w-8 h-8"})]})}export{I as default};
