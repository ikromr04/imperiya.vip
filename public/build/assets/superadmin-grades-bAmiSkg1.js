const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/grades-create-form-CnecJ7or.js","assets/main-DLHcp_34.js","assets/preload-helper-DPi8upcZ.js","assets/main-Bd0mlOr_.css","assets/button-Bb1-8EaV.js","assets/icons-OdLsuZAu.js","assets/select-field-CATDDC1n.js","assets/cleanable-Ndm0y06g.js","assets/formik.esm-D9UO8hfm.js","assets/use-dropdown-BLYuosyC.js","assets/index.browser-OxPLOBIU.js","assets/index.esm-BIj9INg2.js"])))=>i.map(i=>d[i]);
import{_ as A}from"./preload-helper-DPi8upcZ.js";import{r as d,a as c,u as I,h as v,m as w,x as N,j as e,S as y,L as p,v as g,A as f}from"./main-DLHcp_34.js";import{B as _}from"./button-Bb1-8EaV.js";import{D as C}from"./data-table-Bg_tFppJ.js";import{M as B}from"./modal--rSb7yot.js";import{g as E,a as F}from"./grades-selector-BzUEWiWt.js";import{g as G,a as U}from"./users-selector-PkA7Q9gb.js";import"./icons-OdLsuZAu.js";import"./use-dropdown-BLYuosyC.js";import"./index-W2lbxK5C.js";const k=d.lazy(()=>A(()=>import("./grades-create-form-CnecJ7or.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11])));function q(){const[u,x]=d.useState(!1),j=c(E),S=c(G),l=c(F),s=c(U),m=I();d.useEffect(()=>{j==v.Idle&&m(w()),S==v.Idle&&m(N())},[m,j,S]);const b=[{id:"name",accessorKey:"name",header:"Класс",size:88,cell:({row:t})=>e.jsxs(p,{className:"text-lg font-semibold flex items-center w-full justify-center",to:g(f.Classes.Show,{id:t.original.id}),children:[t.original.level," ",e.jsx("sup",{children:'"'}),t.original.group,e.jsx("sup",{children:'"'})]}),sortingFn:(t,a)=>{const n=t.original.level,i=a.original.level;return n<i?-1:n>i?1:0}},{id:"teacher",accessorKey:"teacher",header:"Руководитель",size:320,cell:({row:t})=>{const a=s==null?void 0:s.find(({id:n})=>n===t.original.teacherId);if(a)return e.jsxs(p,{className:"block leading-[1.2]",to:g(f.Users.Show,{id:a.id}),children:[a.surname," ",a.name," ",a.patronymic]})},sortingFn:(t,a)=>{var o,r;const n=((o=s==null?void 0:s.find(({id:h})=>h===t.original.teacherId))==null?void 0:o.surname)||"",i=((r=s==null?void 0:s.find(({id:h})=>h===a.original.teacherId))==null?void 0:r.surname)||"";return n.localeCompare(i)}},{id:"students",accessorKey:"students",header:"Ученики",size:240,cell:({row:t})=>e.jsx("div",{className:"flex flex-wrap gap-1 p-1",children:s==null?void 0:s.filter(a=>{var n;return((n=a.student)==null?void 0:n.gradeId)===t.original.id}).map(a=>e.jsxs(p,{className:"py-1 px-2 border rounded bg-gray-100 hover:bg-blue-50 min-w-max",to:g(f.Users.Show,{id:a.id}),children:[a.surname," ",a.name]},a.id))}),sortingFn:(t,a)=>{const n=(s==null?void 0:s.filter(o=>{var r;return((r=o.student)==null?void 0:r.gradeId)===t.original.id}).length)||0,i=(s==null?void 0:s.filter(o=>{var r;return((r=o.student)==null?void 0:r.gradeId)===a.original.id}).length)||0;return n<i?-1:n>i?1:0},meta:{columnClass:"!min-w-none !w-full !max-w-none"}}];return e.jsxs(e.Fragment,{children:[e.jsxs("main",{className:"pt-4 pb-40",children:[e.jsx("header",{className:"flex justify-between px-3 items-end mb-1",children:e.jsxs("h1",{className:"title",children:["Классы (",l==null?void 0:l.length,")"]})}),l?e.jsx(C,{data:l,columns:b,sortingState:[{id:"name",desc:!1}],actions:e.jsx(_,{icon:"add",variant:"success",onClick:()=>x(!0),children:e.jsx("span",{className:"sr-only md:not-sr-only",children:"Добавить"})})}):e.jsx(y,{className:"w-8 h-8"})]}),u&&e.jsx(B,{isOpen:u,children:e.jsx(d.Suspense,{fallback:e.jsx(y,{className:"w-8 h-8"}),children:e.jsx(k,{grades:l||[],setIsOpen:x})})})]})}export{q as default};
