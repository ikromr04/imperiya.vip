const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/grades-delete-form-CLMne831.js","assets/main-BqixXxem.js","assets/preload-helper-BfFHrpNk.js","assets/main-CZMWdHFf.css","assets/button-BGEvgfIe.js","assets/icons-Be0wsgc_.js","assets/formik.esm-BDcV0444.js","assets/breadcrumbs-C_AEJZsS.js","assets/modal-MTkWy12m.js","assets/tooltip-Bu5ey3Kl.js","assets/grades-selector-CTaKf4iy.js","assets/users-selector-BrBwuXWN.js","assets/grades-edit-form-CjTcLqs_.js","assets/select-field-DF48XukS.js","assets/cleanable-YCat7fsy.js","assets/use-dropdown-C0LV8T1I.js","assets/index.browser-OxPLOBIU.js","assets/index.esm-B9vCAfNi.js"])))=>i.map(i=>d[i]);
import{_ as y}from"./preload-helper-BfFHrpNk.js";import{f as O,a as A,u as p,r as l,i as v,n as G,v as D,j as s,S as I,A as m,X as u,L as N}from"./main-BqixXxem.js";import{I as g}from"./icons-Be0wsgc_.js";import{B as C}from"./breadcrumbs-C_AEJZsS.js";import{B as f}from"./button-BGEvgfIe.js";import{M as w}from"./modal-MTkWy12m.js";import{T as P}from"./tooltip-Bu5ey3Kl.js";import{g as k,a as T}from"./grades-selector-CTaKf4iy.js";import{g as U,a as B}from"./users-selector-BrBwuXWN.js";const L=(c,o)=>{const r=c.map(({id:a})=>a),n=r.indexOf(o);if(n===-1)throw new Error("Current grade ID not found in the list of grades");const t=(n+1)%r.length;return r[t]},R=(c,o)=>{const r=c.map(({id:a})=>a),n=r.indexOf(o);if(n===-1)throw new Error("Current grade ID not found in the list of grades");const t=(n-1+r.length)%r.length;return r[t]},z=l.lazy(()=>y(()=>import("./grades-delete-form-CLMne831.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11]))),F=l.lazy(()=>y(()=>import("./grades-edit-form-CjTcLqs_.js"),__vite__mapDeps([12,1,2,3,4,5,13,14,6,15,16,11,17])));function M(){const c=O(),o=A(),r=p(k),n=p(U),t=p(T),a=p(B),[j,_]=l.useState(!1),[b,S]=l.useState(!1),e=(t==null?void 0:t.find(({id:i})=>i===+(c.id||0)))||null,d=a==null?void 0:a.filter(i=>{var x;return((x=i.student)==null?void 0:x.gradeId)===(e==null?void 0:e.id)}),h=a==null?void 0:a.find(({id:i})=>i===(e==null?void 0:e.teacherId));return l.useEffect(()=>{r===v.Idle&&o(G()),n===v.Idle&&o(D())},[o,r,n]),!e||!t?s.jsx(I,{className:"w-8 h-8"}):s.jsxs(s.Fragment,{children:[s.jsxs("main",{className:"pt-4 pb-40",children:[s.jsx(C,{items:[["Все классы",m.Classes.Index],[`${e.level} ${e.group}`,""]]}),s.jsx("header",{className:"flex items-end justify-end mb-4",children:s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsxs(f,{variant:"light",href:u(m.Classes.Show,{id:R(t,e.id)}),children:[s.jsx(g.previous,{width:14,height:14}),s.jsx("span",{className:"sr-only md:not-sr-only",children:"Предыдущий"})]}),s.jsxs(f,{variant:"light",href:u(m.Classes.Show,{id:L(t,e.id)}),children:[s.jsx("span",{className:"sr-only md:not-sr-only",children:"Следующий"}),s.jsx(g.next,{width:14,height:14})]})]})}),s.jsxs("div",{className:"box",children:[s.jsxs("div",{className:"box__header",children:[s.jsxs("h1",{className:"title",children:["Класс ",e.level,s.jsx("sup",{children:'"'}),e.group,s.jsx("sup",{children:'"'})]}),s.jsxs(f,{variant:"light",onClick:()=>_(!0),children:[s.jsx(g.edit,{width:14,height:14}),s.jsx(P,{label:"Редактировать",position:"left"})]})]}),s.jsxs("section",{className:"box__body",children:[s.jsx("h2",{className:"title !text-lg",children:"Руководитель"}),s.jsx("div",{className:"flex flex-wrap gap-1",children:h&&s.jsxs(N,{className:"py-1 px-2 border rounded bg-gray-100 hover:bg-blue-50",to:u(m.Users.Show,{id:h.id}),children:[h.surname," ",h.name," ",h.patronymic]})})]}),s.jsxs("section",{className:"box__body",children:[s.jsxs("h2",{className:"title !text-lg",children:["Ученики (",d==null?void 0:d.length,")"]}),s.jsx("div",{className:"flex flex-wrap gap-1",children:d==null?void 0:d.map(({id:i,surname:x,name:E})=>s.jsxs(N,{className:"py-1 px-2 border rounded bg-gray-100 hover:bg-blue-50",to:u(m.Users.Show,{id:i}),children:[x," ",E]},i))})]})]}),s.jsxs(f,{className:"ml-auto mt-2 md:mt-4",variant:"danger",onClick:()=>S(!0),children:[s.jsx(g.delete,{width:14,height:14}),"Удалить класс"]})]}),b&&s.jsx(w,{isOpen:b,children:s.jsx(l.Suspense,{fallback:s.jsx(I,{className:"w-8 h-8"}),children:s.jsx(z,{grades:t,grade:e,setIsOpen:S},b.toString())})}),j&&s.jsx(w,{isOpen:j,children:s.jsx(l.Suspense,{fallback:s.jsx(I,{className:"w-8 h-8"}),children:s.jsx(F,{grade:e,grades:t,setIsOpen:_},j.toString())})})]})}const Y=Object.freeze(Object.defineProperty({__proto__:null,default:M},Symbol.toStringTag,{value:"Module"}));export{L as g,Y as s};
