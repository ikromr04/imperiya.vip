import{a as h,u as n,j as e,aq as f,y as l}from"./main-BqixXxem.js";import{B as m}from"./button-BGEvgfIe.js";import{C as g}from"./checkbox-BgIlQWkV.js";import{S as d}from"./select-field-DF48XukS.js";import{a as v}from"./subjects-selector-czXSTatn.js";import{a as y}from"./users-selector-BrBwuXWN.js";import{F as N,a as S}from"./formik.esm-BDcV0444.js";import"./preload-helper-BfFHrpNk.js";import"./icons-Be0wsgc_.js";import"./cleanable-YCat7fsy.js";import"./use-dropdown-C0LV8T1I.js";import"./index.browser-OxPLOBIU.js";function R({week:p=0,dto:t,setDTO:r,setLessons:u}){const j=h(),o=n(y),c=n(v),x={id:t.id,subject_id:t.subject_id,teacher_id:t.teacher_id},b=async(i,s)=>{s.setSubmitting(!0),await j(f({week:p,dto:i,onSuccess:a=>{l.success("Расписание успешно обновлен."),r(void 0),u(a)},onValidationError:a=>s.setErrors({...a.errors}),onFail:a=>l.success(a)})),s.setSubmitting(!1)};return e.jsx(N,{initialValues:x,onSubmit:b,children:({isSubmitting:i})=>e.jsxs(S,{children:[e.jsxs("div",{className:"flex items-center justify-between gap-2 mb-4",children:[e.jsx("h3",{className:"title",children:"Редактирование расписания"}),e.jsx(m,{className:"ml-auto",type:"reset",variant:"danger",icon:"close",onClick:()=>r(void 0),children:e.jsx("span",{className:"sr-only",children:"Отмена"})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-x-4 gap-y-2 mb-4",children:[c&&e.jsx(d,{name:"subject_id",label:"Урок",searchable:!0,options:c.map(s=>({value:s.id,label:s.name}))}),o&&e.jsx(d,{name:"teacher_id",label:"Преподователь",searchable:!0,options:o.filter(s=>s.role==="teacher").map(s=>({value:s.id,label:`${s.name} ${s.surname}`}))}),e.jsx(g,{className:"col-span-2",name:"all",label:"Редактировать везде"})]}),e.jsx("div",{className:"flex items-center justify-end gap-2 sm:col-span-2",children:e.jsx(m,{className:"justify-center min-w-[92px]",type:"submit",icon:"edit",disabled:i,loading:i,variant:"success",children:"Сохранить"})})]})})}export{R as default};
