import{a as p,r as n,j as t,c as f,L as b,A as r,l as h,u as i,b as g,g as j,d as w}from"./main-DyZOqu_f.js";import{A}from"./app-logo-Cc84e_dI.js";import{c as N,a as l}from"./index.esm-ChdKR4l3.js";import{F as y,a as S}from"./formik.esm-ngpA7fMQ.js";import{B as v}from"./button-CqoFrGdL.js";import{P as F}from"./password-field-Rxbpoey-.js";import{T as k}from"./text-field-D4LhElGt.js";import"./preload-helper-BfFHrpNk.js";import"./icons-B6vILnyY.js";import"./index-Cel6jvoj.js";import"./cleanable-DkdZPN_b.js";import"./index.browser-OxPLOBIU.js";const B=N().shape({login:l().required("Введите Ваш логин."),password:l().required("Введите Ваш пароль.")});function E({className:s}){const e=p(),m={login:"",password:""},[c,d]=n.useState(!1),x=async(a,o)=>{o.setSubmitting(!0),await e(h({dto:a,onValidationError:u=>o.setErrors({...u.errors}),onBlocked:()=>d(!0)})),o.setSubmitting(!1)};return t.jsx(y,{initialValues:m,validationSchema:B,onSubmit:x,children:({isSubmitting:a})=>t.jsxs(S,{className:f(s,"flex flex-col"),children:[c&&t.jsxs("p",{className:"text-danger leading-[1.2] mb-4",children:["Профиль заблокирован. ",t.jsx("a",{className:"text-blue-600",href:"https://wa.me/+992918339939",target:"_blank",children:"Узнать причину."})]}),t.jsx(k,{name:"login",label:"Логин"}),t.jsxs("div",{className:"flex flex-col mb-5",children:[t.jsx(b,{className:"flex ml-auto transform translate-y-[90%] text-sm text-blue-600 transition-all duration-150 hover:text-blue-400",to:r.Auth.ForgotPassword,children:"Забыли пароль?"}),t.jsx(F,{name:"password",label:"Пароль"})]}),t.jsx(v,{className:"justify-center",type:"submit",disabled:a,loading:a,children:"Войти"})]})})}function G(){const s=i(g),e=i(j);return n.useEffect(()=>{s===w.Auth&&((e==null?void 0:e.role)==="superadmin"||(e==null?void 0:e.role)==="director"?window.location.href=r.Reports.Index:window.location.href=r.Auth.Profile)},[e==null?void 0:e.role,s]),t.jsxs("main",{className:"flex flex-col items-center justify-center min-h-screen bg-illustrations bg-bottom bg-contain bg-no-repeat md:bg-gray-100",children:[t.jsx(A,{className:"mt-8 mb-4 md:mt-12 md:mb-6 xl:mt-0"}),t.jsxs("div",{className:"w-[90vw] max-w-96 mx-auto mb-16 md:bg-white md:shadow-md sm:rounded-lg md:p-10 md:mb-20 xl:mb-28",children:[t.jsx("h1",{className:"title",children:"Вход в онлайн-дневник"}),t.jsxs("p",{className:"text-gray-600 mb-6",children:["Нет аккаунта? ",t.jsx("a",{className:"text-blue-600 transition-all duration-150 hover:text-blue-400",href:"mailto:info@imperiya.vip",children:"Отправьте запрос"})]}),t.jsx(E,{})]})]})}export{G as default};
