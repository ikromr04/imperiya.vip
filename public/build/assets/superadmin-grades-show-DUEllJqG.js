const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/grades-delete-form-DEK4QpTL.js","assets/main-DKRIU25v.js","assets/preload-helper-BfFHrpNk.js","assets/main-DZ3OTwAy.css","assets/button-J2Iqlscs.js","assets/icons-Dws060uV.js","assets/formik.esm-DIqXr-O1.js","assets/breadcrumbs-BIimIOIt.js","assets/modal-5A--hrV7.js","assets/tooltip-DaK-y32F.js","assets/grades-selector-j7gnMaQA.js","assets/users-selector-CgHhQlPM.js","assets/grades-edit-form-BaDYgn1l.js","assets/select-field-DtHzpE1V.js","assets/cleanable-CuKwX42b.js","assets/use-dropdown-Cxrd9zmy.js","assets/index.browser-OxPLOBIU.js","assets/index.esm-CjvMGvqH.js"])))=>i.map(i=>d[i]);
import{_ as y}from"./preload-helper-BfFHrpNk.js";import{f as O,a as A,u as p,r as l,i as v,n as G,v as D,j as s,S as I,A as m,X as u,L as N}from"./main-DKRIU25v.js";import{I as g}from"./icons-Dws060uV.js";import{B as C}from"./breadcrumbs-BIimIOIt.js";import{B as f}from"./button-J2Iqlscs.js";import{M as w}from"./modal-5A--hrV7.js";import{T as P}from"./tooltip-DaK-y32F.js";import{g as k,a as T}from"./grades-selector-j7gnMaQA.js";import{g as U,a as B}from"./users-selector-CgHhQlPM.js";const L=(c,o)=>{const r=c.map(({id:a})=>a),n=r.indexOf(o);if(n===-1)throw new Error("Current grade ID not found in the list of grades");const t=(n+1)%r.length;return r[t]},R=(c,o)=>{const r=c.map(({id:a})=>a),n=r.indexOf(o);if(n===-1)throw new Error("Current grade ID not found in the list of grades");const t=(n-1+r.length)%r.length;return r[t]},z=l.lazy(()=>y(()=>import("./grades-delete-form-DEK4QpTL.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11]))),F=l.lazy(()=>y(()=>import("./grades-edit-form-BaDYgn1l.js"),__vite__mapDeps([12,1,2,3,4,5,13,14,6,15,16,11,17])));function M(){const c=O(),o=A(),r=p(k),n=p(U),t=p(T),a=p(B),[j,S]=l.useState(!1),[b,_]=l.useState(!1),e=(t==null?void 0:t.find(({id:i})=>i===+(c.id||0)))||null,d=a==null?void 0:a.filter(i=>{var x;return((x=i.student)==null?void 0:x.gradeId)===(e==null?void 0:e.id)}),h=a==null?void 0:a.find(({id:i})=>i===(e==null?void 0:e.teacherId));return l.useEffect(()=>{r===v.Idle&&o(G()),n===v.Idle&&o(D())},[o,r,n]),!e||!t?s.jsx(I,{className:"w-8 h-8"}):s.jsxs(s.Fragment,{children:[s.jsxs("main",{className:"pt-4 pb-40",children:[s.jsx(C,{items:[["Все классы",m.Classes.Index],[`${e.level} ${e.group}`,""]]}),s.jsx("header",{className:"flex items-end justify-end mb-4",children:s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsxs(f,{variant:"light",href:u(m.Classes.Show,{id:R(t,e.id)}),children:[s.jsx(g.previous,{width:14,height:14}),s.jsx("span",{className:"sr-only md:not-sr-only",children:"Предыдущий"})]}),s.jsxs(f,{variant:"light",href:u(m.Classes.Show,{id:L(t,e.id)}),children:[s.jsx("span",{className:"sr-only md:not-sr-only",children:"Следующий"}),s.jsx(g.next,{width:14,height:14})]})]})}),s.jsxs("div",{className:"box",children:[s.jsxs("div",{className:"box__header",children:[s.jsxs("h1",{className:"title",children:["Класс ",e.level,s.jsx("sup",{children:'"'}),e.group,s.jsx("sup",{children:'"'})]}),s.jsxs(f,{variant:"light",onClick:()=>S(!0),children:[s.jsx(g.edit,{width:14,height:14}),s.jsx(P,{label:"Редактировать",position:"left"})]})]}),s.jsxs("section",{className:"box__body",children:[s.jsx("h2",{className:"title !text-lg",children:"Руководитель"}),s.jsx("div",{className:"flex flex-wrap gap-1",children:h&&s.jsxs(N,{className:"py-1 px-2 border rounded bg-gray-100 hover:bg-blue-50",to:u(m.Users.Show,{id:h.id}),children:[h.surname," ",h.name," ",h.patronymic]})})]}),s.jsxs("section",{className:"box__body",children:[s.jsxs("h2",{className:"title !text-lg",children:["Ученики (",d==null?void 0:d.length,")"]}),s.jsx("div",{className:"flex flex-wrap gap-1",children:d==null?void 0:d.map(({id:i,surname:x,name:E})=>s.jsxs(N,{className:"py-1 px-2 border rounded bg-gray-100 hover:bg-blue-50",to:u(m.Users.Show,{id:i}),children:[x," ",E]},i))})]})]}),s.jsxs(f,{className:"ml-auto mt-2 md:mt-4",variant:"danger",onClick:()=>_(!0),children:[s.jsx(g.delete,{width:14,height:14}),"Удалить класс"]})]}),b&&s.jsx(w,{isOpen:b,children:s.jsx(l.Suspense,{fallback:s.jsx(I,{className:"w-8 h-8"}),children:s.jsx(z,{grades:t,grade:e,setIsOpen:_},b.toString())})}),j&&s.jsx(w,{isOpen:j,children:s.jsx(l.Suspense,{fallback:s.jsx(I,{className:"w-8 h-8"}),children:s.jsx(F,{grade:e,grades:t,setIsOpen:S},j.toString())})})]})}const Y=Object.freeze(Object.defineProperty({__proto__:null,default:M},Symbol.toStringTag,{value:"Module"}));export{L as g,Y as s};
