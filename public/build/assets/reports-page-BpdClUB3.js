import{a as u,u as l,r as b,i as h,v,n as S,j as e,S as p,L as f,X as w,A as g}from"./main-AaLcc3dp.js";import{D as y}from"./description-list-jOjvK5nk.js";import{R as _}from"./users-DUqPc0QS.js";import{g as A,a as R}from"./grades-selector-hlDu_ePV.js";import{g as G,a as E}from"./users-selector-DxlwkRpS.js";import"./preload-helper-BfFHrpNk.js";function k(){const i=u(),c=l(G),o=l(A),t=l(E),d=l(R);b.useEffect(()=>{c===h.Idle&&i(v()),o===h.Idle&&i(S())},[i,o,c]);const r=(t==null?void 0:t.filter(({role:s})=>s==="student"))||[],m=r.filter(({sex:s})=>s==="female"),x=r.filter(({sex:s})=>s==="male"),j=(t==null?void 0:t.filter(({role:s})=>s==="parent"))||[],N=(t==null?void 0:t.filter(({role:s})=>s==="teacher"))||[];return e.jsxs("main",{className:"py-2 flex flex-col gap-4",children:[e.jsx("h1",{className:"title mb-1 px-3",children:"Отчеты и статистики"}),e.jsxs("section",{className:"box",children:[e.jsx("header",{className:"box__header",children:e.jsx("h2",{className:"title md:!text-lg",children:"Базовая информация"})}),e.jsxs("div",{className:"relative",children:[t?e.jsx(y,{className:"box__body",list:{Ученики:e.jsxs("div",{className:"flex justify-between gap-8",children:[r.length," (девочек ",m.length," / мальчиков ",x.length,")",e.jsx("div",{className:"flex flex-col",children:_.map(s=>e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:s})," (девочек ",m.filter(n=>{var a;return((a=n.address)==null?void 0:a.region)===s}).length," / мальчиков ",x.filter(n=>{var a;return((a=n.address)==null?void 0:a.region)===s}).length,")"]}))})]}),Родители:j.length,Педагоги:N.length}}):e.jsx(p,{className:"mx-4 my-2 w-4 h-4"}),e.jsx("div",{className:"absolute top-[1px] right-0 rounded-br-md z-10 min-w-6 h-[calc(100%-1px)] pointer-events-none bg-gradient-to-l from-white to-transparent"})]})]}),e.jsxs("section",{className:"box",children:[e.jsx("header",{className:"box__header",children:e.jsx("h2",{className:"title md:!text-lg",children:"Список готовых отчетов"})}),e.jsxs("div",{className:"relative",children:[d?e.jsx("div",{className:"box__body",children:e.jsxs("ul",{className:"grid grid-cols-[repeat(auto-fit,minmax(100px,1fr))] gap-4 max-w-[1200px]",children:[d.map(s=>e.jsx("li",{children:e.jsxs(f,{className:"text-blue-600 text-xl font-semibold",to:w(g.Reports.Grade,{id:s.id}),children:[s.level," ",s.group]})},s.id)),e.jsx("li",{className:"flex items-end",children:e.jsx(f,{className:"text-blue-600 text-sx font-semibold",to:g.Reports.Grades,children:"Все классы"})})]})}):e.jsx(p,{className:"mx-4 my-2 w-4 h-4"}),e.jsx("div",{className:"absolute top-[1px] right-0 rounded-br-md z-10 min-w-6 h-[calc(100%-1px)] pointer-events-none bg-gradient-to-l from-white to-transparent"})]})]})]})}export{k as default};
