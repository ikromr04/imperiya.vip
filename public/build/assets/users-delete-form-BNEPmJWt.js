import{a as x,e as g,u as o,r as h,i as j,a3 as S,j as s,as as v,y as l,X as y,A}from"./main-Z-jcqNGw.js";import{c as b,e as F}from"./index.esm-DNI1uskT.js";import{B as p}from"./button-H3fW4CuH.js";import{a as N}from"./users-selector-Bz_QS4wi.js";import{a as R}from"./users-cNeM6DND.js";import{F as U,a as _}from"./formik.esm-CakdETH1.js";import{S as w}from"./select-field-BuGouyWz.js";import{g as E,a as k}from"./reasons-selector-D5mSDu4U.js";import"./preload-helper-BfFHrpNk.js";import"./icons-EbPIw1U1.js";import"./FileSaver.min-asqErhdY.js";import"./users-DUqPc0QS.js";import"./cleanable-D1ZHZcsB.js";import"./use-dropdown-BpS_Hd_P.js";import"./index.browser-OxPLOBIU.js";const q=b().shape({reason_id:F().required("Укажите причину.")}),B={reason_id:""};function T({user:i,setIsOpen:n}){const r=x(),d=g(),u=o(N),c=o(E),m=o(k);h.useEffect(()=>{c===j.Idle&&r(S())},[r,c]);const f=async(a,t)=>{t.setSubmitting(!0),await r(v({id:i.id,reasonId:+a.reason_id,onSuccess:()=>{l.success("Пользователь успешно удален."),n(!1),d(y(A.Users.Show,{id:R(u||[],i.id)}))},onFail:e=>l.error(e)})),t.setSubmitting(!1)};return s.jsx(U,{initialValues:B,validationSchema:q,onSubmit:f,children:({isSubmitting:a,setFieldValue:t})=>s.jsxs(_,{className:"flex flex-col gap-3",children:[s.jsx("p",{children:"Вы уверены что хотите удалить этого пользователья? Все данные связанные с этим пользователем будут удалены."}),m&&s.jsx(w,{name:"reason_id",label:"Укажите причина",onChange:e=>t("reason_id",e.value),options:m.map(e=>({value:e.id,label:e.description})),required:!0}),s.jsxs("div",{className:"flex items-center justify-end gap-2 mt-2 sm:col-span-2",children:[s.jsx(p,{className:"justify-center min-w-[92px]",type:"submit",disabled:a,loading:a,variant:"success",children:"Удалить"}),s.jsx(p,{type:"reset",onClick:()=>n(!1),variant:"danger",children:"Отмена"})]})]})},i.id)}export{T as default};
