import{a as d,u as l,r as f,i as x,O as b,j as e,aw as y,y as c}from"./main-DKRIU25v.js";import{B as j}from"./button-J2Iqlscs.js";import{S as g}from"./select-field-DtHzpE1V.js";import{T as m}from"./text-field-Cf3pDNFZ.js";import{g as h,a as S}from"./lessons-selector-BnoMzZHx.js";import{F as T,a as F}from"./formik.esm-DIqXr-O1.js";function k({dto:p,onSuccess:n}){const o=d(),i=l(h),r=l(S);f.useEffect(()=>{i===x.Idle&&o(b())},[o,i]);const u=async(t,a)=>{a.setSubmitting(!0),await o(y({dto:t,onSuccess:s=>{n&&n(s),c.success("Данные успешно сохранены.")},onValidationError:s=>a.setErrors({...s.errors}),onFail:s=>c.success(s)})),a.setSubmitting(!1)};return e.jsx(T,{initialValues:p,onSubmit:u,children:({isSubmitting:t,setFieldValue:a})=>e.jsxs(F,{className:"flex flex-col gap-2",children:[e.jsx(m,{name:"topic",label:"Тема:"}),e.jsx(m,{name:"homework",label:"Домашнее задание:"}),r&&e.jsx(g,{name:"type_id",label:"Тип:",cleanable:!0,onClean:()=>a("type_id",null),options:r.map(s=>({value:s.id,label:s.name}))}),e.jsx("div",{className:"flex items-center justify-end gap-2 sm:col-span-2 -mt-1",children:e.jsx(j,{className:"!h-8 bg-transparent !text-success shadow-none hover:!bg-transparent",type:"submit",disabled:t,loading:t,variant:"success",children:"Сохранить"})})]})})}export{k as L};
