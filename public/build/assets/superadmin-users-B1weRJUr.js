import{j as s,c as N,r as M,a as te,u as $,i as P,v as ae,n as ne,k as le,m as ie,t as _,L as W,X as V,A as U,S as re,a8 as oe,y as de}from"./main-DOJC8ST-.js";import{g as ce,a as me}from"./users-selector-BjidioDu.js";import{I as y}from"./icons-BUoiBP0X.js";import{S as X,a as ue,b as q,R as ge}from"./users-DUqPc0QS.js";import{g as he,a as xe}from"./grades-selector-DTsrrSJ9.js";import{n as fe}from"./index.browser-OxPLOBIU.js";import{e as pe,f as be}from"./users-Hz3Ye1qr.js";import{u as Y}from"./use-dropdown-BW2Nsp9S.js";import{B as K}from"./button-BdkHwEk1.js";import{g as je,a as ye}from"./nationalities-selector-sErU_fOp.js";import{g as Ne,a as ve}from"./professions-selector-B6lCWbMm.js";import{C as we}from"./copy-button-BFLhE8ax.js";import{f as O,u as Ce,g as ke,a as Se,b as Ie,c as Fe}from"./index-CqdUPSGb.js";import"./preload-helper-DPi8upcZ.js";import"./FileSaver.min-Cel3sAVr.js";function J({label:n,required:h,...p}){if(n)return s.jsxs("label",{className:"relative z-0 rounded flex max-w-max text-sm text-gray-500 ml-2",...p,children:[n,h&&s.jsx("span",{className:"text-error transform scale-[1.4] translate-y-[10%] translate-x-[16%]",children:"*"})]})}function ze({className:n,...h}){return s.jsx("input",{...h,className:N("flex grow bg-gray-50 min-w-0 border border-gray-200 rounded h-8 px-4 leading-none text-base focus:outline-none hover:bg-gray-100 focus:border-primary focus:bg-gray-100",n)})}function Z({className:n,onClean:h}){return s.jsxs("button",{className:N(n,"flex items-center justify-center h-full w-8 transform -translate-y-1/2"),type:"button",onClick:()=>h&&h(""),children:[s.jsx(y.close,{width:12}),s.jsx("span",{className:"sr-only",children:"Очистить поле"})]})}function Ae({element:n}){if(n)return s.jsx("div",{className:"absolute right-[1px] top-[1px] rounded-r-[3px] transform w-[30px] h-[30px] flex justify-center items-center",children:n})}function De({element:n}){if(n)return s.jsx("div",{className:"absolute left-[1px] top-[1px] rounded-r-[3px] transform w-[30px] h-[30px] flex justify-center items-center",children:n})}function L({className:n,label:h,value:p,onChange:C,required:k,before:v,after:x,...u}){const m=fe();return s.jsxs("div",{className:N(n,"flex flex-col"),children:[s.jsx(J,{required:k,label:h,htmlFor:m}),s.jsxs("div",{className:"relative flex",children:[s.jsx(De,{element:v}),s.jsx(ze,{className:N(x?"pr-16":"pr-8",v&&"pl-8"),id:m,value:p,...u,onChange:i=>C&&C(i.target.value)}),p&&s.jsx(Z,{className:N("absolute top-1/2",x?"right-8":"right-0"),onClean:()=>C&&C("")}),s.jsx(Ae,{element:x})]})]})}function T({className:n,inputClass:h,value:p,onChange:C,options:k,label:v,placeholder:x}){const u=M.useId(),{ref:m,menuRef:i,isOpen:r,setIsOpen:I}=Y(),D=()=>{var S;return p?(S=k.find(z=>z.value===p))==null?void 0:S.label:s.jsx("span",{className:"text-[#a8a3b7]",children:x})};return s.jsxs("div",{ref:m,className:N(n,"relative flex flex-col"),children:[s.jsx(J,{label:v,htmlFor:u}),s.jsxs("div",{className:"relative flex",children:[s.jsx("button",{className:N("flex items-center min-h-8 grow bg-gray-50 min-w-0 border border-gray-200 rounded pl-4 pr-8 leading-none text-base focus:outline-none hover:bg-gray-100 focus:border-primary focus:bg-gray-100",h),id:u,type:"button",onClick:S=>!S.target.classList.contains("remove-selection")&&I(!r),children:D()}),p&&s.jsx(Z,{className:N("absolute right-0 top-1/2"),onClean:()=>C("")})]}),s.jsx("div",{ref:i,className:N("absolute top-[calc(100%+4px)] right-0 z-10 border rounded-md pb-1 bg-white shadow-sm text-sm min-w-max w-full text-gray-500",r?"visible opacity-100":"invisible opacity-0"),children:s.jsx("ul",{className:"max-h-56 overflow-y-auto scrollbar-y",children:k.map(S=>s.jsx("li",{children:s.jsx("button",{className:"flex w-full items-center h-8 transition-all duration-150 hover:bg-green-50 px-3",type:"button",onClick:()=>{C(S.value),I(!1)},children:S.label})},S.value))})})]})}function Re({header:n,columnPinning:h,setColumnPinning:p,setColumnVisibility:C}){var i,r,I,D,S,z,e,t;const{ref:k,isOpen:v,setIsOpen:x,menuRef:u}=Y(),m=async()=>{if(k.current&&u.current){await x(!v);const a=k.current.getBoundingClientRect();u.current.style.top=`${a.top+a.height+12}px`,u.current.style.left=`${a.left+a.width}px`;const l=u.current.getBoundingClientRect();l.right>window.innerWidth&&(u.current.style.transform=`translateX(-${l.right-window.innerWidth+32}px)`)}};return s.jsxs("div",{ref:k,className:"relative ml-auto column-filter",children:[s.jsx("button",{className:N("flex md:hidden justify-center items-center min-w-6 min-h-6 rounded-full bg-gray-100 hover:bg-gray-200",(i=h.left)!=null&&i.includes(n.column.id)||(r=h.right)!=null&&r.includes(n.column.id)||n.column.getCanFilter()?"flex text-error":"group-hover:flex"),onClick:m,children:s.jsx(y.moreVert,{width:3})}),s.jsxs("div",{ref:u,className:N("fixed top-full z-30 min-w-max flex-col py-1 bg-white rounded border shadow transform font-normal",v?"flex":"hidden"),onClick:a=>!a.target.closest(".column-filter-header")&&x(!1),children:[s.jsxs("div",{className:"flex flex-col column-filter-header px-3 py-1",children:[s.jsx("h3",{className:"text-sm leading-none text-gray-400 mb-1",children:O(n.column.columnDef.header,n.getContext())}),(D=(I=n.column.columnDef.meta)==null?void 0:I.renderFilter)==null?void 0:D.call(I,n.column,x)]}),s.jsx("hr",{className:"my-1"}),!((S=h.left)!=null&&S.includes(n.column.id))&&s.jsxs("button",{className:"flex items-center gap-2 pl-3 pr-4 py-1 transition-all duration-150 hover:bg-gray-100",type:"button",onClick:()=>p(a=>{var l;return{left:a.left&&(a.left.includes(n.column.id)?[...a.left]:[...a.left,n.column.id]),right:(l=a.right)==null?void 0:l.filter(d=>d!==n.column.id)}}),children:[s.jsx("span",{className:"flex items-center justify-center w-4 h-4",children:s.jsx(y.keep,{className:"transform rotate-[30deg]",width:10})}),"Закрепить слева"]}),!((z=h.right)!=null&&z.includes(n.column.id))&&s.jsxs("button",{className:"flex items-center gap-2 pl-3 pr-4 py-1 transition-all duration-150 hover:bg-gray-100",type:"button",onClick:()=>p(a=>{var l;return{left:(l=a.left)==null?void 0:l.filter(d=>d!==n.column.id),right:a.right&&(a.right.includes(n.column.id)?[...a.right]:[...a.right,n.column.id])}}),children:[s.jsx("span",{className:"flex items-center justify-center w-4 h-4",children:s.jsx(y.keep,{className:"transform -rotate-[30deg]",width:10})}),"Закрепить справа"]}),(((e=h.right)==null?void 0:e.includes(n.column.id))||((t=h.left)==null?void 0:t.includes(n.column.id)))&&s.jsxs("button",{className:"flex items-center gap-2 pl-3 pr-4 py-1 transition-all duration-150 hover:bg-gray-100",type:"button",onClick:()=>p(a=>{var l,d;return{left:(l=a.left)==null?void 0:l.filter(g=>g!==n.column.id),right:(d=a.right)==null?void 0:d.filter(g=>g!==n.column.id)}}),children:[s.jsx("span",{className:"flex items-center justify-center w-4 h-4",children:s.jsx(y.keep,{className:"opacity-0",width:10})}),"Открепить"]}),s.jsx("hr",{className:"my-1"}),s.jsxs("button",{className:"flex items-center gap-2 pl-3 pr-4 py-1 transition-all duration-150 hover:bg-gray-100",type:"button",onClick:()=>C(a=>({...a,[n.column.id]:!1})),children:[s.jsx("span",{className:"flex items-center justify-center w-4 h-4",children:s.jsx(y.visibilityOff,{width:16})}),"Скрыть столбец"]})]})]})}function $e({table:n,columnVisibility:h,setColumnVisibility:p}){const{ref:C,isOpen:k,setIsOpen:v}=Y(),x=n.getAllColumns().map(m=>({id:m.columnDef.id,header:m.columnDef.header})),u=m=>i=>{i.target.checked?p(r=>({...r,[m]:!0})):p(r=>({...r,[m]:!1}))};return s.jsxs("div",{ref:C,className:"relative z-30",children:[s.jsxs("button",{className:"flex items-center gap-2 h-7 px-1 text-blue-700",type:"button",onClick:()=>v(!k),children:[s.jsx(y.viewColumn,{width:16}),s.jsx("span",{className:"sr-only md:not-sr-only",children:"Столбцы"})]}),s.jsx("div",{className:N("absolute left-0 top-full bg-white py-1 border rounded shadow max-h-[240px] overflow-y-auto overflow-x-hidden styled-scrollbar",k?"visible opacity-100":"invisible opacity-0"),children:x.map(m=>s.jsxs("label",{className:"flex items-center gap-2 min-w-max pl-3 pr-5 h-8 transition-all duration-150 hover:bg-gray-100 cursor-pointer",children:[s.jsx("input",{type:"checkbox",onChange:u(m.id),checked:h[m.id]===void 0?!0:h[m.id]}),m.header]},m.id))})]})}const Le=16,Me=[],Te={},Ee={left:[],right:[]};function Pe({data:n,columns:h,pageSize:p=Le,sortingState:C=Me,visibilityState:k=Te,columnPinningState:v=Ee,actions:x,onExport:u,searchValue:m,onSearchInput:i}){const[r,I]=M.useState(""),[D,S]=M.useState({pageIndex:0,pageSize:p}),[z,e]=M.useState(C),[t,a]=M.useState(k),[l,d]=M.useState(v),g=Ce({data:n,columns:h,defaultColumn:{maxSize:Number.MAX_SAFE_INTEGER,sortDescFirst:!1,enableSorting:!0,enableColumnFilter:!1},getCoreRowModel:Fe(),getSortedRowModel:Ie(),getFilteredRowModel:Se(),getPaginationRowModel:ke(),state:{sorting:z,globalFilter:r,columnVisibility:t,pagination:D,columnPinning:l},onSortingChange:e,onGlobalFilterChange:I,onColumnVisibilityChange:a,onPaginationChange:S,onColumnPinningChange:d}),j=g.getPageCount(),b=g.getState().pagination.pageIndex+1,Q=()=>{const c=[];if(j<=7)for(let f=1;f<=j;f++)c.push(f);else{c.push(1),b>4&&c.push("...");const f=Math.max(2,b-2),w=Math.min(j-1,b+2);for(let F=f;F<=w;F++)c.push(F);b<j-3&&c.push("..."),c.push(j)}return c},B=g.getHeaderGroups()[0].headers.map(c=>({id:c.column.id,size:c.getSize()})),G=c=>{if(l.left){const o=l.left.findIndex(w=>w===c);return o&&o<0?{}:{left:`${l.left.reduce((w,F,A)=>{var R;return A<o&&(w+=((R=B.find(E=>E.id===F))==null?void 0:R.size)||0),w},0)}px`}}return{}},H=c=>{if(l.right){const o=l.right.findIndex(w=>w===c);return o&&o<0?{}:{right:`${l.right.reduce((w,F,A)=>{var R;return A<o&&(w+=((R=B.find(E=>E.id===F))==null?void 0:R.size)||0),w},0)}px`}}return{}},ee=c=>{const o=y[c==="desc"?"arrowDownwardAlt":"arrowUpwardAlt"];return s.jsx("span",{className:N("flex justify-center items-center min-w-6 min-h-6 rounded-full hover:bg-black/5",!c&&"hidden opacity-40 group-hover:flex"),children:s.jsx(o,{width:10})})},se=c=>{i?i(c):I(c.target.value)};return s.jsxs("div",{className:"flex flex-col rounded-md shadow border bg-white overflow-scroll max-h-[calc(100vh-42px)] styled-scrollbar text-sm md:text-[16px] md:max-h-[calc(100vh-48px)]",children:[s.jsxs("div",{className:"sticky left-0 z-50 flex gap-2 p-1 border-b w-full",children:[s.jsx($e,{table:g,columnVisibility:t,setColumnVisibility:a}),s.jsxs("label",{className:"flex grow items-center gap-1 h-7 cursor-pointer text-blue-700",children:[s.jsx(y.search,{width:14}),s.jsx("input",{className:"flex cursor-pointer focus:cursor-auto grow min-w-none w-full focus:outline-none placeholder:text-inherit focus:placeholder:font-normal focus:placeholder:text-gray-400",type:"search",placeholder:"Искать",value:m||r,onInput:se})]}),s.jsxs("div",{className:"flex gap-1",children:[u&&s.jsx(K,{className:"max-h-7",icon:"fileExport",variant:"light",onClick:()=>u(n,t),children:s.jsx("span",{className:"sr-only md:not-sr-only",children:"Экспорт"})}),x]})]}),s.jsx("div",{className:"sticky top-0 z-40 shadow min-w-max",children:g.getHeaderGroups().map(c=>s.jsxs("div",{className:"flex font-semibold min-h-7",children:[s.jsx("div",{className:"flex items-center justify-center px-1 min-w-8 max-w-8 bg-gray-100 md:px-2 md:min-w-10 md:max-w-10",children:"№"}),c.headers.map(o=>{var f,w,F,A,R;return s.jsxs("div",{className:N("flex items-center text-start bg-gray-100 cursor-pointer group border-gray-200 px-1 md:px-2",((f=l.left)==null?void 0:f.includes(o.column.id))&&"sticky z-10 border-r",((w=l.right)==null?void 0:w.includes(o.column.id))&&"sticky z-10 border-l",(F=o.column.columnDef.meta)==null?void 0:F.columnClass),onClick:E=>!E.target.closest(".column-filter")&&o.column.toggleSorting(),style:{minWidth:`${o.getSize()}px`,width:`${o.getSize()}px`,maxWidth:`${o.getSize()}px`,...G(o.column.id),...H(o.column.id)},children:[(A=o.column.columnDef.meta)!=null&&A.renderHeader?(R=o.column.columnDef.meta)==null?void 0:R.renderHeader(o.column):s.jsx("span",{className:"text-start truncate select-none",children:O(o.column.columnDef.header,o.getContext())}),o.column.getCanSort()&&ee(o.column.getIsSorted()),s.jsx(Re,{header:o,columnPinning:l,setColumnPinning:d,setColumnVisibility:a})]},o.id)})]},c.id))}),s.jsx("div",{className:"min-w-max",children:g.getRowModel().rows.map((c,o)=>s.jsxs("div",{className:N("flex",o%2?"bg-gray-50":"bg-white"),children:[s.jsxs("div",{className:N("flex items-center justify-end p-1 min-w-8 max-w-8 md:p-2 md:min-w-10 md:max-w-10",o%2?"bg-gray-50":"bg-white"),children:[(b-1)*p+o+1,"."]}),c.getVisibleCells().map(f=>{var w,F,A;return s.jsx("div",{className:N("flex items-center p-1 md:p-2",o%2?"bg-gray-50":"bg-white",((w=l.left)==null?void 0:w.includes(f.column.id))&&"sticky left-0 z-10 border-r",((F=l.right)==null?void 0:F.includes(f.column.id))&&"sticky right-0 z-10 border-l",(A=f.column.columnDef.meta)==null?void 0:A.columnClass),style:{minWidth:`${f.column.getSize()}px`,width:`${f.column.getSize()}px`,maxWidth:`${f.column.getSize()}px`,...G(f.column.id),...H(f.column.id)},children:O(f.column.columnDef.cell,f.getContext())},JSON.stringify(f))})]},JSON.stringify(c.original)))}),s.jsx("div",{className:"sticky bottom-0 left-0 z-10 p-1 border-t bg-gray-100",children:s.jsxs("div",{className:"flex w-max ml-auto",children:[s.jsx("button",{className:"flex justify-center items-center h-7 w-7 border-transparent rounded-md border transform disabled:opacity-50 disabled:pointer-events-none",onClick:()=>g.previousPage(),disabled:!g.getCanPreviousPage(),children:s.jsx(y.previous,{width:7})}),Q().map((c,o)=>s.jsx("button",{className:N("flex justify-center items-center h-7 rounded-md border transform hover:font-bold",b===c?"w-10 bg-white border-gray-200 pointer-events-none":"w-8 border-transparent",c==="..."?"pointer-events-none":"disabled:opacity-50 disabled:pointer-events-none"),onClick:()=>typeof c=="number"&&g.setPageIndex(c-1),disabled:c==="...",children:c},o)),s.jsx("button",{className:"flex justify-center items-center h-7 w-7 border-transparent rounded-md border transform disabled:opacity-50 disabled:pointer-events-none",onClick:()=>g.nextPage(),disabled:!g.getCanNextPage(),children:s.jsx(y.next,{width:7})})]})})]})}function es(){var S,z;const n=te(),h=$(ce),p=$(he),C=$(je),k=$(Ne),v=$(me),x=$(xe),u=$(ye),m=$(ve),[i,r]=M.useState({});M.useEffect(()=>{h===P.Idle&&n(ae()),p===P.Idle&&n(ne()),C===P.Idle&&n(le()),k===P.Idle&&n(ie())},[n,p,C,k,h]);const I=(e,t)=>()=>{n(oe({id:e,dto:{blocked_at:t?_().format("YYYY-MM-DD HH:mm:ss"):null},onFail:de.error}))},D=[{id:"avatarThumb",accessorKey:"avatarThumb",header:"Фото",size:64,cell:({row:e})=>s.jsxs("span",{className:"relative z-0 flex min-w-12 max-w-12 min-h-12 max-h-12 rounded-full bg-gray-100 overflow-hidden",children:[e.original.avatarThumb&&s.jsx("img",{className:"absolute z-10 top-0 left-0 w-full h-full object-cover",src:e.original.avatarThumb,width:200,height:200,alt:e.original.name}),s.jsx(y.user,{className:"text-gray-300",width:48,height:48})]})},{id:"name",accessorKey:"name",header:"ФИО",size:240,cell:({row:e})=>s.jsxs(W,{className:"flex leading-none",to:V(U.Users.Show,{id:e.original.id}),children:[e.original.surname," ",e.original.name," ",e.original.patronymic]}),enableColumnFilter:!!i.name,meta:{renderFilter:()=>s.jsx(L,{placeholder:"Искать...",value:i.name||"",onChange:e=>r(t=>({...t,name:e})),onInput:e=>r(t=>({...t,name:e.target.value}))})}},{id:"sex",accessorKey:"sex",header:"Пол",size:64,cell:({row:e})=>e.original.sex==="male"?s.jsx(y.male,{className:"flex text-blue-600",width:20,height:20}):s.jsx(y.female,{className:"flex text-pink-600",width:20,height:20}),enableColumnFilter:!!i.sex,meta:{renderFilter:()=>s.jsx(T,{placeholder:"--Выбрать--",options:[{value:"male",label:X.male},{value:"female",label:X.female}],value:i.sex||"",onChange:e=>r(t=>({...t,sex:e}))})}},{id:"grade",accessorKey:"grade",header:"Класс",size:80,cell:({row:e})=>{const t=x==null?void 0:x.find(({id:a})=>{var l;return a===((l=e.original.student)==null?void 0:l.gradeId)});if(t)return s.jsxs(W,{className:"flex w-max text-lg font-semibold",to:V(U.Classes.Show,{id:t.id}),children:[t.level," ",t.group]})},sortingFn:(e,t)=>{var d,g;const a=((d=x==null?void 0:x.find(({id:j})=>{var b;return j===((b=e.original.student)==null?void 0:b.gradeId)}))==null?void 0:d.level.toString())||"",l=((g=x==null?void 0:x.find(({id:j})=>{var b;return j===((b=t.original.student)==null?void 0:b.gradeId)}))==null?void 0:g.level.toString())||"";return a.localeCompare(l)},enableColumnFilter:!!i.grade,meta:{renderFilter:()=>s.jsx(T,{placeholder:"--Выбрать--",options:(x||[]).map(e=>({value:e.id.toString(),label:`${e.level} ${e.group}`})),value:i.grade||"",onChange:e=>r(t=>({...t,grade:e}))})}},{id:"role",accessorKey:"role",header:"Позиция",size:130,cell:({row:e})=>s.jsx("span",{className:"flex max-w-max text-center bg-blue-200 text-primary rounded-full text-sm py-1 px-2 leading-none",children:q[e.original.role]}),enableColumnFilter:!!i.role,meta:{renderFilter:()=>s.jsx(T,{placeholder:"--Выбрать--",options:ue.map(e=>({value:e,label:q[e]})),value:i.role||"",onChange:e=>r(t=>({...t,role:e}))})}},{id:"phoneNumbers",accessorKey:"phoneNumbers",header:"Телефоны",size:140,cell:({row:e})=>{var t;return e.original.phoneNumbers&&s.jsx("div",{className:"flex flex-col",children:(t=e.original.phoneNumbers)==null?void 0:t.map(a=>s.jsxs("a",{className:"font-medium min-w-max",href:`tel:+${a.code}${a.numbers}`,children:["+",`${a.code} ${a.numbers}`]},a.numbers))})},enableColumnFilter:!!i.phone,meta:{renderFilter:()=>s.jsx(L,{placeholder:"Искать...",value:i.phone||"",onInput:e=>r(t=>({...t,phone:e.target.value})),onChange:e=>r(t=>({...t,phone:e}))})}},{id:"whatsapp",accessorKey:"whatsapp",header:"WhatsApp",size:140,cell:({row:e})=>e.original.whatsapp&&s.jsx("div",{className:"flex flex-col",children:s.jsxs("a",{className:"font-medium min-w-max",href:`https://wa.me/+${e.original.whatsapp.code}${e.original.whatsapp.numbers}`,target:"_blank",children:["+",`${e.original.whatsapp.code} ${e.original.whatsapp.numbers}`]},e.original.whatsapp.numbers)}),enableColumnFilter:!!i.whatsapp,meta:{renderFilter:()=>s.jsx(L,{placeholder:"Искать...",value:i.whatsapp||"",onInput:e=>r(t=>({...t,whatsapp:e.target.value})),onChange:e=>r(t=>({...t,whatsapp:e}))})}},{id:"email",accessorKey:"email",header:"Электронная почта",size:180,cell:({row:e})=>e.original.email&&s.jsx("a",{className:"text-blue-500 font-normal",href:`mailto:${e.original.email}`,children:e.original.email}),enableColumnFilter:!!i.email,meta:{renderFilter:()=>s.jsx(L,{placeholder:"Искать...",value:i.email||"",onInput:e=>r(t=>({...t,email:e.target.value})),onChange:e=>r(t=>({...t,email:e}))})}},{id:"login",accessorKey:"login",header:"Логин",size:220,enableColumnFilter:!!i.login,meta:{renderFilter:()=>s.jsx(L,{placeholder:"Искать...",value:i.login||"",onInput:e=>r(t=>({...t,login:e.target.value})),onChange:e=>r(t=>({...t,login:e}))})}},{id:"password",accessorKey:"password",header:"Пароль",size:220,enableColumnFilter:!!i.password,cell:({row:e})=>s.jsx(we,{string:e.original.password??"",children:"Скопировать"}),meta:{renderFilter:()=>s.jsx(L,{value:i.password||"",onInput:e=>r(t=>({...t,password:e.target.value})),onChange:e=>r(t=>({...t,password:e}))})}},{id:"birthDate",accessorKey:"birthDate",header:"Дата рождения",size:140,cell:({row:e})=>e.original.birthDate&&_(e.original.birthDate).format("DD MMM YYYY")},{id:"address",accessorKey:"address",header:"Адрес",size:280,enableColumnFilter:!!((S=i.address)!=null&&S.physicalAddress||(z=i.address)!=null&&z.region),cell:({row:e})=>e.original.address&&s.jsxs("div",{className:"leading-[1.1]",children:[e.original.address.region!=="За пределами города"&&"район ",e.original.address.region,", ",e.original.address.physicalAddress]}),sortingFn:(e,t)=>{const a=e.original.address?`${e.original.address.region}, ${e.original.address.physicalAddress}`:"",l=t.original.address?`${t.original.address.region}, ${t.original.address.physicalAddress}`:"";return a.localeCompare(l)},meta:{renderFilter:()=>{var e,t;return s.jsxs("div",{className:"flex flex-col gap-2",children:[s.jsx(L,{placeholder:"Искать...",value:((e=i.address)==null?void 0:e.physicalAddress)||"",onInput:a=>r(l=>{var d;return{...l,address:{physicalAddress:a.target.value,region:((d=l.address)==null?void 0:d.region)||""}}}),onChange:a=>r(l=>{var d;return{...l,address:{physicalAddress:a,region:((d=l.address)==null?void 0:d.region)||""}}})}),s.jsx(T,{placeholder:"--Район--",options:ge.map(a=>({value:a,label:a})),value:((t=i.address)==null?void 0:t.region)||"",onChange:a=>r(l=>{var d;return{...l,address:{physicalAddress:((d=l.address)==null?void 0:d.physicalAddress)||"",region:a}}})})]})}}},{id:"nationality",accessorKey:"nationality",header:"Национальность",size:160,enableColumnFilter:!!i.nationality,cell:({row:e})=>{var t;return(t=u==null?void 0:u.find(a=>a.id===e.original.nationalityId))==null?void 0:t.name},sortingFn:(e,t)=>{var d,g;const a=((d=u==null?void 0:u.find(({id:j})=>j===e.original.nationalityId))==null?void 0:d.name)||"",l=((g=u==null?void 0:u.find(({id:j})=>j===t.original.nationalityId))==null?void 0:g.name)||"";return a.localeCompare(l)},meta:{renderFilter:()=>s.jsx(T,{placeholder:"--Выбрать--",options:(u||[]).map(e=>({value:e.id.toString(),label:e.name})),value:i.nationality||"",onChange:e=>r(t=>({...t,nationality:e}))})}},{id:"profession",accessorKey:"profession",header:"Сфера деятельности",size:200,enableColumnFilter:!!i.professionId,cell:({row:e})=>{var t,a;return m&&((t=e.original.parent)==null?void 0:t.professionId)&&((a=m.find(({id:l})=>{var d;return l===((d=e.original.parent)==null?void 0:d.professionId)}))==null?void 0:a.name)},sortingFn:(e,t)=>{var d,g;const a=((d=m==null?void 0:m.find(({id:j})=>{var b;return j===((b=e.original.parent)==null?void 0:b.professionId)}))==null?void 0:d.name)||"",l=((g=m==null?void 0:m.find(({id:j})=>{var b;return j===((b=t.original.parent)==null?void 0:b.professionId)}))==null?void 0:g.name)||"";return a.localeCompare(l)},meta:{renderFilter:()=>s.jsx("div",{className:"flex flex-col gap-2",children:s.jsx(T,{options:(m||[]).map(e=>({value:e.id.toString(),label:e.name})),value:i.professionId||"",onChange:e=>r(t=>({...t,professionId:e}))})})}},{id:"blockedAt",accessorKey:"blockedAt",header:"Блокировка",size:160,cell:({row:e})=>e.original.blockedAt?s.jsxs(s.Fragment,{children:[s.jsx(K,{className:"mb-1",variant:"danger",onClick:I(e.original.id,!1),children:"Разблокировать"}),s.jsxs("span",{className:"flex text-sm leading-none text-danger",children:["Заблокирован с ",s.jsx("br",{})," ",_(e.original.blockedAt).format("DD MMMM YYYY HH:mm")]})]}):s.jsx(K,{variant:"light",onClick:I(e.original.id,!0),children:"Заблокировать"})},{id:"talents",accessorKey:"talents",header:"Таланты",size:200,enableColumnFilter:!!i.talents,cell:({row:e})=>{var t;return(t=e.original.student)==null?void 0:t.talents},meta:{renderFilter:()=>s.jsx("div",{className:"flex flex-col gap-2",children:s.jsx(L,{placeholder:"Искать...",value:i.talents||"",onInput:e=>r(t=>({...t,talents:e.target.value})),onChange:e=>r(t=>({...t,talents:e}))})})}},{id:"socialLinks",accessorKey:"socialLinks",header:"Социальные сети",size:148,cell:({row:e})=>{var t,a,l,d,g,j,b;return s.jsxs("div",{className:"flex flex-wrap gap-2 items-center",children:[((t=e.original.socialLink)==null?void 0:t.facebook)&&s.jsx("a",{className:"flex shadow-md rounded-full transition-all duration-150 hover:shadow-none",href:e.original.socialLink.facebook,target:"_blank",children:s.jsx(y.facebook,{width:24,height:24})}),((a=e.original.socialLink)==null?void 0:a.instagram)&&s.jsx("a",{className:"flex shadow-md rounded-full transition-all duration-150 hover:shadow-none",href:(l=e.original.socialLink)==null?void 0:l.instagram,target:"_blank",children:s.jsx(y.instagram,{width:24,height:24})}),((d=e.original.socialLink)==null?void 0:d.telegram)&&s.jsx("a",{className:"flex shadow-md rounded-full transition-all duration-150 hover:shadow-none",href:(g=e.original.socialLink)==null?void 0:g.telegram,target:"_blank",children:s.jsx(y.telegram,{width:24,height:24})}),((j=e.original.socialLink)==null?void 0:j.odnoklassniki)&&s.jsx("a",{className:"flex shadow-md rounded-full transition-all duration-150 hover:shadow-none",href:(b=e.original.socialLink)==null?void 0:b.odnoklassniki,target:"_blank",children:s.jsx(y.odnoklassniki,{width:24,height:24})})]})}}];return s.jsxs("main",{className:"flex flex-col gap-y-1 py-2",children:[s.jsxs("h1",{className:"title",children:["Пользователи (",v==null?void 0:v.length,")"]}),v?s.jsx(Pe,{data:be(v,i),columns:D,searchValue:i.name,onSearchInput:e=>r(t=>({...t,name:e.target.value})),sortingState:[{id:"name",desc:!1}],onExport:(e,t)=>pe(e,t,{grades:x,nationalities:u,professions:m}),actions:s.jsx(K,{className:"max-h-7",icon:"add",variant:"success",href:U.Users.Create,children:s.jsx("span",{className:"sr-only md:not-sr-only",children:"Добавить"})})}):s.jsx(re,{className:"w-8 h-8"})]})}export{es as default};
