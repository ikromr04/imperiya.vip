import{u as A,a as n,B as $,r as v,h as F,j as e,z as k,S as D,K as E,A as P,c as w,k as I,D as M,i as U,p as Y,L as B,E as R}from"./main-D1X-5qeh.js";import{g as S}from"./grades-selector-CjDDihwd.js";import{b as _,S as G}from"./users-DUqPc0QS.js";import{g as z}from"./nationalities-selector-BQnDI0q3.js";import{D as y}from"./description-list-D0pPZU8B.js";import{g as K}from"./users-selector-Cpbhop2B.js";import{B as L}from"./button-BxcCnYcJ.js";import{I as d}from"./icons-Cwm3zsc5.js";import{g as T}from"./professions-selector-Lr4nX4_U.js";import"./preload-helper-DPi8upcZ.js";function W({children:o,withSidebar:s=!1}){var h,m,x,p,f,g,u,j,b,t;const l=A(),a=n($),r=n(S),i=n(z);return v.useEffect(()=>{!i.data&&!i.isFetching&&l(F())},[l,r.data,r.isFetching,i.data,i.isFetching]),a?e.jsx(k,{children:e.jsxs("main",{className:"pt-4 pb-40",children:[e.jsxs("header",{className:"relative z-10 lg:flex lg:items-top lg:gap-4",children:[e.jsx("div",{className:"relative min-w-36 max-w-36 min-h-36 max-h-36 !p-0 mb-2 lg:mb-0",children:e.jsx("img",{className:"block w-full h-full rounded-full object-cover border-[2px] border-white",src:a.avatarThumb||"/images/avatar.png",width:144,height:144,alt:a.name})}),e.jsxs("div",{className:"lg:grow lg:mt-20",children:[e.jsxs("h1",{className:"title mb-1",children:[a.name," ",a.surname]}),e.jsx("span",{className:"flex max-w-max text-center bg-blue-200 text-primary rounded-full text-sm py-1 px-2 leading-none",children:_[a.role]})]})]}),e.jsxs("div",{className:"relative",children:[e.jsx("ul",{className:"flex items-center font-medium text-slate-500 overflow-scroll no-scrollbar py-4 pl-2 -ml-2 pr-7",children:e.jsx("li",{children:e.jsx(E,{className:({isActive:c})=>w("flex items-center h-7 px-2 transition-all duration-150 border border-transparent min-w-max",c&&"rounded shadow bg-white border-gray-200"),to:P.Auth.Profile,children:"Профиль"})})}),e.jsx("div",{className:"absolute top-0 right-0 z-10 min-w-6 h-full pointer-events-none bg-gradient-to-l from-gray-100 to-transparent"})]}),e.jsxs("div",{className:w("flex flex-col gap-4",s&&"xl:grid xl:grid-cols-[75%_1fr]"),children:[e.jsx("div",{className:"flex flex-col gap-4 grow",children:o}),s&&e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs("section",{className:"box",children:[e.jsxs("div",{className:"box__header flex-col !items-start",children:[e.jsxs(L,{className:"flex items-center gap-2 text-blue-600 leading-none",variant:"default",href:a.email?`mailto:${a.email}`:"",children:[e.jsx("span",{className:"flex items-center justify-center w-7 h-7 rounded bg-blue-50 text-success",children:e.jsx(d.mail,{width:16,height:16})}),a.email??"-"]}),e.jsxs(L,{className:w("flex items-center gap-2 text-blue-600 leading-none",!a.whatsapp&&"pointer-events-none"),variant:"default",href:`https://wa.me/+${(h=a.whatsapp)==null?void 0:h.code}${(m=a.whatsapp)==null?void 0:m.numbers}`,target:"_blank",children:[e.jsx("span",{className:"flex items-center justify-center w-7 h-7 rounded bg-blue-50 text-success",children:e.jsx(d.whatsapp,{width:16,height:16})}),a.whatsapp?`+${a.whatsapp.code} ${a.whatsapp.numbers}`:"-"]})]}),e.jsx(y,{className:"box__body",variant:"detailed",list:{}})]}),e.jsxs("section",{className:"box",children:[e.jsx("header",{className:"box__header",children:e.jsx("h2",{className:"font-medium text-gray-900",children:"Телефонные номера"})}),e.jsx("ul",{className:"box__body flex flex-col gap-2",children:(x=a.phoneNumbers)==null?void 0:x.map(({code:c,numbers:N})=>e.jsx("li",{children:e.jsxs("a",{className:"flex items-center gap-2 w-max text-blue-600",href:`tel:+${c}${N}`,children:[e.jsx("span",{className:"flex items-center w-7 h-7 justify-center bg-blue-50 rounded text-success",children:e.jsx(d.phone,{width:16,height:16})}),"+",c," ",N]})},N))})]}),e.jsxs("section",{className:"box",children:[e.jsx("header",{className:"box__header",children:e.jsx("h2",{className:"font-medium text-gray-900",children:"Социальные сети"})}),e.jsxs("div",{className:"box__body flex flex-wrap gap-2",children:[((p=a.socialLink)==null?void 0:p.facebook)&&e.jsx("a",{className:"flex shadow-md rounded-full transition-all duration-150 hover:shadow-none",href:a.socialLink.facebook,target:"_blank",children:e.jsx(d.facebook,{width:24,height:24})}),((f=a.socialLink)==null?void 0:f.instagram)&&e.jsx("a",{className:"flex shadow-md rounded-full transition-all duration-150 hover:shadow-none",href:(g=a.socialLink)==null?void 0:g.instagram,target:"_blank",children:e.jsx(d.instagram,{width:24,height:24})}),((u=a.socialLink)==null?void 0:u.telegram)&&e.jsx("a",{className:"flex shadow-md rounded-full transition-all duration-150 hover:shadow-none",href:(j=a.socialLink)==null?void 0:j.telegram,target:"_blank",children:e.jsx(d.telegram,{width:24,height:24})}),((b=a.socialLink)==null?void 0:b.odnoklassniki)&&e.jsx("a",{className:"flex shadow-md rounded-full transition-all duration-150 hover:shadow-none",href:(t=a.socialLink)==null?void 0:t.odnoklassniki,target:"_blank",children:e.jsx(d.odnoklassniki,{width:24,height:24})})]})]})]})]})]})}):e.jsx(k,{children:e.jsx(D,{className:"w-8 h-8 m-2"})})}function se(){var h,m,x,p,f,g,u,j,b;const o=A(),s=n($),l=n(K),a=n(S),r=n(z),i=n(T);return v.useEffect(()=>{!a.data&&!a.isFetching&&o(I()),!l.data&&!l.isFetching&&o(M()),!r.data&&!r.isFetching&&o(F()),!i.data&&!i.isFetching&&o(U())},[o,a.data,a.isFetching,r.data,r.isFetching,i.data,i.isFetching,l.data,l.isFetching]),s?e.jsxs(W,{withSidebar:!0,children:[e.jsxs("section",{className:"box",children:[e.jsx("header",{className:"box__header",children:e.jsx("h2",{className:"title !text-lg",children:"Базовая информация"})}),e.jsxs("div",{className:"relative",children:[e.jsx(y,{className:"box__body",list:{Фамилия:s.surname,Имя:s.name,Отчество:s.patronymic??"-",Логин:s.login,Позиция:_[s.role],Пол:G[s.sex],"Электронная почта":s.email?e.jsx("a",{className:"text-blue-600",href:`mailto:${s.email}`,children:s.email}):"-","Дата рождения":s.birthDate?Y(s.birthDate).format("DD MMMM YYYY"):"-",Адрес:s.address?`${s.address.region!=="За пределами города"?"район ":""}${s.address.region}, ${s.address.physicalAddress}`:"-",Национальность:((m=(h=r.data)==null?void 0:h.find(({id:t})=>t===s.nationalityId))==null?void 0:m.name)||"-",WhatsApp:(x=s.whatsapp)!=null&&x.code&&((p=s.whatsapp)!=null&&p.numbers)?e.jsxs("a",{className:"text-blue-600",href:`https://wa.me/+${s.whatsapp.code}${s.whatsapp.numbers}`,target:"_blank",children:["+",s.whatsapp.code," ",s.whatsapp.numbers]}):"-"}}),e.jsx("div",{className:"absolute top-[1px] right-0 rounded-br-md z-10 min-w-6 h-[calc(100%-1px)] pointer-events-none bg-gradient-to-l from-white to-transparent"})]})]}),e.jsxs("section",{className:"box",children:[e.jsx("header",{className:"box__header",children:e.jsx("h2",{className:"title !text-lg",children:_[s.role]})}),e.jsxs("div",{className:"relative",children:[e.jsx(y,{className:"box__body",list:{Дети:((f=l.data)==null?void 0:f.filter(({role:t})=>t==="student").map(t=>e.jsxs(v.Fragment,{children:[e.jsxs(B,{className:"text-blue-600",to:R(P.Users.Show,{id:t.id}),children:[t.name," ",t.surname]}),e.jsx("br",{})]},t.id)))??"-","Сфера деятельности":((u=(g=i.data)==null?void 0:g.find(({id:t})=>{var c;return((c=s.parent)==null?void 0:c.professionId)===t}))==null?void 0:u.name)??"-","Место работы":((j=s.parent)==null?void 0:j.workplace)??"-",Должность:((b=s.parent)==null?void 0:b.position)??"-"}}),e.jsx("div",{className:"absolute top-[1px] right-0 rounded-br-md z-10 min-w-6 h-[calc(100%-1px)] pointer-events-none bg-gradient-to-l from-white to-transparent"})]})]})]}):e.jsx(k,{children:e.jsx(D,{className:"w-8 h-8 m-2"})})}export{se as default};
