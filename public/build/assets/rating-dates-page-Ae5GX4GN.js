import{u as o,j as e,a1 as u,y as m,a as p,r as x,a2 as f,z as j,S as y}from"./main-D1X-5qeh.js";import{R as a,g as b}from"./ratings-_RkKEnDw.js";import{B as h}from"./button-BxcCnYcJ.js";import{T as t}from"./text-field-D3e8nZd6.js";import{F as q,a as g}from"./formik.esm-CEA5_Xoc.js";import"./preload-helper-DPi8upcZ.js";import"./icons-Cwm3zsc5.js";import"./cleanable-BYiEZa8s.js";import"./index.browser-OxPLOBIU.js";function F({ratingDate:s}){const r=o(),d={id:s.id,years:s.years,quarter1:s.quarter1,quarter2:s.quarter2,semester1:s.semester1,quarter3:s.quarter3,quarter4:s.quarter4,semester2:s.semester2,annual:s.annual,assessment:s.assessment,final:s.final},c=async(n,i)=>{i.setSubmitting(!0),await r(u({dto:n,onSuccess:()=>m.success("Данные успешно сохранены."),onValidationError:l=>i.setErrors({...l.errors}),onFail:l=>m.success(l)})),i.setSubmitting(!1)};return e.jsx(q,{initialValues:d,onSubmit:c,children:({isSubmitting:n})=>e.jsxs(g,{className:"flex flex-col max-w-[1200px] gap-3 bg-white border rounded-md shadow py-4 px-6 md:grid md:grid-cols-3",children:[e.jsx("h2",{className:"font-semibold text-lg leading-none md:col-span-3",children:s.years}),e.jsx(t,{name:"quarter1",type:"date",label:a.quarter1}),e.jsx(t,{name:"quarter2",type:"date",label:a.quarter2}),e.jsx(t,{name:"semester1",type:"date",label:a.semester1}),e.jsx(t,{name:"quarter3",type:"date",label:a.quarter3}),e.jsx(t,{name:"quarter4",type:"date",label:a.quarter4}),e.jsx(t,{name:"semester2",type:"date",label:a.semester2}),e.jsx(t,{name:"annual",type:"date",label:a.annual}),e.jsx(t,{name:"assessment",type:"date",label:a.assessment}),e.jsx(t,{name:"final",type:"date",label:a.final}),e.jsx("div",{className:"flex items-center justify-end gap-2 md:col-span-3",children:e.jsx(h,{type:"submit",disabled:n,loading:n,variant:"success",children:"Сохранить"})})]})})}function V(){const s=o(),r=p(b);return x.useEffect(()=>{!r.data&&!r.isFetching&&s(f())},[s,r.data,r.isFetching]),e.jsx(j,{children:e.jsxs("main",{className:"py-2",children:[e.jsx("h1",{className:"title mb-1 px-3",children:"Даты рейтингов"}),r.data?e.jsx(F,{ratingDate:r.data[0]}):e.jsx(y,{className:"w-8 h-8"})]})})}export{V as default};
